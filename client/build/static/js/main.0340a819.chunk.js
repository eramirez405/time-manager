(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{187:function(e,t){},242:function(e,t,a){},296:function(e,t,a){},301:function(e,t){},302:function(e,t){},376:function(e,t,a){},421:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(2),c=a.n(r),s=a(41),i=a.n(s),l=(a(242),a(32)),o=a(27),d=a(211),u=a.n(d)()(),b=a(17),j=a(59),m=a(213),p=a(214),h=a(23),O="SET_ALERT",g="REMOVE_ALERT",v="REGISTER_SUCCESS",f="REGISTER_FAIL",x="USER_LOADED",y="AUTH_ERROR",N="LOGIN_SUCCES",w="LOGIN_FAIL",k="LOGOUT",S="ACCOUNT_DELETED",C="GET_TASKS",D="TWILIO_ERROR",T="SET_LOADING_TRUE",E="GET_WORKERS",P="GET_TASKQUEUES",A="GET_WORKSUMMARY",R="GET_NUMBERS",I="ADD_NUMBER",L="EDIT_NUMBERS",M="REMOVE_NUMBERS",H="GET_ALL_USERS",_="MODIFY_ROLE",z="MODIFY_STATUS",F="DELETE_USER",W="GET_WORKERS_EVENTS",B="LOADING_WORKER_ACTIVITY",G="DELETE_WORKER",U="MODIFY_TIME_MANAGE",V="GET_ALL_TIME_MANAGE_USERS",q="TIME_MANAGE_ERROR",J="TIME_MANAGE_LOADING_TRUE",Q="EDIT_TIME_MANAGE_USER",Y="EDIT_TIME_MANAGE_USER_ERROR",K="GET_TIME_REPORT",X="GET_TIME_REPORT_ERROR",Z="GET_TIME_REPORT_LOADING",$="GET_WORKERS_LIVE",ee="EDIT_WORKERS_LIVE",te="GET_WORKERS_LIVE_ERROR",ae="UPDATE_AGENT_NOTE",ne="UPDATE_AGENT_NOTESIS",re=[];var ce=a(3),se={token:localStorage.getItem("token"),isAuthenticated:null,loading:!0,user:null};var ie={logs:[],loading:!0};var le={logs:[],loading:!0};var oe={logs:[],loading:!0};var de={logs:[],loading:!0,total:{}};var ue={logs:[],loading:!0};var be={logs:[],loading:!0};var je={logs:[],loading:!0};var me={logs:[],loading:!0,error:null,timeReport:[],timeReportLoading:!0,timeReportError:null};var pe={logs:[],loading:!0};var he=Object(j.combineReducers)({alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case O:return[].concat(Object(h.a)(e),[n]);case g:return e.filter((function(e){return e.id!==n}));default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case x:return Object(ce.a)(Object(ce.a)({},e),{},{isAuthenticated:!0,loading:!1,user:n});case v:case N:return localStorage.setItem("token",n.token),Object(ce.a)(Object(ce.a)(Object(ce.a)({},e),n),{},{isAuthenticated:!0,loading:!1});case f:case y:case w:case k:case S:return localStorage.removeItem("token"),Object(ce.a)(Object(ce.a)({},e),{},{token:null,isAuthenticated:!1,loading:!1});default:return e}},tasks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case C:return Object(ce.a)(Object(ce.a)({},e),{},{logs:n,loading:!1});case T:return Object(ce.a)(Object(ce.a)({},e),{},{loading:!0});case D:return Object(ce.a)(Object(ce.a)({},e),{},{logs:[],loading:!1});default:return e}},workers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case E:return Object(ce.a)(Object(ce.a)({},e),{},{logs:n,loading:!1});case G:return Object(ce.a)(Object(ce.a)({},e),{},{logs:Object(h.a)(e.logs.filter((function(e){return e.sid!==n})))});case T:return Object(ce.a)(Object(ce.a)({},e),{},{loading:!0});case D:return Object(ce.a)(Object(ce.a)({},e),{},{logs:[],loading:!1});default:return e}},taskQueue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case P:return Object(ce.a)(Object(ce.a)({},e),{},{logs:n,loading:!1});case T:return Object(ce.a)(Object(ce.a)({},e),{},{loading:!0});case D:return Object(ce.a)(Object(ce.a)({},e),{},{logs:[],loading:!1});default:return e}},workSummary:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case A:return Object(ce.a)(Object(ce.a)({},e),{},{logs:n.logs,total:n.total,loading:!1});case T:return Object(ce.a)(Object(ce.a)({},e),{},{loading:!0});case D:return Object(ce.a)(Object(ce.a)({},e),{},{logs:[],loading:!1});default:return e}},numbers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case R:return Object(ce.a)(Object(ce.a)({},e),{},{logs:n,loading:!1});case I:return Object(ce.a)(Object(ce.a)({},e),{},{logs:[].concat(Object(h.a)(e.logs),[n]),loading:!1});case L:return Object(ce.a)(Object(ce.a)({},e),{},{logs:[].concat(Object(h.a)(e.logs.filter((function(e){return e._id!==n._id}))),[n]).sort((function(e,t){return e.order>t.order?1:e.order<t.order?-1:0})),loading:!1});case M:return Object(ce.a)(Object(ce.a)({},e),{},{logs:e.logs.filter((function(e){return e._id!==n._id})),loading:!1});case T:return Object(ce.a)(Object(ce.a)({},e),{},{loading:!0});case D:return Object(ce.a)(Object(ce.a)({},e),{},{logs:[],loading:!1});default:return e}},userManagement:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case H:return Object(ce.a)(Object(ce.a)({},e),{},{logs:n,loading:!1});case T:return Object(ce.a)(Object(ce.a)({},e),{},{loading:!0});case D:case Y:return Object(ce.a)(Object(ce.a)({},e),{},{logs:[],loading:!1});case _:case U:case z:case Q:return Object(ce.a)(Object(ce.a)({},e),{},{logs:[].concat(Object(h.a)(e.logs.filter((function(e){return e._id!==n._id}))),[n])});case F:return Object(ce.a)(Object(ce.a)({},e),{},{logs:Object(h.a)(e.logs.filter((function(e){return e._id!==n})))});default:return e}},workerActivityEvent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case W:return Object(ce.a)(Object(ce.a)({},e),{},{logs:n,loading:!1});case B:return Object(ce.a)(Object(ce.a)({},e),{},{loading:!0});case D:return Object(ce.a)(Object(ce.a)({},e),{},{logs:[],loading:!1});default:return e}},timeSummary:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case V:return Object(ce.a)(Object(ce.a)({},e),{},{logs:n,loading:!1,error:null});case K:return Object(ce.a)(Object(ce.a)({},e),{},{timeReport:n,timeReportLoading:!1,timeReportError:null});case J:return Object(ce.a)(Object(ce.a)({},e),{},{loading:!0});case Z:return Object(ce.a)(Object(ce.a)({},e),{},{timeReportLoading:!0});case q:return Object(ce.a)(Object(ce.a)({},e),{},{logs:[],loading:!1,error:"Something went wrong, contact support..."});case X:return Object(ce.a)(Object(ce.a)({},e),{},{timeReport:[],timeReportLoading:!1,timeReportError:"Something went wrong, contact support..."});default:return e}},workersLive:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case $:return Object(ce.a)(Object(ce.a)({},e),{},{logs:n.filter((function(e){return!1!==e.workerLive.timeManage})).sort((function(e,t){return e._id.email>t._id.email?1:-1})),loading:!1});case T:return Object(ce.a)(Object(ce.a)({},e),{},{loading:!0});case ee:return Object(ce.a)(Object(ce.a)({},e),{},{logs:Object(h.a)(e.logs.map((function(e){return e.workerLive.email==n.user?(e.workerLive.activity=n.activity,e):e}))).sort((function(e,t){return e._id.email>t._id.email?1:-1}))});case te:return Object(ce.a)(Object(ce.a)({},e),{},{logs:[],loading:!1});case ae:return Object(ce.a)(Object(ce.a)({},e),{},{logs:e.logs.map((function(e){return e.workerLive.email===n.id&&(e.workerLive.dailyNotes||(e.workerLive.dailyNotes=[]),e.workerLive.dailyNotes.push({note:n.note,timestamp:n.timestamp})),e})).sort((function(e,t){return e._id.email>t._id.email?1:-1}))});case ne:return Object(ce.a)(Object(ce.a)({},e),{},{logs:e.logs.map((function(e){return e.workerLive.email===n.id&&(e.workerLive.sisNotes||(e.workerLive.sisNotes=[]),e.workerLive.sisNotes.push({note:n.note,timestamp:n.timestamp})),e})).sort((function(e,t){return e._id.email>t._id.email?1:-1}))});default:return e}}}),Oe=[p.a],ge=Object(j.createStore)(he,{},Object(m.composeWithDevTools)(j.applyMiddleware.apply(void 0,Oe))),ve=a(9),fe=a.n(ve),xe=a(12),ye=a(14),Ne=a.n(ye),we=a(430),ke=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;return function(n){var r=Object(we.a)();n({type:O,payload:{msg:e,alertType:t,id:r}}),setTimeout((function(){return n({type:g,payload:r})}),a)}},Se=function(e){e?Ne.a.defaults.headers.common["x-auth-token"]=e:delete Ne.a.defaults.headers.common["x-auth-token"]},Ce=function(){return function(){var e=Object(xe.a)(fe.a.mark((function e(t){var a;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.token&&Se(localStorage.token),e.prev=1,e.next=4,Ne.a.get("/api/auth");case 4:(null===(a=e.sent)||void 0===a?void 0:a.data)?t({type:x,payload:a.data}):t({type:y}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:y});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},De=a(88),Te=Object(b.b)((function(e){return{auth:e.auth,user:e.auth.user}}))((function(e){var t=e.component,a=e.auth,r=a.isAuthenticated,c=a.loading,s=e.user,i=e.roles,l=Object(De.a)(e,["component","auth","user","roles"]);return c?Object(n.jsx)("div",{}):Object(n.jsx)(o.b,Object(ce.a)(Object(ce.a)({},l),{},{render:function(e){return r||c?(null===s||void 0===s?void 0:s.role)&&i.includes(null===s||void 0===s?void 0:s.role)?Object(n.jsx)(t,Object(ce.a)({},e)):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(o.a,{to:"/"}),Object(n.jsx)(t,Object(ce.a)({},e))]}):Object(n.jsx)(o.a,{to:"/login"})}}))})),Ee=a(10),Pe=a(215),Ae=a(85),Re=Object(b.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,user:e.auth.user}}),{logout:function(){return function(e){e({type:"CLEAR_PROFILE"}),e({type:k})}}})((function(e){var t=e.isAuthenticated,a=e.user,r=e.logout;return Object(n.jsx)("div",{className:"App",children:Object(n.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark",children:[Object(n.jsx)("img",{src:"favicon.png",alt:"Logo",height:"40px",style:{marginRight:"10px"}}),Object(n.jsx)(l.b,{className:"navbar-brand",to:"/",children:"Time Manager 2.0"}),Object(n.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(n.jsx)("span",{className:"navbar-toggler-icon"})}),Object(n.jsx)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:t&&!!a&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("ul",{className:"navbar-nav mr-auto",children:[!!(null===a||void 0===a?void 0:a.role)&&("admin"===a.role||"supervisor"===a.role||"lead"===a.role)&&Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsxs)(l.b,{className:"nav-link",to:"/tasks",children:[Object(n.jsx)(Ee.p,{size:17,style:{marginRight:"10px"}}),"Tasks"]})}),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsxs)(l.b,{className:"nav-link",to:"/workers",children:[Object(n.jsx)(Ee.x,{size:17,style:{marginRight:"10px"}}),"Workers"]})}),!!(null===a||void 0===a?void 0:a.role)&&("admin"===a.role||"supervisor"===a.role)&&Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsxs)(l.b,{className:"nav-link",to:"/workSummary",children:[Object(n.jsx)(Ee.k,{size:17,style:{marginRight:"10px"}}),"Work Summary"]})}),!!(null===a||void 0===a?void 0:a.role)&&["admin","supervisor"].includes(a.role)&&Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsxs)(l.b,{className:"nav-link",to:"/userManagement",children:[Object(n.jsx)(Ae.a,{size:17,style:{marginRight:"10px"}}),"User Management"]})}),!!(null===a||void 0===a?void 0:a.role)&&"admin"===a.role&&Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsxs)(l.b,{className:"nav-link",to:"/numbersPool",children:[Object(n.jsx)(Ee.o,{size:17,style:{marginRight:"10px"}}),"Outbound"]})}),!!(null===a||void 0===a?void 0:a.role)&&["admin"].includes(a.role)&&Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsxs)(l.b,{className:"nav-link",to:"/timeSummary",children:[Object(n.jsx)(Ee.c,{size:17,style:{marginRight:"10px"}}),"Time Summary"]})}),!!(null===a||void 0===a?void 0:a.role)&&["admin","supervisor"].includes(a.role)&&Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsxs)(l.b,{className:"nav-link",to:"/workersLive",children:[Object(n.jsx)(Ee.a,{size:17,style:{marginRight:"10px"}}),"Workers Live"]})}),!!(null===a||void 0===a?void 0:a.role)&&["admin","julia","supervisor"].includes(a.role)&&Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsxs)(l.b,{className:"nav-link",to:"/juliaHome",children:[Object(n.jsx)(Pe.a,{size:20,style:{marginRight:"10px"}}),"Julia Dashboard"]})})]}),Object(n.jsxs)("span",{className:"navbar-text",children:["Welcome, ",Object(n.jsx)("span",{className:"text-success",children:a.name})]}),Object(n.jsx)("span",{className:"navbar-text mx-3",style:{cursor:"pointer"},onClick:r,children:Object(n.jsx)(Ee.t,{size:25})})]})})]})})})),Ie=Object(b.b)((function(e){return{alerts:e.alert}}))((function(e){var t=e.alerts;return null!==t&&t.length>0&&t.map((function(e){return Object(n.jsx)("div",{className:"alert alert-".concat(e.alertType),children:e.msg},e.id)}))})),Le=a(20),Me=function(e){var t=e.canPreviousPage,a=e.canNextPage,r=e.pageIndex,c=e.pageOptions,s=e.gotoPage,i=e.pageSize,l=e.previousPage,o=e.nextPage,d=e.pageCount,u=e.setPageSize;return Object(n.jsxs)("div",{className:"pagination",children:[Object(n.jsx)("button",{className:"btn btn-info mx-1 p-1",onClick:function(){return s(0)},disabled:!t,children:Object(n.jsx)(Ee.h,{size:25})}),Object(n.jsx)("button",{className:"btn btn-info mx-1 p-1",onClick:function(){return l()},disabled:!t,children:Object(n.jsx)(Ee.f,{size:25})}),Object(n.jsx)("button",{className:"btn btn-info mx-1 p-1",onClick:function(){return o()},disabled:!a,children:Object(n.jsx)(Ee.g,{size:25})}),Object(n.jsx)("button",{className:"btn btn-info mx-1 p-1",onClick:function(){return s(d-1)},disabled:!a,children:Object(n.jsx)(Ee.i,{size:25})})," ",Object(n.jsxs)("span",{className:"mx-2",style:{alignSelf:"center"},children:["Page"," ",Object(n.jsxs)("strong",{children:[r+1," of ",c.length]})," "]}),Object(n.jsx)("span",{className:"mx-2",style:{alignSelf:"center"},children:"|"}),Object(n.jsxs)("span",{className:"mx-2",style:{alignSelf:"center"},children:["Go to page:"," ",Object(n.jsx)("input",{type:"number",className:"form-control",defaultValue:r+1,onChange:function(e){var t=e.target.value?Number(e.target.value)-1:0;s(t)},style:{width:"70px",display:"inline"}})]})," ",Object(n.jsx)("select",{value:i,className:"form-control",style:{width:"120px",display:"inline"},onChange:function(e){u(Number(e.target.value))},children:[10,20,30,40].map((function(e){return Object(n.jsxs)("option",{value:e,children:["Show ",e]},e)}))})]})},He=function(e){var t=e.data,a=c.a.useMemo((function(){return[{Header:"Name",accessor:"friendlyName"},{Header:"Workers",columns:[{Header:"Elegible",accessor:"totalEligibleWorkers"},{Header:"Available",accessor:"totalAvailableWorkers"}]},{Header:"Tasks",columns:[{Header:"Assigned",accessor:"tasksByStatus.assigned"},{Header:"Canceled",accessor:"tasksByStatus.canceled"},{Header:"Completed",accessor:"tasksByStatus.completed"},{Header:"Pending",accessor:"tasksByStatus.pending"},{Header:"Reserved",accessor:"tasksByStatus.reserved"},{Header:"Wrapping",accessor:"tasksByStatus.wrapping"}]}]}),[]),r=Object(Le.useTable)({columns:a,data:t},Le.usePagination),s=r.getTableProps,i=r.getTableBodyProps,l=r.headerGroups,o=r.prepareRow,d=r.page,u=r.canPreviousPage,b=r.canNextPage,j=r.pageOptions,m=r.pageCount,p=r.gotoPage,h=r.nextPage,O=r.previousPage,g=r.setPageSize,v=r.state,f=v.pageIndex,x=v.pageSize;return m>0?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("table",Object(ce.a)(Object(ce.a)({},s()),{},{className:"table table-hover",children:[Object(n.jsx)("thead",{className:"bg-dark text-white",children:l.map((function(e){return Object(n.jsx)("tr",Object(ce.a)(Object(ce.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(n.jsx)("th",Object(ce.a)(Object(ce.a)({},e.getHeaderProps()),{},{children:e.render("Header")}))}))}))}))}),Object(n.jsx)("tbody",Object(ce.a)(Object(ce.a)({},i()),{},{children:d.map((function(e,t){return o(e),Object(n.jsx)("tr",Object(ce.a)(Object(ce.a)({},e.getRowProps()),{},{children:e.cells.map((function(e){return Object(n.jsx)("td",Object(ce.a)(Object(ce.a)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))}))]})),m>1&&Object(n.jsx)("div",{className:"d-flex justify-content-center",children:Object(n.jsx)(Me,{canPreviousPage:u,canNextPage:b,pageIndex:f,pageOptions:j,gotoPage:p,pageSize:x,previousPage:O,nextPage:h,pageCount:m,setPageSize:g})}),Object(n.jsx)("br",{})]}):Object(n.jsx)("div",{className:"text-center p-3",children:Object(n.jsx)("h3",{className:"text-secondary",children:"No content to display..."})})},_e=Object(b.b)((function(e){return{taskQueue:e.taskQueue.logs,user:e.auth.user}}),{getTaskQueue:function(){return function(){var e=Object(xe.a)(fe.a.mark((function e(t){var a;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:T}),e.next=4,Ne.a.get("/api/twilio/taskQueue");case 4:a=e.sent,t({type:P,payload:a.data.result}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),t({type:D});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.getTaskQueue,a=e.taskQueue,c=e.user;return Object(r.useEffect)((function(){t()}),[t]),"lead"===(null===c||void 0===c?void 0:c.role)?Object(n.jsx)(o.a,{to:"/workers"}):"supervisor"===(null===c||void 0===c?void 0:c.role)?Object(n.jsx)(o.a,{to:"/tasks"}):Object(n.jsx)("div",{className:"container-fluid",children:Object(n.jsx)(He,{data:a})})})),ze=a(7),Fe=(a(296),Object(b.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{login:function(e,t){return function(){var a=Object(xe.a)(fe.a.mark((function a(n){var r,c,s,i,l,o;return fe.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r={headers:{"Content-Type":"application/json"}},c=JSON.stringify({email:e,password:t}),a.prev=2,a.next=5,Ne.a.post("/api/auth",c,r);case 5:s=a.sent,n({type:N,payload:s.data}),n(Ce()),a.next=15;break;case 10:a.prev=10,a.t0=a.catch(2),(o=null===a.t0||void 0===a.t0||null===(i=a.t0.response)||void 0===i||null===(l=i.data)||void 0===l?void 0:l.errors)&&o.forEach((function(e){return n(ke(e.msg,"danger"))})),n({type:w});case 15:case"end":return a.stop()}}),a,null,[[2,10]])})));return function(e){return a.apply(this,arguments)}}()}})((function(e){var t=e.login,a=e.isAuthenticated,c=Object(r.useState)(""),s=Object(ze.a)(c,2),i=s[0],l=s[1],d=Object(r.useState)(""),u=Object(ze.a)(d,2),b=u[0],j=u[1];return a?Object(n.jsx)(o.a,{to:"/"}):Object(n.jsx)("div",{className:"container",children:Object(n.jsx)("div",{className:"row",children:Object(n.jsx)("div",{className:"col-sm-9 col-md-7 col-lg-5 mx-auto mt-5",children:Object(n.jsx)("div",{className:"card card-signin my-5",children:Object(n.jsxs)("div",{className:"card-body",children:[Object(n.jsx)("h5",{className:"card-title text-center",children:"Sign In"}),Object(n.jsxs)("form",{className:"form-signin",onSubmit:function(e){e.preventDefault(),""!==i&&""!==b&&t(i,b)},children:[Object(n.jsxs)("div",{className:"form-label-group",children:[Object(n.jsx)("input",{type:"email",id:"inputEmail",className:"form-control",placeholder:"Email address",value:i,onChange:function(e){return l(e.target.value)},required:!0,autoFocus:!0}),Object(n.jsx)("label",{htmlFor:"inputEmail",children:"Email address"})]}),Object(n.jsxs)("div",{className:"form-label-group",children:[Object(n.jsx)("input",{type:"password",id:"inputPassword",className:"form-control",placeholder:"Password",value:b,onChange:function(e){return j(e.target.value)},required:!0}),Object(n.jsx)("label",{htmlFor:"inputPassword",children:"Password"})]}),Object(n.jsx)("button",{className:"btn btn-lg btn-info btn-block text-uppercase",type:"submit",children:"Sign in"}),Object(n.jsx)("hr",{className:"my-4"})]})]})})})})})}))),We=a(16),Be=function(e){var t=e.canPreviousPage,a=e.canNextPage,r=e.pageIndex,c=e.pageOptions,s=e.gotoPage,i=e.pageSize,l=e.previousPage,o=e.nextPage,d=e.pageCount,u=e.setPageSize,b=e.data;return Object(n.jsxs)("div",{className:"pagination",children:[Object(n.jsx)("button",{className:"btn btn-info mx-1 p-1",onClick:function(){return s(0)},disabled:!t,children:Object(n.jsx)(Ee.h,{size:25})}),Object(n.jsx)("button",{className:"btn btn-info mx-1 p-1",onClick:function(){return l()},disabled:!t,children:Object(n.jsx)(Ee.f,{size:25})}),Object(n.jsx)("button",{className:"btn btn-info mx-1 p-1",onClick:function(){return o()},disabled:!a,children:Object(n.jsx)(Ee.g,{size:25})}),Object(n.jsx)("button",{className:"btn btn-info mx-1 p-1",onClick:function(){return s(d-1)},disabled:!a,children:Object(n.jsx)(Ee.i,{size:25})})," ",Object(n.jsxs)("span",{className:"mx-2",style:{alignSelf:"center"},children:["Page"," ",Object(n.jsxs)("strong",{children:[r+1," of ",c.length]})," "]}),Object(n.jsx)("span",{className:"mx-2",style:{alignSelf:"center"},children:"|"}),Object(n.jsxs)("span",{className:"mx-2",style:{alignSelf:"center"},children:["Go to page:"," ",Object(n.jsx)("input",{type:"number",className:"form-control",defaultValue:r+1,onChange:function(e){var t=e.target.value?Number(e.target.value)-1:0;s(t)},style:{width:"70px",display:"inline"}})]})," ",Object(n.jsx)("select",{value:i,className:"form-control",style:{width:"120px",display:"inline"},onChange:function(e){u(Number(e.target.value))},children:[10,20,30,40].map((function(e){return Object(n.jsxs)("option",{value:e,children:["Show ",e]},e)}))}),Object(n.jsxs)("span",{className:"mx-2",style:{alignSelf:"center"},children:["Total:",Object(n.jsxs)("strong",{children:[" ",b,"  "]})]})]})},Ge=a(218),Ue=a(219),Ve=a(216),qe=a(157),Je=a(217),Qe=function(e){var t=e.data,a=e.setTask,r=e.openModal,s=(e.user,e.channel),i=e.direction,l=(e.filter,e.tasks),o=(null===t||void 0===t||t.map((function(e){var t=0;return e.reservations.forEach((function(e){"completed"===(null===e||void 0===e?void 0:e.reservationStatus)&&void 0!==e.age&&(t+=e.age)})),e.ht=new Date(1e3*t).toISOString().substr(11,8),e})),c.a.useMemo((function(){switch(null===s||void 0===s?void 0:s.value){case"chat":return[{Header:"Date",accessor:"dateCreated",Cell:function(e){return Object(n.jsx)("span",{className:"text-primary",style:{cursor:"pointer"},onClick:function(){var t;r(),a(null===e||void 0===e||null===(t=e.row)||void 0===t?void 0:t.original)},children:Object(We.default)(new Date(e.value),"dd/MM/yyyy hh:mm:ss aaaa")})}},{Header:"Name",accessor:function(e){var t,a,n;return""===(null===e||void 0===e||null===(t=e.attributes)||void 0===t?void 0:t.Link)?null===e||void 0===e||null===(a=e.attributes)||void 0===a?void 0:a.name:null===e||void 0===e||null===(n=e.attributes)||void 0===n?void 0:n.Link},Cell:function(e){var t,a,r,c,s,i,l,o,d,u,b,j;return"App"===(null===e||void 0===e||null===(t=e.row)||void 0===t||null===(a=t.original)||void 0===a||null===(r=a.attributes)||void 0===r?void 0:r.origen)?Object(n.jsx)("a",{href:"".concat(null===e||void 0===e||null===(c=e.row)||void 0===c||null===(s=c.original)||void 0===s||null===(i=s.attributes)||void 0===i?void 0:i.Link),className:"text-primary",style:{cursor:"pointer"},children:null===e||void 0===e||null===(l=e.row)||void 0===l||null===(o=l.original)||void 0===o||null===(d=o.attributes)||void 0===d?void 0:d.Link}):null===e||void 0===e||null===(u=e.row)||void 0===u||null===(b=u.original)||void 0===b||null===(j=b.attributes)||void 0===j?void 0:j.name}},{Header:"Status",accessor:"assignmentStatus"},{Header:"Task Channel",accessor:"taskChannelUniqueName"},{Header:"Origin",accessor:"attributes.origen",Cell:function(e){var t=e.value;return"App"!==t?"Website":t}},{Header:"Worker",accessor:function(e){var t,a;return null===(null===e||void 0===e?void 0:e.workerName)||void 0===(null===e||void 0===e?void 0:e.workerName)?null===e||void 0===e||null===(t=e.reservations[(null===e||void 0===e||null===(a=e.reservations)||void 0===a?void 0:a.length)-1])||void 0===t?void 0:t.workerName:null===e||void 0===e?void 0:e.workerName}},{Header:"Age (HH:MM:SS)",accessor:"age",Cell:function(e){var t=e.value;return t?new Date(1e3*t).toISOString().substr(11,8):""}},{Header:"HT",accessor:"ht"}];case"callback":return[{Header:"Date",accessor:"dateCreated",Cell:function(e){return Object(n.jsx)("span",{className:"text-primary",style:{cursor:"pointer"},onClick:function(){var t;r(),a(null===e||void 0===e||null===(t=e.row)||void 0===t?void 0:t.original)},children:Object(We.default)(new Date(e.value),"dd/MM/yyyy hh:mm:ss aaaa")})}},{Header:"Status",accessor:"assignmentStatus"},{Header:"Direction",accessor:"attributes.direction"},{Header:"To",accessor:"attributes.from"},{Header:"Task Channel",accessor:"taskChannelUniqueName"},{Header:"Worker",accessor:function(e){var t,a;return null===(null===e||void 0===e?void 0:e.workerName)||void 0===(null===e||void 0===e?void 0:e.workerName)?null===e||void 0===e||null===(t=e.reservations[(null===e||void 0===e||null===(a=e.reservations)||void 0===a?void 0:a.length)-1])||void 0===t?void 0:t.workerName:null===e||void 0===e?void 0:e.workerName}},{Header:"Age (HH:MM:SS)",accessor:"age",Cell:function(e){var t=e.value;return t?new Date(1e3*t).toISOString().substr(11,8):""}},{Header:"HT",accessor:"ht"},{Header:"Contacted",accessor:"attributes.contacted",Cell:function(e){return e.value?Object(n.jsx)(Ve.a,{className:"ml-4",size:20}):Object(n.jsx)("div",{})}}];default:var e=[{Header:"Date",accessor:"dateCreated",Cell:function(e){return Object(n.jsx)("span",{className:"text-primary",style:{cursor:"pointer"},onClick:function(){var t;r(),a(null===e||void 0===e||null===(t=e.row)||void 0===t?void 0:t.original)},children:Object(We.default)(new Date(e.value),"dd/MM/yyyy hh:mm:ss aaaa")})}},{Header:"Status",accessor:"assignmentStatus"},{Header:"Direction",accessor:"attributes.direction"},{Header:"From",accessor:"attributes.from"},{Header:"To",accessor:"attributes.outbound_to"},{Header:"Task Channel",accessor:"taskChannelUniqueName"},{Header:"Worker",accessor:function(e){var t,a;return null===(null===e||void 0===e?void 0:e.workerName)||void 0===(null===e||void 0===e?void 0:e.workerName)?null===e||void 0===e||null===(t=e.reservations[(null===e||void 0===e||null===(a=e.reservations)||void 0===a?void 0:a.length)-1])||void 0===t?void 0:t.workerName:null===e||void 0===e?void 0:e.workerName}},{Header:"Age (HH:MM:SS)",accessor:"age",Cell:function(e){var t=e.value;return t?new Date(1e3*t).toISOString().substr(11,8):""}},{Header:"HT",accessor:"ht"},{Header:"Recording",accessor:"attributes.conversations",Cell:function(e){return e.value?Object(n.jsx)(Ee.y,{className:"ml-4",size:20}):Object(n.jsx)("div",{})}},{Header:"Queue",accessor:"taskQueueFriendlyName"},{Header:"Call Type",accessor:"callReason",Cell:function(e){var t=e.value;return t||Object(n.jsx)(qe.a,{className:"ml-5",size:20})}},{Header:"Hang Up",accessor:"hangUp",Cell:function(e){return e.value?Object(n.jsx)(Je.a,{className:"ml-5",size:20}):Object(n.jsx)(qe.a,{className:"ml-5",size:20})}}];return i||null===i?(e.push({Header:"Contact",Cell:function(e){return e.row.original.reservations.length>1?Object(n.jsx)(Ge.a,{className:"ml-4",size:20}):Object(n.jsx)(Ue.a,{className:"ml-4",size:20})}}),e):e}}),[l])),d=Object(Le.useTable)({columns:o,data:t},Le.useSortBy,Le.usePagination),u=d.getTableProps,b=d.getTableBodyProps,j=d.headerGroups,m=d.prepareRow,p=d.page,h=d.canPreviousPage,O=d.canNextPage,g=d.pageOptions,v=d.pageCount,f=d.gotoPage,x=d.nextPage,y=d.previousPage,N=d.setPageSize,w=d.state,k=w.pageIndex,S=w.pageSize;return v>0?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("table",Object(ce.a)(Object(ce.a)({},u()),{},{className:"table table-hover",children:[Object(n.jsx)("thead",{className:"bg-dark text-white",children:j.map((function(e){return Object(n.jsx)("tr",Object(ce.a)(Object(ce.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(n.jsxs)("th",Object(ce.a)(Object(ce.a)({},e.getHeaderProps(e.getSortByToggleProps())),{},{children:[e.render("Header"),Object(n.jsx)("span",{children:e.isSorted?e.isSortedDesc?" \ud83d\udd3b":" \ud83d\udd3a":""})]}))}))}))}))}),Object(n.jsx)("tbody",Object(ce.a)(Object(ce.a)({},b()),{},{children:p.map((function(e,t){return m(e),Object(n.jsx)("tr",Object(ce.a)(Object(ce.a)({},e.getRowProps()),{},{children:e.cells.map((function(e){return Object(n.jsx)("td",Object(ce.a)(Object(ce.a)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))}))]})),v>1&&Object(n.jsx)("div",{className:"d-flex justify-content-center",children:Object(n.jsx)(Be,{canPreviousPage:h,canNextPage:O,pageIndex:k,pageOptions:g,gotoPage:f,pageSize:S,previousPage:y,nextPage:x,pageCount:v,setPageSize:N,data:t.length})}),Object(n.jsx)("br",{})]}):Object(n.jsx)("div",{className:"text-center p-3",children:Object(n.jsx)("h3",{className:"text-secondary",children:"No content with this filters..."})})},Ye=a(35),Ke=function(){var e=Object(xe.a)(fe.a.mark((function e(t,a){var n;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ne.a.get("/api/twilio/workFlow/".concat(t,"/chatMessages/").concat(a));case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}(),Xe=a(31),Ze=a.n(Xe),$e=a(34),et=a(60),tt=a.n(et),at=a(30),nt=(a(108),a(28)),rt=a.n(nt),ct=a(45),st=a.n(ct),it=[{value:"inbound",label:"Inbound"},{value:"outbound",label:"Outbound"}],lt=[{value:"viewAll",label:"View All"},{value:"direct",label:"Direct"},{value:"transferred",label:"Transferred"}],ot=[{value:"voice",label:"Voice"},{value:"voicemail",label:"Voicemail"},{value:"callback",label:"Callback"},{value:"chat",label:"Chat"}],dt=Object(b.b)((function(e){return{loading:e.tasks.loading,department:e.auth.user.department}}),{getTasks:function(e){return function(){var t=Object(xe.a)(fe.a.mark((function t(a){var n,r;return fe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n={headers:{"Content-Type":"application/json"}},a({type:T}),t.next=5,Ne.a.post("/api/twilio/tasksLogs",e,n);case 5:r=t.sent,a({type:C,payload:r.data.result}),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0),a({type:D});case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.loading,a=e.getTasks,c=e.data,s=e.channel,i=e.setChannel,l=e.direction,o=e.setDirection,d=e.filter,u=e.setFilter,b=(e.department,function(){var e=Object(xe.a)(fe.a.mark((function e(){var t,a;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=function(e){var t=rt.a.utils.json_to_sheet(e),a=rt.a.utils.book_new();rt.a.utils.book_append_sheet(a,t,"Lista"),rt.a.writeFile(a,"Data importada.xlsx")},a=c.map((function(e){var t,a,n,r,c,i,l,o,d,u;switch(s.value){case"chat":return{Date:st()(e.dateCreated).format("L"),Time:st()(e.dateCreated).format("LTS"),Name:""===(null===e||void 0===e||null===(t=e.attributes)||void 0===t?void 0:t.Link)?null===e||void 0===e||null===(a=e.attributes)||void 0===a?void 0:a.name:null===e||void 0===e||null===(n=e.attributes)||void 0===n?void 0:n.Link,Status:e.assignmentStatus,TaskChannel:e.taskChannelUniqueName,Origin:"App"!==(null===e||void 0===e||null===(r=e.attributes)||void 0===r?void 0:r.origen)?"Website":null===e||void 0===e||null===(c=e.attributes)||void 0===c?void 0:c.origen,Worker:null===(null===e||void 0===e?void 0:e.workerName)||void 0===(null===e||void 0===e?void 0:e.workerName)?null===e||void 0===e||null===(i=e.reservations[e.reservations.length-1])||void 0===i?void 0:i.workerName:null===e||void 0===e?void 0:e.workerName,Age:new Date(1e3*e.age).toISOString().substr(11,8),HT:null===e||void 0===e?void 0:e.ht};case"voice":return o={Date:st()(e.dateCreated).format("L"),Time:st()(e.dateCreated).format("LTS"),Status:e.assignmentStatus,Direction:e.attributes.direction,From:e.attributes.from,To:e.attributes.outbound_to,TaskChannel:null===e||void 0===e?void 0:e.taskChannelUniqueName,Worker:null===(null===e||void 0===e?void 0:e.workerName)||void 0===(null===e||void 0===e?void 0:e.workerName)?null===e||void 0===e||null===(l=e.reservations[e.reservations.length-1])||void 0===l?void 0:l.workerName:null===e||void 0===e?void 0:e.workerName,Age:new Date(1e3*e.age).toISOString().substr(11,8),HT:null===e||void 0===e?void 0:e.ht,Queue:e.taskQueueFriendlyName,New_Client:"true"===e.attributes.isNewClient?"yes":"false"===e.attributes.isNewClient?"no":"",Request:e.attributes.request,language:e.attributes.language},Object(Ye.a)(o,"Queue",e.taskQueueFriendlyName),Object(Ye.a)(o,"Worker",e.workerName),Object(Ye.a)(o,"callReason",null===e||void 0===e?void 0:e.callReason),o;case"voicemail":return{Date:st()(e.dateCreated).format("L"),Time:st()(e.dateCreated).format("LTS"),Status:e.assignmentStatus,Direction:e.attributes.direction,From:e.attributes.from,To:e.attributes.outbound_to,TaskChannel:null===e||void 0===e?void 0:e.taskChannelUniqueName,Worker:null===(null===e||void 0===e?void 0:e.workerName)||void 0===(null===e||void 0===e?void 0:e.workerName)?null===e||void 0===e||null===(d=e.reservations[e.reservations.length-1])||void 0===d?void 0:d.workerName:null===e||void 0===e?void 0:e.workerName,Age:new Date(1e3*e.age).toISOString().substr(11,8),HT:null===e||void 0===e?void 0:e.ht,Queue:e.taskQueueFriendlyName};case"callback":return{Date:st()(e.dateCreated).format("L"),Time:st()(e.dateCreated).format("LTS"),Status:e.assignmentStatus,Direction:e.attributes.direction,From:e.attributes.from,TaskChannel:null===e||void 0===e?void 0:e.taskChannelUniqueName,Worker:null===(null===e||void 0===e?void 0:e.workerName)||void 0===(null===e||void 0===e?void 0:e.workerName)?null===e||void 0===e||null===(u=e.reservations[e.reservations.length-1])||void 0===u?void 0:u.workerName:null===e||void 0===e?void 0:e.workerName,Age:new Date(1e3*e.age).toISOString().substr(11,8),HT:null===e||void 0===e?void 0:e.ht}}})),t(a);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),j=Object(r.useState)(Object(at.default)(new Date)),m=Object(ze.a)(j,2),p=m[0],h=m[1],O=Object(r.useState)(new Date),g=Object(ze.a)(O,2),v=g[0],f=g[1],x=Object(r.useState)(""),y=Object(ze.a)(x,2),N=y[0],w=y[1],k=Object(r.useState)(""),S=Object(ze.a)(k,2),C=S[0],D=S[1],T=Object(r.useState)(""),E=Object(ze.a)(T,2),P=E[0],A=E[1],R=Object(r.useState)(""),I=Object(ze.a)(R,2),L=I[0],M=I[1],H=Object(r.useState)(""),_=Object(ze.a)(H,2),z=_[0],F=_[1];return Object(r.useEffect)((function(){"outbound"===(null===l||void 0===l?void 0:l.value)&&D("")}),[l]),Object(r.useEffect)((function(){a({startDate:p,endDate:v,direction:"voice"===(null===s||void 0===s?void 0:s.value)?null===l||void 0===l?void 0:l.value:null,fromNumber:P.replace("+",""),toNumber:L.replace("+",""),worker:z,channel:null===s||void 0===s?void 0:s.value,name:N})}),[a]),Object(n.jsxs)("div",{className:"row",style:{display:"flex",justifyContent:"flex-start"},children:[Object(n.jsxs)("div",{className:"DateFilterContainer",style:{display:"flex",flexwrap:"nowrap",minWidth:"auto",justifyContent:"space-between",marginLeft:"1rem",paddingRight:"1rem"},children:[Object(n.jsx)("span",{style:{margin:"10px 1rem 0rem 10px"},children:"From :"}),Object(n.jsx)(Ze.a,{selected:p,onChange:function(e){return h(e)},showTimeSelect:!0,timeFormat:"hh:mm a",timeIntervals:30,timeCaption:"time",dateFormat:"MMMM d, yyyy h:mm aa",className:"form-control"}),Object(n.jsx)("span",{style:{margin:"10px 1rem 0rem 2rem"},children:"To :"}),Object(n.jsx)(Ze.a,{selected:v,style:{},onChange:function(e){return f(e)},showTimeSelect:!0,timeFormat:"hh:mm a",timeIntervals:30,timeCaption:"time",dateFormat:"MMMM d, yyyy h:mm aa",className:"form-control"})]}),Object(n.jsx)("div",{className:"ChannelContainer",style:{margin:"0 1rem 0 1rem",minWidth:"20rem",fontweight:"700",color:"#444",lineheight:"1.3",padding:"0em 1.4em .5em .8em",maxwidth:"100%"},children:Object(n.jsx)($e.a,{className:"select",placeholder:"Channel...",value:s,onChange:function(e){i(e),A(""),M(""),w("")},options:ot})}),"voice"===(null===s||void 0===s?void 0:s.value)&&Object(n.jsx)("div",{className:"SelectContainer",style:{margin:"0 1rem 0 1rem",minWidth:"20rem",fontweight:"700",color:"#444",lineheight:"1.3",padding:"0em 1.4em .5em .8em",maxwidth:"100%"},children:Object(n.jsx)($e.a,{isClearable:!0,className:"select",placeholder:"Show...",value:l,onChange:function(e){return o(e)},options:it})}),"inbound"===(null===l||void 0===l?void 0:l.value)&&"voice"===(null===s||void 0===s?void 0:s.value)&&Object(n.jsx)("div",{className:"SelectContainer",style:{margin:"0 1rem 0 1rem",minWidth:"20rem",fontweight:"700",color:"#444",lineheight:"1.3",padding:"0em 1.4em .5em .8em",maxwidth:"100%"},children:Object(n.jsx)($e.a,{className:"select",placeholder:"Select type...",value:C,onChange:function(e){D(e)},options:lt})}),"chat"!==(null===s||void 0===s?void 0:s.value)&&"callback"!==(null===s||void 0===s?void 0:s.value)&&Object(n.jsxs)("div",{className:"NumberFilterContainer",style:{display:"flex",marginLeft:"1rem",paddingRight:"1rem"},children:[Object(n.jsx)("span",{style:{margin:"10px 1rem 0rem 10px"},children:"From#:"}),Object(n.jsx)("input",{type:"text",value:P,onChange:function(e){return A(e.target.value)},className:"form-control",style:{}}),Object(n.jsx)("span",{style:{margin:"10px 1rem 0rem 10px"},children:"To#:"}),Object(n.jsx)("input",{type:"text",value:L,onChange:function(e){return M(e.target.value)},className:"form-control",style:{display:"inline"}})]}),"callback"===(null===s||void 0===s?void 0:s.value)&&Object(n.jsxs)("div",{className:"NumberFilterContainer",style:{display:"flex",marginLeft:"1rem",paddingRight:"1rem"},children:[Object(n.jsx)("span",{style:{margin:"10px 1rem 0rem 10px"},children:"To#:"}),Object(n.jsx)("input",{type:"text",value:P,onChange:function(e){return A(e.target.value)},className:"form-control",style:{}})]}),"chat"===(null===s||void 0===s?void 0:s.value)&&Object(n.jsxs)("div",{className:"OriginContainer",style:{margin:"0rem 0rem 0rem 1rem",paddingRight:"1rem"},children:[Object(n.jsx)("span",{style:{margin:"10px 1rem 0rem 10px"},children:"Name:"}),Object(n.jsx)("input",{type:"text",value:N,onChange:function(e){return w(e.target.value)},className:"form-control",style:{width:"70%",display:"inline"}})]}),Object(n.jsxs)("div",{className:"WorkerContainer",style:{margin:"0rem 0rem 0rem 1rem",paddingRight:"1rem"},children:[Object(n.jsx)("span",{style:{margin:"10px 1rem 0rem 10px"},children:"Worker:"}),Object(n.jsx)("input",{type:"text",value:z,onChange:function(e){return F(e.target.value)},className:"form-control",style:{width:"70%",display:"inline"}})]}),Object(n.jsx)("div",{className:"col-md-12 col-lg-2 col-xl-1",children:t?Object(n.jsx)("div",{style:{padding:"5px",marginRight:"25px",paddingBottom:"0"},children:Object(n.jsx)(tt.a,{size:25})}):Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:"btn-container",style:{display:"flex",flexwrap:"nowrap",alignItems:"flex-start",width:"70%"},children:[Object(n.jsx)("button",{style:{display:"inline",alignSelf:"flex-start",marginLeft:"0rem",marginRight:"1rem",padding:"0.3rem 0.5rem"},className:"btn btn-info",onClick:function(){return a({startDate:p,endDate:v,direction:"voice"===(null===s||void 0===s?void 0:s.value)?null===l||void 0===l?void 0:l.value:null,fromNumber:P.replace("+","").trim(),name:N,filter:d,toNumber:L.replace("+","").trim(),worker:z,channel:null===s||void 0===s?void 0:s.value}),u(C)},children:Object(n.jsx)(Ee.g,{style:{},size:25})}),Object(n.jsx)("button",{style:{display:"inline",padding:".3rem .5rem"},className:"btn btn-info",onClick:function(){return b()},children:Object(n.jsx)(Ee.l,{size:25})})]})})})]})})),ut=a(222),bt=a(83),jt=a(22),mt=a.n(jt);function pt(e,t,a){return a.indexOf(e)===t}var ht=a(224),Ot=a(223),gt=a.n(Ot);a(371);function vt(){var e=Object(ut.a)(["\n  height: 100%;\n  overflow-x: hidden;\n  overflow-y: scroll;\n\n  .customerDialog {\n    padding: 10px;\n    background: #3778f5;\n    color: white;\n    border-radius: 5px;\n  }\n\n  .agentDialog {\n    padding: 10px;\n    background: #57bfff;\n    color: white;\n    border-radius: 5px;\n  }\n\n  .chatFrom {\n    font-weight: bold;\n    border-bottom: 1px solid white;\n    width: fit-content;\n  }\n"]);return vt=function(){return e},e}var ft=function(e){var t=e.isOpen,a=e.task;a.reservations=a.reservations.filter((function(e){return null!==e})),console.log(a);var s=Object(r.useState)([]),i=Object(ze.a)(s,2),l=i[0],o=i[1],d=Object(r.useState)(null),u=Object(ze.a)(d,2),b=u[0],j=u[1],m=Object(r.useState)(null),p=Object(ze.a)(m,2),h=p[0],O=p[1],g=Object(r.useState)(null),v=Object(ze.a)(g,2),f=v[0],x=v[1],y=Object(r.useState)([]),N=Object(ze.a)(y,2),w=N[0],k=N[1],S=function(){var e=Object(xe.a)(fe.a.mark((function e(t,n){var r,c,s,i;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ke(t,n);case 2:(r=e.sent).length?(c=r.map((function(e){return e.from})).filter(pt),s=c.filter((function(e){return-1!==e.indexOf("ualett")})),i=r.map((function(e){var t;return{from:s.includes(e.from)?"agent":"client",fromName:s.includes(e.from)?null===e||void 0===e?void 0:e.from.slice(0,null===e||void 0===e?void 0:e.from.indexOf("_40")).replace("_2E"," "):null===a||void 0===a||null===(t=a.attributes)||void 0===t?void 0:t.name,body:e.body,dateCreated:e.dateCreated}})),o(i)):o(null);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){var e,t,n,r,c,s,i,l,o,d,u,b;(null===a||void 0===a||null===(e=a.attributes)||void 0===e?void 0:e.channelSid)&&(null===a||void 0===a?void 0:a.workflowSid)&&S(null===a||void 0===a?void 0:a.workflowSid,null===a||void 0===a||null===(c=a.attributes)||void 0===c?void 0:c.channelSid);"voice"===(null===a||void 0===a?void 0:a.taskChannelUniqueName)&&(null===a||void 0===a||null===(t=a.attributes)||void 0===t||null===(n=t.conversations)||void 0===n?void 0:n.segment_link)&&O(null===a||void 0===a||null===(s=a.attributes)||void 0===s||null===(i=s.conversations)||void 0===i?void 0:i.segment_link.substring((null===a||void 0===a||null===(l=a.attributes)||void 0===l||null===(o=l.conversations)||void 0===o?void 0:o.segment_link.indexOf("Recordings/"))+"Recordings/".length,null===a||void 0===a||null===(d=a.attributes)||void 0===d||null===(u=d.conversations)||void 0===u?void 0:u.segment_link.length));(j(!!(null===a||void 0===a?void 0:a.taskChannelUniqueName)),null===a||void 0===a||null===(r=a.attributes)||void 0===r?void 0:r.channelSid)&&x(null===a||void 0===a||null===(b=a.attributes)||void 0===b?void 0:b.channelSid);(null===a||void 0===a?void 0:a.reservations)&&a.reservations.length>0&&k(a.reservations)}),[]);var C,D,T,E,P,A,R,I,L,M,H,_,z,F=c.a.useMemo((function(){return[{Header:"Date",accessor:"dateCreated",Cell:function(e){var t=e.value;return Object(n.jsx)("span",{className:"text-primary",style:{cursor:"pointer"},children:Object(We.default)(new Date(t),"dd/MM/yyyy hh:mm:ss aaaa")})}},{Header:"Reservation Status",accessor:"reservationStatus",Cell:function(e){var t=e.value;return t||"completed"}},{Header:"Worker Name",accessor:"workerName"},{Header:"Age",accessor:"age",Cell:function(e){var t=e.value;return t?new Date(1e3*t).toISOString().substr(11,8):"00:00:00"}}]}),[]),W=Object(Le.useTable)({columns:F,data:w,initialState:{pageSize:4}},Le.usePagination),B=W.getTableProps,G=W.getTableBodyProps,U=W.headerGroups,V=W.prepareRow,q=W.page,J=W.canPreviousPage,Q=W.canNextPage,Y=W.pageOptions,K=W.pageCount,X=W.gotoPage,Z=W.nextPage,$=W.previousPage,ee=W.setPageSize,te=W.state,ae=te.pageIndex,ne=te.pageSize;return a?Object(n.jsx)(mt.a,Object(ce.a)(Object(ce.a)({isOpen:t},e),{},{style:{content:{overflow:"visible"},overlay:{background:"rgb(105 105 105 / 75%)"}},ariaHideApp:!1,contentLabel:"Task Detail",children:Object(n.jsxs)("div",{style:{padding:"20px 30px",height:"100%",display:"flex",flexDirection:"column"},children:[Object(n.jsx)("h2",{className:"text-info",style:{borderBottom:"1px solid #dad9d9"},children:"Task Details"}),Object(n.jsx)("br",{}),Object(n.jsxs)("div",{className:"row",children:[Object(n.jsx)("div",{className:"col-md-6",children:Object(n.jsxs)("ul",{className:"list-group",children:[Object(n.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[Object(n.jsx)("strong",{children:"Date Created"}),Object(n.jsx)("span",{className:"badge badge-primary badge-pill",style:{fontSize:"95%"},children:Object(We.default)(new Date(null===a||void 0===a?void 0:a.dateCreated),"dd/MM/yyyy hh:mm:ss aaaa")})]}),Object(n.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[Object(n.jsx)("strong",{children:"Assignment Status"}),Object(n.jsx)("span",{className:"badge badge-primary badge-pill",style:{fontSize:"95%"},children:null===a||void 0===a?void 0:a.assignmentStatus})]}),"chat"!==b?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[Object(n.jsx)("strong",{children:"Direction"}),Object(n.jsx)("span",{className:"badge badge-primary badge-pill",style:{fontSize:"95%"},children:null===a||void 0===a||null===(C=a.attributes)||void 0===C?void 0:C.direction})]}),Object(n.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[Object(n.jsx)("strong",{children:"From"}),Object(n.jsx)("span",{className:"badge badge-primary badge-pill",style:{fontSize:"95%"},children:null===a||void 0===a||null===(D=a.attributes)||void 0===D?void 0:D.from})]}),Object(n.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[Object(n.jsx)("strong",{children:"To"}),Object(n.jsx)("span",{className:"badge badge-primary badge-pill",style:{fontSize:"95%"},children:null===a||void 0===a||null===(T=a.attributes)||void 0===T?void 0:T.outbound_to})]}),(null===a||void 0===a||null===(E=a.attributes)||void 0===E?void 0:E.request)&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[Object(n.jsx)("strong",{children:"New Client"}),Object(n.jsxs)("span",{className:"badge badge-primary badge-pill",style:{fontSize:"95%"},children:["true"===(null===a||void 0===a||null===(P=a.attributes)||void 0===P?void 0:P.isNewClient)&&"yes","false"===(null===a||void 0===a||null===(A=a.attributes)||void 0===A?void 0:A.isNewClient)&&"no"]})]}),Object(n.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[Object(n.jsx)("strong",{children:"Request"}),Object(n.jsx)("span",{className:"badge badge-primary badge-pill",style:{fontSize:"95%"},children:null===a||void 0===a||null===(R=a.attributes)||void 0===R?void 0:R.request})]}),Object(n.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[Object(n.jsx)("strong",{children:"Language"}),Object(n.jsx)("span",{className:"badge badge-primary badge-pill",style:{fontSize:"95%"},children:null===a||void 0===a||null===(I=a.attributes)||void 0===I?void 0:I.language})]})]})]}):Object(n.jsxs)(n.Fragment,{children:[(null===a||void 0===a||null===(L=a.attributes)||void 0===L?void 0:L.Link)&&Object(n.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[Object(n.jsx)("strong",{children:"Link"}),Object(n.jsx)("a",{href:null===a||void 0===a||null===(M=a.attributes)||void 0===M?void 0:M.Link,target:"_blank",className:"badge badge-primary badge-pill",style:{fontSize:"95%",cursor:"pointer"},children:null===a||void 0===a||null===(H=a.attributes)||void 0===H?void 0:H.Link})]}),Object(n.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[Object(n.jsx)("strong",{children:"Name"}),Object(n.jsx)("span",{className:"badge badge-primary badge-pill",style:{fontSize:"95%",cursor:"pointer"},children:null===a||void 0===a||null===(_=a.attributes)||void 0===_?void 0:_.name})]}),Object(n.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[Object(n.jsx)("strong",{children:"Origen"}),Object(n.jsx)("span",{className:"badge badge-primary badge-pill",style:{fontSize:"95%",cursor:"pointer"},children:null===a||void 0===a||null===(z=a.attributes)||void 0===z?void 0:z.origen})]})]})]})}),Object(n.jsx)("div",{className:"col-md-6",children:Object(n.jsxs)("ul",{className:"list-group",children:[Object(n.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[Object(n.jsx)("strong",{children:"Task Channel"}),Object(n.jsx)("span",{className:"badge badge-primary badge-pill",style:{fontSize:"95%"},children:null===a||void 0===a?void 0:a.taskChannelUniqueName})]}),Object(n.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[Object(n.jsx)("strong",{children:"Task Queue"}),Object(n.jsx)("span",{className:"badge badge-primary badge-pill",style:{fontSize:"95%"},children:null===a||void 0===a?void 0:a.taskQueueFriendlyName})]}),Object(n.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[Object(n.jsx)("strong",{children:"Workflow"}),Object(n.jsx)("span",{className:"badge badge-primary badge-pill",style:{fontSize:"95%"},children:null===a||void 0===a?void 0:a.workflowFriendlyName})]}),Object(n.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[Object(n.jsx)("strong",{children:"Worker"}),Object(n.jsx)("span",{className:"badge badge-primary badge-pill",style:{fontSize:"95%"},children:null===a||void 0===a?void 0:a.workerName})]}),Object(n.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[Object(n.jsx)("strong",{children:"Age"}),Object(n.jsx)("span",{className:"badge badge-primary badge-pill",style:{fontSize:"95%"},children:(null===a||void 0===a?void 0:a.age)?"".concat(new Date(1e3*a.age).toISOString().substr(11,8)):"NA"})]})]})})]}),Object(n.jsx)("br",{}),Object(n.jsx)("h4",{className:"text-info",children:"Reservations"}),K>0&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("table",Object(ce.a)(Object(ce.a)({},B()),{},{className:"table table-hover",children:[Object(n.jsx)("thead",{children:U.map((function(e){return Object(n.jsx)("tr",Object(ce.a)(Object(ce.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(n.jsx)("th",Object(ce.a)(Object(ce.a)({},e.getHeaderProps()),{},{children:e.render("Header")}))}))}))}))}),Object(n.jsx)("tbody",Object(ce.a)(Object(ce.a)({},G()),{},{children:q.map((function(e,t){return V(e),Object(n.jsx)("tr",Object(ce.a)(Object(ce.a)({},e.getRowProps()),{},{children:e.cells.map((function(e){return Object(n.jsx)("td",Object(ce.a)(Object(ce.a)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))}))]})),K>1&&Object(n.jsx)("div",{className:"d-flex justify-content-center",children:Object(n.jsx)(Be,{canPreviousPage:J,canNextPage:Q,pageIndex:ae,pageOptions:Y,gotoPage:X,pageSize:ne,previousPage:$,nextPage:Z,pageCount:K,setPageSize:ee})})]}),!!h&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h4",{className:"text-info",children:"Recording"}),Object(n.jsx)("hr",{}),Object(n.jsx)("div",{children:Object(n.jsxs)("audio",{controls:!0,src:"https://api.twilio.com/2010-04-01/Accounts/ACf4d73df364dfb3649b2fedc5b95f8ee8/Recordings/".concat(h),children:["Your browser does not support the",Object(n.jsx)("code",{children:"audio"})," element."]})})]}),f&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("br",{}),Object(n.jsx)("h4",{className:"text-info",children:"Messages"}),Object(n.jsx)("hr",{}),(null===l||void 0===l?void 0:l.status)?Object(n.jsx)("div",{children:Object(n.jsx)("h5",{children:"Data not found"})}):l.length?Object(n.jsx)(xt,{children:Object(n.jsx)("div",{className:"px-3",children:l.map((function(e){return Object(n.jsx)("div",{className:"row mb-1 ".concat("agent"===e.from?" justify-content-end":""),children:Object(n.jsxs)("div",{className:"col-md-6 ".concat("agent"===e.from?"agentDialog":"customerDialog"),children:[Object(n.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(n.jsx)("div",{className:"chatFrom",children:e.fromName}),Object(n.jsx)("div",{className:"time",children:Object(bt.default)(new Date(null===e||void 0===e?void 0:e.dateCreated))&&Object(We.default)(new Date(null===e||void 0===e?void 0:e.dateCreated),"hh:mm aaa")})]}),Object(n.jsx)("div",{children:e.body})]})})}))})}):Object(n.jsx)(gt.a,{style:{margin:"auto",width:"0%",padding:"10px"},type:"BallTriangle",color:"#00BFFF",height:100,width:100})]})]})})):Object(n.jsx)("div",{})},xt=ht.a.div(vt()),yt=Object(b.b)((function(e){return{tasks:e.tasks.logs,user:e.auth.user}}))((function(e){var t=e.tasks,a=e.user,c=Object(r.useState)(!1),s=Object(ze.a)(c,2),i=s[0],l=s[1],o=Object(r.useState)(null),d=Object(ze.a)(o,2),u=d[0],b=d[1],j=Object(r.useState)({value:"voice",label:"Voice"}),m=Object(ze.a)(j,2),p=m[0],h=m[1],O=Object(r.useState)(""),g=Object(ze.a)(O,2),v=g[0],f=g[1],x=Object(r.useState)({value:"viewAll",label:"View All"}),y=Object(ze.a)(x,2),N=y[0],w=y[1],k=("voice"===(null===p||void 0===p?void 0:p.value)?t.filter((function(e){return"transferred"===(null===N||void 0===N?void 0:N.value)?e.reservations.length>1:"direct"===(null===N||void 0===N?void 0:N.value)?e.reservations.length<2:e})):t).filter((function(e){return"task transferred"!==e.reason}));return Object(n.jsxs)("div",{className:"container-fluid",children:[Object(n.jsx)(dt,{data:k,channel:p,setChannel:h,direction:v,setDirection:f,filter:N,setFilter:w}),Object(n.jsx)("br",{}),Object(n.jsx)(Qe,{data:k,openModal:function(){return l(!0)},setTask:b,user:a,channel:p,direction:v,filter:N,tasks:t}),!!u&&!!i&&Object(n.jsx)(ft,{isOpen:i,task:u,onRequestClose:function(){b(null),l(!1)}})]})})),Nt=function(e){var t=e.canPreviousPage,a=e.canNextPage,r=e.pageIndex,c=e.pageOptions,s=e.gotoPage,i=e.pageSize,l=e.previousPage,o=e.nextPage,d=e.pageCount,u=e.setPageSize;return Object(n.jsxs)("div",{className:"pagination",children:[Object(n.jsx)("button",{className:"btn btn-info mx-1 p-1",onClick:function(){return s(0)},disabled:!t,children:Object(n.jsx)(Ee.h,{size:25})}),Object(n.jsx)("button",{className:"btn btn-info mx-1 p-1",onClick:function(){return l()},disabled:!t,children:Object(n.jsx)(Ee.f,{size:25})}),Object(n.jsx)("button",{className:"btn btn-info mx-1 p-1",onClick:function(){return o()},disabled:!a,children:Object(n.jsx)(Ee.g,{size:25})}),Object(n.jsx)("button",{className:"btn btn-info mx-1 p-1",onClick:function(){return s(d-1)},disabled:!a,children:Object(n.jsx)(Ee.i,{size:25})})," ",Object(n.jsxs)("span",{className:"mx-2",style:{alignSelf:"center"},children:["Page"," ",Object(n.jsxs)("strong",{children:[r+1," of ",c.length]})," "]}),Object(n.jsx)("span",{className:"mx-2",style:{alignSelf:"center"},children:"|"}),Object(n.jsxs)("span",{className:"mx-2",style:{alignSelf:"center"},children:["Go to page:"," ",Object(n.jsx)("input",{type:"number",className:"form-control",defaultValue:r+1,onChange:function(e){var t=e.target.value?Number(e.target.value)-1:0;s(t)},style:{width:"70px",display:"inline"}})]})," ",Object(n.jsx)("select",{value:i,className:"form-control",style:{width:"120px",display:"inline"},onChange:function(e){u(Number(e.target.value))},children:[8,16,24,32].map((function(e){return Object(n.jsxs)("option",{value:e,children:["Show ",e]},e)}))})]})},wt=c.a.forwardRef((function(e,t){var a=e.indeterminate,r=(e.showAllWorkers,Object(De.a)(e,["indeterminate","showAllWorkers"])),s=c.a.useRef(),i=t||s;c.a.useEffect((function(){i.current.indeterminate=a}),[i,a]);var l=JSON.parse(localStorage.getItem("showAllWorkers"));return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("input",Object(ce.a)(Object(ce.a)({type:"checkbox",id:"myCheckbox1",ref:i},r),{},{style:{opacity:l&&!0===l?"1":"0"}}))})})),kt=a(132),St=a(226),Ct=function(){return function(){var e=Object(xe.a)(fe.a.mark((function e(t){var a;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:T}),e.next=4,Ne.a.get("/api/twilio/workers");case 4:a=e.sent,t({type:E,payload:a.data.result}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),t({type:D});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},Dt=a(64),Tt=a.n(Dt),Et=Object(b.b)((function(e){return{user:e.auth.user}}),{deleteWorker:function(e){return function(){var t=Object(xe.a)(fe.a.mark((function t(a){var n;return fe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n={method:"delete",url:"/api/twilio/workers/delete/".concat(e),headers:{"Content-Type":"application/json"},data:[]},console.log("executed"),Ne()(n).then((function(t){console.log(JSON.stringify(t.data)),a({type:G,payload:e})})).catch((function(e){console.log(e),alert("Something was wrong, check the logs"),a({type:D})}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.workersData,a=(e.showAllWorkers,e.addToLocal),r=e.setAddToLocal,s=e.setHideAddButton,i=e.openWorkerMonitorModal,l=e.setWorkerActivityID,o=e.deleteWorker,d=e.user,u={},b=JSON.parse(localStorage.getItem("RowID"));null===b||void 0===b||b.forEach((function(e,t){u[e]=!0}));var j=function(e){var t,a,n,r;return{style:{backgroundColor:"Offline"===(null===e||void 0===e||null===(t=e.original)||void 0===t||null===(a=t.statusChangeInfo)||void 0===a?void 0:a.WorkerActivityName)&&Object(St.a)(new Date,new Date(null===e||void 0===e||null===(n=e.original)||void 0===n||null===(r=n.statusChangeInfo)||void 0===r?void 0:r.Timestamp))>=5?"pink":"white"}}},m=c.a.useMemo((function(){return[{Header:"Name",accessor:"friendlyName",Cell:function(e){var t=e.value;return Object(n.jsx)("span",{className:"text-primary",style:{cursor:"pointer"},onClick:function(){i(),l(t)},children:t})}},{Header:"Available",accessor:"available",disableSortBy:!0,Cell:function(e){return e.value?Object(n.jsx)(Ee.v,{size:30,stroke:"#81f562"}):Object(n.jsx)(Ee.u,{size:30,stroke:"#fb3e3e"})}},{Header:"Timeouts",accessor:"timeouts",disableSortBy:!0,Cell:function(e){var t=e.value;return t&&t.length>0?Object(n.jsx)("div",{children:t.length}):Object(n.jsx)("div",{})}},{Header:"Rejections",accessor:"rejections",disableSortBy:!0,Cell:function(e){var t=e.value;return t&&t.length>0?Object(n.jsx)("div",{children:t.length}):Object(n.jsx)("div",{})}},{Header:"Activity",accessor:"activityName",Cell:function(e){var t=e.row.original;return(null===t||void 0===t?void 0:t.statusChangeInfo)?Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{children:["Current: ",t.statusChangeInfo.WorkerActivityName]}),Object(n.jsxs)("div",{children:["Previous:"," ",t.statusChangeInfo.WorkerPreviousActivityName]})]}):Object(n.jsx)("div",{children:t.activityName})}},{Header:"Time in Current Activity",Cell:function(e){var t=e.row.original;return(null===t||void 0===t?void 0:t.statusChangeInfo)?Object(n.jsx)("div",{children:Object(kt.a)(new Date(t.statusChangeInfo.Timestamp))}):Object(n.jsx)("div",{})}},{Header:"Call Status",accessor:"lastCall",disableSortBy:!0,Cell:function(e){var t=e.row.original;return(null===t||void 0===t?void 0:t.lastCall)?Object(n.jsxs)("div",{className:"alert alert-dismissible alert-danger",style:{width:"fit-content"},children:[Object(n.jsx)("div",{children:"Last Call:"}),Object(n.jsx)("div",{children:Object(kt.a)(new Date(t.lastCall.Timestamp))})]}):(null===t||void 0===t?void 0:t.currentCall)?Object(n.jsxs)("div",{className:"alert alert-dismissible alert-success",style:{width:"fit-content"},children:[Object(n.jsx)("div",{children:"Current Call:"}),Object(n.jsx)("div",{children:Object(kt.a)(new Date(t.currentCall.Timestamp))})]}):Object(n.jsx)("div",{})}},{Header:"",accessor:"sid",disableSortBy:!0,Cell:function(e){var t=e.value;return"admin"===d.role?Object(n.jsx)("div",{children:Object(n.jsx)(Ee.z,{size:25,color:"red",style:{alignSelf:"center",cursor:"pointer"},onClick:function(){Tt.a.fire({title:"Are you sure?",text:"You will not be able to recover this DATA!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete WORKER DATA",cancelButtonText:"No, sorry..my bad"}).then((function(e){e.value?(o(t),Tt.a.fire("Deleted!","Worker data deleted from Twillio and Mongo!","success")):e.dismiss===Tt.a.DismissReason.cancel&&Tt.a.fire("Cancelled","All good now! But You almost deleted a Worker! :)","error")}))}})}):Object(n.jsx)("div",{})}}]}),[d]),p=Object(Le.useTable)({columns:m,data:t,autoResetSelectedRows:!1,getTrProps:j,initialState:{selectedRowIds:u,sortBy:[{id:"activityName",desc:!1}],pageSize:8},disableSortRemove:!0},Le.useSortBy,Le.usePagination,Le.useRowSelect,(function(e){e.visibleColumns.push((function(e){return[{id:"selection",Header:function(e){e.getToggleAllRowsSelectedProps;return Object(n.jsx)("div",{})},Cell:function(e){var t=e.row;return Object(n.jsx)("div",{children:Object(n.jsx)(wt,Object(ce.a)({},t.getToggleRowSelectedProps()))})}}].concat(Object(h.a)(e))}))})),O=p.getTableProps,g=p.getTableBodyProps,v=p.headerGroups,f=p.prepareRow,x=p.page,y=p.canPreviousPage,N=p.canNextPage,w=p.pageOptions,k=p.pageCount,S=p.gotoPage,C=p.nextPage,D=p.previousPage,T=p.setPageSize,E=p.selectedFlatRows,P=p.state,A=P.pageIndex,R=P.pageSize;if(E.length>0?s(!0):s(!1),!0===a&&E.length>0){var I=[],L=[];E.forEach((function(e){I.push(e.original._id);var t=e.id;L.push(t)})),(null===I||void 0===I?void 0:I.length)>=0&&(localStorage.setItem("workerID",JSON.stringify(I)),localStorage.setItem("RowID",JSON.stringify(L))),r(!1)}return k>0?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("table",Object(ce.a)(Object(ce.a)({},O()),{},{className:"table table-hover",children:[Object(n.jsx)("thead",{className:"bg-dark text-white",children:v.map((function(e){return Object(n.jsx)("tr",Object(ce.a)(Object(ce.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(n.jsxs)("th",Object(ce.a)(Object(ce.a)({},e.getHeaderProps(e.getSortByToggleProps())),{},{children:[e.render("Header"),Object(n.jsx)("span",{children:e.isSorted?e.isSortedDesc?" \ud83d\udd3b":" \ud83d\udd3a":""})]}))}))}))}))}),Object(n.jsx)("tbody",Object(ce.a)(Object(ce.a)({},g()),{},{children:x.map((function(e,t){return f(e),Object(n.jsx)("tr",Object(ce.a)(Object(ce.a)({},e.getRowProps(j(e))),{},{children:e.cells.map((function(e){return Object(n.jsx)("td",Object(ce.a)(Object(ce.a)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))}))]})),k>1&&Object(n.jsx)("div",{className:"d-flex justify-content-center",children:Object(n.jsx)(Nt,{canPreviousPage:y,canNextPage:N,pageIndex:A,pageOptions:w,gotoPage:S,pageSize:R,previousPage:D,nextPage:C,pageCount:k,setPageSize:T})}),Object(n.jsx)("br",{})]}):Object(n.jsx)("div",{className:"text-center p-3",children:Object(n.jsx)("h3",{className:"text-secondary",children:"No content with this filters..."})})})),Pt=a(75),At=a(100),Rt=a.n(At),It=function(e){return function(){var t=Object(xe.a)(fe.a.mark((function t(a){var n;return fe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:B}),t.next=4,Ne.a.get("/api/workerActivityEvent/".concat(e));case 4:n=t.sent,a({type:W,payload:n.data}),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0),a({type:D});case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},Lt=Object(b.b)((function(e){return{loading:e.workers.loading,workerActivityEvent:e.workerActivityEvent.logs}}),{getWorkers:Ct,getWorkersEvents:It})((function(e){var t=e.loading,a=e.getWorkers,c=e.showAllWorkers,s=e.setShowAllWorkers,i=e.setAddToLocal,l=e.hideAddButton,o=e.getWorkersEvents,d=e.openActivityExportModal;return Object(r.useEffect)((function(){a(),o()}),[a]),Object(n.jsx)("div",{className:"row",children:Object(n.jsx)("div",{className:"col-md-12 col-lg-2 col-xl-1",children:t?Object(n.jsx)("div",{style:{padding:"5px",marginRight:"25px",paddingBottom:"0"},children:Object(n.jsx)(tt.a,{size:25})}):Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{style:{display:"flex",backgroundColor:"transparent"},children:[c?Object(n.jsx)("button",{style:{marginRight:"2rem",padding:".3rem .5rem"},className:"btn btn-info",onClick:function(){return s(!1)},s:!0,children:Object(n.jsx)(Pt.d,{fill:"#81f562",stroke:"#81f562",size:25})}):Object(n.jsx)("button",{style:{marginRight:"2rem",padding:".3rem .5rem"},className:"btn btn-info",onClick:function(){return s(!0)},children:Object(n.jsx)(Pt.c,{fill:"#ff0000",stroke:"red",size:25})}),!0===l?Object(n.jsx)("button",{style:{marginRight:"2rem",padding:".3rem .5rem"},className:"btn btn-info",onClick:function(){i(!0),Rt.a.alert({type:1,text:"Workers added",stay:!1,time:2,position:"top"})},children:Object(n.jsx)(Pt.a,{size:25})}):Object(n.jsx)("div",{}),Object(n.jsx)("button",{style:{display:"block",padding:".3rem .5rem"},className:"btn btn-info",onClick:function(){return d()},children:Object(n.jsx)(Ee.l,{size:25})})]})})})})})),Mt=a(90),Ht=(a(375),a(376),function(e){var t=Object.values(e).flat();return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(Mt.VerticalTimeline,{children:null===t||void 0===t?void 0:t.map((function(e){return Object(n.jsxs)(n.Fragment,{children:["Available"===e.WorkerActivityName&&Object(n.jsxs)(Mt.VerticalTimelineElement,{className:"vertical-timeline-element--work",contentStyle:{background:"#000000",color:"#fff"},contentArrowStyle:{borderRight:"7px solid  rgb(0, 0, 0)"},date:"2011 - present",iconStyle:{background:"#000000",color:"#72fd00"},icon:Object(n.jsx)(Ee.j,{fill:"green"}),children:[Object(n.jsx)("h3",{className:"vertical-timeline-element-title",children:e.WorkerActivityName}),Object(n.jsxs)("h5",{className:"vertical-timeline-element-subtitle",children:["At: ",Object(We.default)(new Date(null===e||void 0===e?void 0:e.createdAt),"h:mm")]}),Object(n.jsx)("p",{children:e.EventDescription})]}),"Break"===e.WorkerActivityName&&Object(n.jsxs)(Mt.VerticalTimelineElement,{className:"vertical-timeline-element--work",contentStyle:{background:"#000000",color:"#fff"},contentArrowStyle:{borderRight:"7px solid  rgb(0, 0, 0)"},date:"2011 - present",iconStyle:{background:"#000000",color:"yellow"},icon:Object(n.jsx)(Ee.r,{fill:"orange"}),children:[Object(n.jsx)("h3",{className:"vertical-timeline-element-title",children:e.WorkerActivityName}),Object(n.jsxs)("h5",{className:"vertical-timeline-element-subtitle",children:["At: ",Object(We.default)(new Date(null===e||void 0===e?void 0:e.createdAt),"h:mm")]}),Object(n.jsx)("p",{children:e.EventDescription})]}),"Unavailable"===e.WorkerActivityName&&Object(n.jsxs)(Mt.VerticalTimelineElement,{className:"vertical-timeline-element--work",contentStyle:{background:"#000000",color:"#fff"},contentArrowStyle:{borderRight:"7px solid  rgb(0, 0, 0)"},date:"2011 - present",iconStyle:{background:"#000000",color:"#ffc0cb"},icon:Object(n.jsx)(Ee.q,{fill:"red"}),children:[Object(n.jsx)("h3",{className:"vertical-timeline-element-title",children:e.WorkerActivityName}),Object(n.jsxs)("h5",{className:"vertical-timeline-element-subtitle",children:["At: ",Object(We.default)(new Date(null===e||void 0===e?void 0:e.createdAt),"h:mm")]}),Object(n.jsx)("p",{children:e.EventDescription})]}),"Offline"===e.WorkerActivityName&&Object(n.jsxs)(Mt.VerticalTimelineElement,{className:"vertical-timeline-element--work",contentStyle:{background:"#000000",color:"#fff"},contentArrowStyle:{borderRight:"7px solid  rgb(0, 0, 0)"},date:"2011 - present",iconStyle:{background:"#000000",color:"gray"},icon:Object(n.jsx)(Ee.q,{fill:"#3b3b3b"}),children:[Object(n.jsx)("h3",{className:"vertical-timeline-element-title",children:e.WorkerActivityName}),Object(n.jsxs)("h5",{className:"vertical-timeline-element-subtitle",children:["At: ",Object(We.default)(new Date(null===e||void 0===e?void 0:e.createdAt),"h:mm")]}),Object(n.jsx)("p",{children:e.EventDescription})]})]})}))})})}),_t=Object(b.b)((function(e){return{workerActivityEvent:e.workerActivityEvent.logs}}),{getWorkersEvents:It})((function(e){var t=e.isOpen,a=e.workerActivityID,c=e.getWorkersEvents,s=e.workerActivityEvent;if(Object(r.useEffect)((function(){c(a)}),[a]),a)return Object(n.jsxs)(mt.a,Object(ce.a)(Object(ce.a)({isOpen:t},e),{},{style:{content:{overflow:"auto"},overlay:{background:"rgb(105 105 105 / 75%)"}},ariaHideApp:!1,contentLabel:"Worker Activity Detail",children:[Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{style:{color:"#033c73"},children:a}),Object(n.jsx)("h2",{children:"Today's Activity Timeline "})]}),Object(n.jsx)("hr",{color:"black"}),Object(n.jsx)(Ht,{workerActivityEvent:s})]}))})),zt=a(151),Ft=a(96),Wt=a(82),Bt=function(e){var t=e.isOpen,a=e.onRequestClose,c=Object(r.useState)(""),s=Object(ze.a)(c,2),i=s[0],l=s[1],o=Object(r.useState)(!1),d=Object(ze.a)(o,2),u=d[0],b=d[1],j=Object(r.useState)(new Date),m=Object(ze.a)(j,2),p=m[0],h=m[1],O=Object(r.useState)(Object(zt.default)((new Date).setHours(0,0,0,0),30)),g=Object(ze.a)(O,2),v=g[0],f=g[1],x=function(){var e=Object(xe.a)(fe.a.mark((function e(t){var n,r;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),Object(Ft.default)(p,v)||Object(Wt.default)(v,p)?l("Please fix dates!"):(b(!0),l("Wait a moment please..Preparing files..."),n=JSON.stringify({startDate:p,endDate:v}),r={method:"post",url:"/api/workerActivityEvent",headers:{"Content-Type":"application/json"},data:n},Ne()(r).then((function(e){var t=e.data.map((function(e){return{Worker:e.WorkerName,WorkerActivity:e.WorkerActivityName,PreviousActivity:e.WorkerPreviousActivityName,createdDate:st()(e.createdAt).format("L"),createdTime:st()(e.createdAt).format("LTS"),Description:e.EventDescription}})),n=rt.a.utils.json_to_sheet(t),r=rt.a.utils.book_new();rt.a.utils.book_append_sheet(r,n,"WorkersActivities"),rt.a.writeFile(r,"WorkersMonthlyData.xlsx"),a()})).catch((function(e){l(e.reason),setInterval((function(){l("")}),5e3),console.log(e)})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsxs)(mt.a,Object(ce.a)(Object(ce.a)({isOpen:t},e),{},{style:{content:{backgroundColor:"#02325f",overflow:"auto",height:"40%",width:"40%",borderRadius:"1rem",margin:"auto",padding:"auto"},overlay:{background:"rgb(105 105 105 / 75%)"}},ariaHideApp:!1,contentLabel:"All activities Detail",children:[Object(n.jsx)("div",{children:Object(n.jsx)("h1",{style:{textAlign:"center",color:"white"},children:"Download Workers Data"})}),Object(n.jsx)("div",{style:{backgroundColor:"white",overflow:"auto",margin:"1rem",borderRadius:"1rem",borderColor:"red",height:"22rem"},children:Object(n.jsxs)("form",{onSubmit:x,className:"RootContainer",style:{display:"flex",marginTop:"1rem",justifyContent:"center",flexDirection:"column",backgroundColor:"transparent"},children:[Object(n.jsx)("h3",{style:{color:"#033c73",alignSelf:"center",paddingTop:"0.5rem"},children:"Select the Date Range:"}),Object(n.jsxs)("div",{style:{display:"flex",justifyContent:"center",backgroundColor:"transparent"},children:[Object(n.jsx)("br",{}),Object(n.jsxs)("div",{style:{padding:"auto"},children:[Object(n.jsx)("label",{style:{paddingRight:"10px"},htmlFor:"startDate",children:"From:"}),Object(n.jsx)(Ze.a,{id:"startDate",style:{marginTop:"2rem",padding:"auto",alignSelf:"center"},minDate:Object(zt.default)(new Date,30),maxDate:new Date,selected:p,onChange:function(e){h(e),l("")},dateFormat:"MMMM d, yyyy h:mm aa ",showTimeSelect:!0,timeFormat:"hh:mm a",timeIntervals:30,timeCaption:"time",className:"form-control"})]}),Object(n.jsxs)("div",{children:[Object(n.jsx)("label",{style:{marginLeft:"3rem",paddingRight:"10px"},htmlFor:"endDate",children:"To:"}),Object(n.jsx)(Ze.a,{id:"endDate",style:{marginTop:"2rem",alignSelf:"center"},minDate:Object(zt.default)(new Date,30),maxDate:new Date,selected:v,onChange:function(e){f(e),l("")},dateFormat:"MMMM d, yyyy h:mm aa ",showTimeSelect:!0,timeFormat:"hh:mm a",timeIntervals:30,timeCaption:"time",className:"form-control"})]})]}),Object(n.jsx)("button",{disabled:u,type:"submit",style:{fontSize:"1.5rem",alignSelf:"center",margin:"4rem auto auto auto",padding:"0.3rem",width:"30%",backgroundColor:u?"gray":"#02325f",borderRadius:"10px",color:"white"},children:"Download"}),Object(n.jsx)("p",{style:{margin:"1rem auto auto auto"},children:Object(n.jsx)("p",{className:"text-danger",children:i})})]})})]}))},Gt=Object(b.b)((function(e){return{workers:e.workers.logs}}),{getWorkers:Ct})((function(e){var t=e.workers,a=e.getWorkers,c=Object(r.useState)(!0),s=Object(ze.a)(c,2),i=s[0],l=s[1],o=Object(r.useState)(!1),d=Object(ze.a)(o,2),b=d[0],j=d[1],m=Object(r.useState)(!1),p=Object(ze.a)(m,2),h=p[0],O=p[1],g=Object(r.useState)(!1),v=Object(ze.a)(g,2),f=v[0],x=v[1],y=Object(r.useState)(!1),N=Object(ze.a)(y,2),w=N[0],k=N[1],S=Object(r.useState)(JSON.parse(localStorage.getItem("workerID"))),C=Object(ze.a)(S,2),D=C[0],T=C[1],E=Object(r.useState)(null),P=Object(ze.a)(E,2),A=P[0],R=P[1];return u.on("workerEvent",(function(e){a()})),Object(r.useEffect)((function(){localStorage.setItem("showAllWorkers",JSON.stringify(i)),T(!1===h?JSON.parse(localStorage.getItem("workerID")):null)}),[i]),Object(n.jsxs)("div",{className:"container-fluid",children:[Object(n.jsx)(Lt,{showAllWorkers:i,setShowAllWorkers:l,setAddToLocal:O,hideAddButton:b,openActivityExportModal:function(){return k(!0)}}),Object(n.jsx)("br",{}),!!f&&!!A&&Object(n.jsx)(_t,{isOpen:f,workerActivityID:A,onRequestClose:function(){x(!1),R(null)}}),Object(n.jsx)("br",{}),!!w&&Object(n.jsx)(Bt,{isOpen:w,onRequestClose:function(){k(!1)}}),Object(n.jsx)(Et,{openWorkerMonitorModal:function(){return x(!0)},setWorkerActivityID:R,setAddToLocal:O,addToLocal:h,showAllWorkers:i,setHideAddButton:j,hideAddButton:b,workersData:!i&&(null===D||void 0===D?void 0:D.length)>0?t.filter((function(e){for(var t,a=0;D.length>a;a++)e._id===D[a]&&(t=!0);if(t)return e})):t})]})})),Ut=function(e){var t=e.canPreviousPage,a=e.canNextPage,r=e.pageIndex,c=e.pageOptions,s=e.gotoPage,i=e.pageSize,l=e.previousPage,o=e.nextPage,d=e.pageCount,u=e.setPageSize;return Object(n.jsxs)("div",{className:"pagination",children:[Object(n.jsx)("button",{className:"btn btn-info mx-1 p-1",onClick:function(){return s(0)},disabled:!t,children:Object(n.jsx)(Ee.h,{size:25})}),Object(n.jsx)("button",{className:"btn btn-info mx-1 p-1",onClick:function(){return l()},disabled:!t,children:Object(n.jsx)(Ee.f,{size:25})}),Object(n.jsx)("button",{className:"btn btn-info mx-1 p-1",onClick:function(){return o()},disabled:!a,children:Object(n.jsx)(Ee.g,{size:25})}),Object(n.jsx)("button",{className:"btn btn-info mx-1 p-1",onClick:function(){return s(d-1)},disabled:!a,children:Object(n.jsx)(Ee.i,{size:25})})," ",Object(n.jsxs)("span",{className:"mx-2",style:{alignSelf:"center"},children:["Page"," ",Object(n.jsxs)("strong",{children:[r+1," of ",c.length]})," "]}),Object(n.jsx)("span",{className:"mx-2",style:{alignSelf:"center"},children:"|"}),Object(n.jsxs)("span",{className:"mx-2",style:{alignSelf:"center"},children:["Go to page:"," ",Object(n.jsx)("input",{type:"number",className:"form-control",defaultValue:r+1,onChange:function(e){var t=e.target.value?Number(e.target.value)-1:0;s(t)},style:{width:"70px",display:"inline"}})]})," ",Object(n.jsx)("select",{value:i,className:"form-control",style:{width:"120px",display:"inline"},onChange:function(e){u(Number(e.target.value))},children:[10,20,30,40].map((function(e){return Object(n.jsxs)("option",{value:e,children:["Show ",e]},e)}))})]})},Vt=function(e){var t=e.data,a=function(){if(t&&t.workSummary&&t.workSummary.length>0){var e,a=null===t||void 0===t||null===(e=t.workSummary[0])||void 0===e?void 0:e.activity_durations;return a?a.map((function(e,t){return{Header:e.friendly_name,accessor:"activity_durations[".concat(t,"].total"),Cell:function(e){var t=e.value;return"".concat(Math.floor(t/3600),":").concat(Math.floor(t/3600%1*60))}}})):[]}},r=c.a.useMemo((function(){return[{Header:"Name",accessor:"friendlyName"},{Header:"Reservations",columns:[{Header:"Created",accessor:"reservations_created"},{Header:"Accepted",accessor:"reservations_accepted"},{Header:"Rejected",accessor:"reservations_rejected"},{Header:"TimedOut",accessor:"reservations_timed_out"},{Header:"Canceled",accessor:"reservations_canceled"},{Header:"Completed",accessor:"reservations_completed"}]},{Header:"Activity Durations (hh:mm)",columns:a()}]}),[]),s=Object(Le.useTable)({columns:r,data:t.workSummary},Le.useSortBy,Le.usePagination),i=s.getTableProps,l=s.getTableBodyProps,o=s.headerGroups,d=s.prepareRow,u=s.page,b=s.canPreviousPage,j=s.canNextPage,m=s.pageOptions,p=s.pageCount,h=s.gotoPage,O=s.nextPage,g=s.previousPage,v=s.setPageSize,f=s.state,x=f.pageIndex,y=f.pageSize;return p>0?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("table",Object(ce.a)(Object(ce.a)({},i()),{},{className:"table table-hover",children:[Object(n.jsx)("thead",{className:"bg-dark text-white",children:o.map((function(e){return Object(n.jsx)("tr",Object(ce.a)(Object(ce.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(n.jsxs)("th",Object(ce.a)(Object(ce.a)({},e.getHeaderProps(e.getSortByToggleProps())),{},{children:[e.render("Header"),Object(n.jsx)("span",{children:e.isSorted?e.isSortedDesc?" \ud83d\udd3b":" \ud83d\udd3a":""})]}))}))}))}))}),Object(n.jsx)("tbody",Object(ce.a)(Object(ce.a)({},l()),{},{children:u.map((function(e,t){return d(e),Object(n.jsx)("tr",Object(ce.a)(Object(ce.a)({},e.getRowProps()),{},{children:e.cells.map((function(e){return Object(n.jsx)("td",Object(ce.a)(Object(ce.a)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))}))]})),p>1&&Object(n.jsx)("div",{className:"d-flex justify-content-center",children:Object(n.jsx)(Ut,{canPreviousPage:b,canNextPage:j,pageIndex:x,pageOptions:m,gotoPage:h,pageSize:y,previousPage:g,nextPage:O,pageCount:p,setPageSize:v})}),Object(n.jsx)("br",{})]}):Object(n.jsx)("div",{className:"text-center p-3",children:Object(n.jsx)("h3",{className:"text-secondary",children:"No content with this filters..."})})},qt=a(51),Jt=Object(b.b)((function(e){return{loading:e.workSummary.loading}}),{getWorkSummary:function(e){return function(){var t=Object(xe.a)(fe.a.mark((function t(a){var n,r;return fe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n={headers:{"Content-Type":"application/json"}},a({type:T}),t.next=5,Ne.a.post("/api/twilio/workSummary",e,n);case 5:r=t.sent,a({type:A,payload:{total:r.data.total,logs:r.data.logs}}),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0),a({type:D});case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.loading,a=e.getWorkSummary,c=e.data,s=function(){var e=Object(xe.a)(fe.a.mark((function e(){var t,a,n;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=c.workSummary.map((function(e){return{Name:e.friendlyName,Created:e.reservations_created,Accepted:e.reservations_accepted,Rejected:e.reservations_rejected,TimedOut:e.reservations_timed_out,Canceled:e.reservations_canceled,Completed:e.reservations_completed,Available:e.activity_durations.total}})),a=rt.a.utils.json_to_sheet(t),n=rt.a.utils.book_new(),rt.a.utils.book_append_sheet(n,a,"Lista"),rt.a.writeFile(n,"Data importada.xlsx");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=Object(r.useState)(Object(at.default)(Object(zt.default)(new Date,1))),l=Object(ze.a)(i,2),o=l[0],d=l[1],u=Object(r.useState)(Object(qt.default)(new Date)),b=Object(ze.a)(u,2),j=b[0],m=b[1];return Object(r.useEffect)((function(){a({startDate:o,endDate:j})}),[a]),Object(n.jsxs)("div",{className:"d-flex",style:{justifyContent:"end"},children:[Object(n.jsxs)("div",{style:{whiteSpace:"nowrap"},children:[Object(n.jsx)("span",{style:{marginRight:"10px"},children:"From :"}),Object(n.jsx)(Ze.a,{selected:o,onChange:function(e){return d(e)},dateFormat:"MMMM d, yyyy",className:"form-control"})]}),Object(n.jsxs)("div",{style:{marginLeft:"2rem",marginRight:"2rem",whiteSpace:"nowrap"},children:[Object(n.jsx)("span",{style:{marginRight:"10px"},children:"To :"}),Object(n.jsx)(Ze.a,{selected:j,style:{width:"100%"},onChange:function(e){return m(e)},dateFormat:"MMMM d, yyyy",className:"form-control"})]}),t?Object(n.jsx)("div",{style:{padding:"5px",marginRight:"25px",paddingBottom:"0"},children:Object(n.jsx)(tt.a,{size:25})}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("button",{style:{marginRight:"2rem",padding:".3rem .5rem"},className:"btn btn-info",onClick:function(){return a({startDate:o,endDate:j})},children:Object(n.jsx)(Ee.g,{size:25})}),Object(n.jsx)("button",{style:{marginRight:"2rem 2rem 2rem 0.1rem",padding:".3rem .5rem"},className:"btn btn-info",onClick:function(){return s()},children:Object(n.jsx)(Ee.l,{size:25})})]})]})})),Qt=function(e){var t=e.data,a=t.cumulative,r=a.reservations_created,c=a.reservations_accepted,s=a.reservations_rejected,i=a.reservations_timed_out,l=a.reservations_canceled,o=a.reservations_completed,d=a.activity_durations,u=t.realtime,b=u.total_workers,j=u.activity_statistics;return Object(n.jsxs)("div",{className:"row",children:[Object(n.jsxs)("div",{className:"col-md-4",children:[Object(n.jsx)("h5",{className:"text-info",children:"Reservations Total"}),Object(n.jsxs)("ul",{className:"list-group",children:[(0===r||r)&&Object(n.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:["Created",Object(n.jsx)("span",{className:"badge badge-primary badge-pill",children:r})]}),(0===c||c)&&Object(n.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:["Accepted",Object(n.jsx)("span",{className:"badge badge-primary badge-pill",children:c})]}),(0===s||s)&&Object(n.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:["Rejected",Object(n.jsx)("span",{className:"badge badge-primary badge-pill",children:s})]}),(0===i||i)&&Object(n.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:["Timed Out",Object(n.jsx)("span",{className:"badge badge-primary badge-pill",children:i})]}),(0===l||l)&&Object(n.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:["Canceled",Object(n.jsx)("span",{className:"badge badge-primary badge-pill",children:l})]}),(0===o||o)&&Object(n.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:["Completed",Object(n.jsx)("span",{className:"badge badge-primary badge-pill",children:o})]})]})]}),b&&j&&Object(n.jsxs)("div",{className:"col-md-4",children:[Object(n.jsx)("h5",{className:"text-info",children:"Current Activities"}),Object(n.jsxs)("ul",{className:"list-group",children:[j.map((function(e){return Object(n.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[e.friendly_name,Object(n.jsx)("span",{className:"badge badge-primary badge-pill",children:e.workers})]})})),Object(n.jsx)("br",{}),Object(n.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:["Total",Object(n.jsx)("span",{className:"badge badge-primary badge-pill",children:b})]})]})]}),d&&d.length>0&&Object(n.jsxs)("div",{className:"col-md-4",children:[Object(n.jsx)("h5",{className:"text-info",children:"Activity Average"}),Object(n.jsx)("ul",{className:"list-group",children:d.map((function(e){return Object(n.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[e.friendly_name,Object(n.jsx)("span",{className:"badge badge-primary badge-pill",children:Math.round(e.avg/60)>1?Math.round(e.avg/60)+" min":Math.round(e.avg/60%1*60)+" seg"})]})}))})]})]})},Yt=Object(b.b)((function(e){return{workSummary:e.workSummary.logs,total:e.workSummary.total,loading:e.workSummary.loading}}))((function(e){var t=e.workSummary,a=e.total,r=e.loading;return Object(n.jsxs)("div",{className:"container-fluid",children:[Object(n.jsx)(Jt,{data:{workSummary:t,total:a}}),Object(n.jsx)("br",{}),!r&&Object(n.jsx)(Vt,{data:{workSummary:t,total:a}}),!r&&Object(n.jsx)(Qt,{data:a})]})})),Kt=function(e){var t=e.order,a=e.editMode,r=e.setEditItem,c=e.setEditModalOpen,s=e.item;return Object(n.jsxs)("div",{className:"card border-primary mb-3",style:{maxWidth:"20rem"},onClick:function(){a&&(r(s),c(!0))},children:[Object(n.jsxs)("div",{className:"card-header",children:[t,") ",Object(n.jsx)("span",{className:"float-right",children:s._id})]}),Object(n.jsx)("div",{className:"card-body",children:Object(n.jsxs)("h4",{className:"card-title mb-4",children:["Counter :"," ",Object(n.jsx)("button",{type:"button",className:"btn btn-secondary float-right",children:s.count})]})})]})},Xt=a(227),Zt=a.n(Xt),$t=a(429),ea=function(e){var t=e.isOpen,a=e.onRequestClose,c=e.editNumber,s=e.editItem,i=e.removeNumber,l=Object(r.useState)(s._id||""),o=Object(ze.a)(l,2),d=o[0],u=o[1],b=Object(r.useState)(Object($t.a)(d.toString(),"US")),j=Object(ze.a)(b,2),m=j[0],p=j[1],h=Object(r.useState)(s.order||""),O=Object(ze.a)(h,2),g=O[0],v=O[1],f=Object(r.useState)(0===s.count||s.count?s.count:""),x=Object(ze.a)(f,2),y=x[0],N=x[1],w=Object(r.useState)(1),k=Object(ze.a)(w,2),S=k[0],C=k[1],D=Object(r.useState)(1),T=Object(ze.a)(D,2),E=T[0],P=T[1],A=Object(r.useState)(1),R=Object(ze.a)(A,2),I=R[0],L=R[1],M=Object(r.useState)(""),H=Object(ze.a)(M,2),_=H[0],z=H[1],F=Object(r.useState)(s.available&&!0),W=Object(ze.a)(F,2),B=W[0],G=W[1],U=s._id||"";return Object(n.jsx)(mt.a,Object(ce.a)(Object(ce.a)({isOpen:t},e),{},{style:{content:{overflow:"visible",position:"relative",margin:"20% auto",width:"400px"},overlay:{background:"rgb(105 105 105 / 75%)"}},ariaHideApp:!1,contentLabel:"Call Detail",children:Object(n.jsxs)("div",{style:{display:"flex",padding:"20px 30px",justifyContent:"center",flexDirection:"column"},children:[Object(n.jsx)("h2",{className:"text-info",children:"Edit"}),Object(n.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""===d||""===g||""===y?z("Please complete all the fields!"):3===E||3===S||3===I?z("Please fix incorrect inputs!"):(c({originalNumber:U,number:m.nationalNumber||m.number,order:g,available:B,count:y}),a())},children:[Object(n.jsxs)("div",{className:"form-group ".concat(2===E?"has-success":""," ").concat(3===E?"has-danger":""),children:[Object(n.jsx)("label",{className:"col-form-label font-weight-bold",htmlFor:"inputLarge1",children:"Number"}),Object(n.jsx)("input",{className:"form-control form-control-lg ".concat(2===E?"is-valid":""," ").concat(3===E?"is-invalid":""),type:"text",value:d,onChange:function(e){return u(e.target.value)},onBlur:function(){var e=Object($t.a)(d,"US");p(e),e&&e.isValid()?P(2):P(3)},id:"inputLarge1",disabled:!0}),3===E&&Object(n.jsx)("div",{className:"invalid-feedback",children:"Sorry, Wrong Number format!"})]}),Object(n.jsxs)("div",{className:"form-group ".concat(2===S?"has-success":""," ").concat(3===S?"has-danger":""),children:[Object(n.jsx)("label",{className:"col-form-label font-weight-bold",htmlFor:"inputLarge2",children:"Order"}),Object(n.jsx)("input",{className:"form-control form-control-lg ".concat(2===S?"is-valid":""," ").concat(3===S?"is-invalid":""),type:"text",value:g,onChange:function(e){return v(e.target.value)},onBlur:function(){g&&!isNaN(g)?C(2):C(3)},id:"inputLarge2"}),3===S&&Object(n.jsx)("div",{className:"invalid-feedback",children:"Sorry, Wrong format!"})]}),Object(n.jsxs)("div",{className:"form-group ".concat(2===I?"has-success":""," ").concat(3===I?"has-danger":""),children:[Object(n.jsx)("label",{className:"col-form-label font-weight-bold",htmlFor:"inputLarge2",children:"Count"}),Object(n.jsx)("input",{className:"form-control form-control-lg ".concat(2===I?"is-valid":""," ").concat(3===I?"is-invalid":""),type:"text",value:y,onChange:function(e){return N(e.target.value)},onBlur:function(){y&&!isNaN(y)?L(2):L(3)},id:"inputLarge2"}),3===I&&Object(n.jsx)("div",{className:"invalid-feedback",children:"Sorry, Wrong format!"})]}),Object(n.jsx)("div",{children:Object(n.jsx)("div",{className:"form-group",children:Object(n.jsxs)("div",{className:"custom-control custom-checkbox",children:[Object(n.jsx)("input",{type:"checkbox",className:"custom-control-input",id:"customCheck1",onChange:function(e){return G(!B)},checked:B}),Object(n.jsx)("label",{className:"custom-control-label",htmlFor:"customCheck1",children:"Available"})]})})}),Object(n.jsx)("button",{type:"submit",className:"btn btn-success mb-2",style:{width:"100%"},children:"Send"}),Object(n.jsx)("button",{type:"button",onClick:function(){i(s._id),a()},className:"btn btn-danger",style:{width:"100%"},children:"Delete"}),Object(n.jsx)("small",{style:{color:"#e51c23"},children:_}),Object(n.jsx)("br",{})]})]})}))},ta=function(e){var t=e.isOpen,a=e.onRequestClose,c=e.addNumber,s=Object(r.useState)(""),i=Object(ze.a)(s,2),l=i[0],o=i[1],d=Object(r.useState)(null),u=Object(ze.a)(d,2),b=u[0],j=u[1],m=Object(r.useState)(""),p=Object(ze.a)(m,2),h=p[0],O=p[1],g=Object(r.useState)(1),v=Object(ze.a)(g,2),f=v[0],x=v[1],y=Object(r.useState)(1),N=Object(ze.a)(y,2),w=N[0],k=N[1],S=Object(r.useState)(""),C=Object(ze.a)(S,2),D=C[0],T=C[1],E=Object(r.useState)(!0),P=Object(ze.a)(E,2),A=P[0],R=P[1];return Object(n.jsx)(mt.a,Object(ce.a)(Object(ce.a)({isOpen:t},e),{},{style:{content:{overflow:"visible",position:"relative",margin:"20% auto",width:"400px"},overlay:{background:"rgb(105 105 105 / 75%)"}},ariaHideApp:!1,contentLabel:"Call Detail",children:Object(n.jsxs)("div",{style:{display:"flex",padding:"20px 30px",justifyContent:"center",flexDirection:"column"},children:[Object(n.jsx)("h2",{className:"text-info",children:"Add"}),Object(n.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""===l||""===h?T("Please complete all the fields!"):3===w||3===f?T("Please fix incorrect inputs!"):(c({number:b.nationalNumber||b.number,order:h,available:A}),a())},children:[Object(n.jsxs)("div",{className:"form-group ".concat(2===w?"has-success":""," ").concat(3===w?"has-danger":""),children:[Object(n.jsx)("label",{className:"col-form-label font-weight-bold",htmlFor:"inputLarge1",children:"Number"}),Object(n.jsx)("input",{className:"form-control form-control-lg ".concat(2===w?"is-valid":""," ").concat(3===w?"is-invalid":""),type:"text",value:l,onChange:function(e){return o(e.target.value)},onBlur:function(){var e=Object($t.a)(l,"US");j(e),e&&e.isValid()?k(2):k(3)},id:"inputLarge1"}),3===w&&Object(n.jsx)("div",{className:"invalid-feedback",children:"Sorry, Wrong Number format!"})]}),Object(n.jsxs)("div",{className:"form-group ".concat(2===f?"has-success":""," ").concat(3===f?"has-danger":""),children:[Object(n.jsx)("label",{className:"col-form-label font-weight-bold",htmlFor:"inputLarge2",children:"Order"}),Object(n.jsx)("input",{className:"form-control form-control-lg ".concat(2===f?"is-valid":""," ").concat(3===f?"is-invalid":""),type:"text",value:h,onChange:function(e){return O(e.target.value)},onBlur:function(){h&&!isNaN(h)?x(2):x(3)},id:"inputLarge2"}),3===f&&Object(n.jsx)("div",{className:"invalid-feedback",children:"Sorry, Wrong format!"})]}),Object(n.jsx)("div",{children:Object(n.jsx)("div",{className:"form-group",children:Object(n.jsxs)("div",{className:"custom-control custom-checkbox",children:[Object(n.jsx)("input",{type:"checkbox",className:"custom-control-input",id:"customCheck1",onChange:function(e){return R(!A)},checked:A}),Object(n.jsx)("label",{className:"custom-control-label",htmlFor:"customCheck1",children:"Available"})]})})}),Object(n.jsx)("button",{type:"submit",className:"btn btn-success",style:{width:"100%"},children:"Send"}),Object(n.jsx)("small",{style:{color:"#e51c23"},children:D}),Object(n.jsx)("br",{})]})]})}))},aa=Object(b.b)((function(e){return{user:e.auth.user,loading:e.auth.loading,logs:e.numbers.logs}}),{getNumbers:function(e){return function(){var e=Object(xe.a)(fe.a.mark((function e(t){var a;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:T}),e.next=4,Ne.a.get("/api/numbersPool/getAll");case 4:a=e.sent,t({type:R,payload:a.data.result}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),t({type:D});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},addNumber:function(e){return function(){var t=Object(xe.a)(fe.a.mark((function t(a){var n,r,c;return fe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r={headers:{"Content-Type":"application/json"}},t.next=4,Ne.a.post("/api/numbersPool/add",e,r);case 4:(null===(c=t.sent)||void 0===c||null===(n=c.data)||void 0===n?void 0:n.result)?a({type:I,payload:c.data.result}):(console.log(c.data),a({type:D})),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0),a({type:D});case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},editNumber:function(e){return function(){var t=Object(xe.a)(fe.a.mark((function t(a){var n,r,c;return fe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r={headers:{"Content-Type":"application/json"}},t.next=4,Ne.a.post("/api/numbersPool/edit",e,r);case 4:(null===(c=t.sent)||void 0===c||null===(n=c.data)||void 0===n?void 0:n.result)?a({type:L,payload:c.data.result}):(console.log(c.data),a({type:D})),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0),a({type:D});case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},removeNumber:function(e){return function(){var t=Object(xe.a)(fe.a.mark((function t(a){var n,r;return fe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ne.a.delete("/api/numbersPool/delete/"+e);case 3:(null===(r=t.sent)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.result)?(console.log(r.data.result),a({type:M,payload:r.data.result})):(console.log(r.data),a({type:D})),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0),a({type:D});case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},resetOutboundLimit:function(e){return function(){var t=Object(xe.a)(fe.a.mark((function t(a){var n;return fe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ne.a.put("/api/outbound/".concat(e));case 3:if(!(null===(n=t.sent)||void 0===n?void 0:n.data)){t.next=8;break}return t.abrupt("return",n.data);case 8:return t.abrupt("return",{error:!0,errorMessage:"No data returned"});case 9:t.next=15;break;case 11:return t.prev=11,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",{error:!0,errorMessage:"Internal error, check the log"});case 15:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.user,a=e.loading,c=e.getNumbers,s=e.logs,i=e.addNumber,l=e.editNumber,d=e.removeNumber,u=e.resetOutboundLimit,b=Object(r.useState)(!1),j=Object(ze.a)(b,2),m=j[0],p=j[1],h=Object(r.useState)(null),O=Object(ze.a)(h,2),g=O[0],v=O[1],f=Object(r.useState)(!1),x=Object(ze.a)(f,2),y=x[0],N=x[1],w=Object(r.useState)(!1),k=Object(ze.a)(w,2),S=k[0],C=k[1],D=Object(r.useState)(""),T=Object(ze.a)(D,2),E=T[0],P=T[1],A=Object(r.useState)(1),R=Object(ze.a)(A,2),I=R[0],L=R[1],M=Object(r.useState)(""),H=Object(ze.a)(M,2),_=H[0],z=H[1],F=function(){var e=Object(xe.a)(fe.a.mark((function e(t){var a;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==E){e.next=5;break}z("Please complete all the fields!"),e.next=13;break;case 5:if(3!==I){e.next=9;break}z("Please fix incorrect inputs!"),e.next=13;break;case 9:return e.next=11,u(E);case 11:(a=e.sent).error?Rt.a.alert({type:3,text:a.errorMessage,stay:!1,time:2,position:"top"}):Rt.a.alert({type:1,text:"Limit reset successful",stay:!1,time:2,position:"top"});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){c()}),[]),a?Object(n.jsx)("div",{className:"container",children:Object(n.jsx)("h2",{children:"Loading..."})}):(null===t||void 0===t?void 0:t.role)&&"admin"===t.role?Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)("div",{className:"mb-4 d-flex",children:Object(n.jsxs)("div",{className:"d-flex ml-auto",children:[m&&Object(n.jsx)("div",{className:"mx-2",children:Object(n.jsx)(Ee.s,{size:30,color:"#033c73",style:{cursor:"pointer"},onClick:function(){return C(!0)}})}),Object(n.jsx)("div",{children:Object(n.jsx)(Zt.a,{onChange:function(e){return p(e)},checked:m})})]})}),Object(n.jsx)("div",{className:"row",children:s.sort((function(e,t){return e.order>t.order?1:e.order<t.order?-1:0})).map((function(e){return Object(n.jsx)("div",{className:"col-md-3",children:Object(n.jsx)(Kt,{order:e.order,editMode:m,setEditItem:v,setEditModalOpen:N,item:e})},e.order)}))}),Object(n.jsx)("br",{}),Object(n.jsx)("hr",{}),Object(n.jsx)("h4",{children:"Reset number outbound limit"}),Object(n.jsx)("div",{className:"row",children:Object(n.jsx)("div",{className:"col-12 col-md-8 col-lg-5",children:Object(n.jsxs)("form",{onSubmit:F,children:[Object(n.jsxs)("div",{className:"form-group ".concat(2===I?"has-success":""," ").concat(3===I?"has-danger":""),children:[Object(n.jsx)("label",{className:"col-form-label font-weight-bold",htmlFor:"inputLarge1",children:"Number"}),Object(n.jsx)("input",{className:"form-control form-control-lg ".concat(2===I?"is-valid":""," ").concat(3===I?"is-invalid":""),type:"text",value:E,onChange:function(e){return P(e.target.value)},onBlur:function(){E&&E.length>1?L(2):L(3)},id:"inputLarge1"}),3===I&&Object(n.jsx)("div",{className:"invalid-feedback",children:"Sorry, Wrong Number format!"})]}),Object(n.jsx)("button",{type:"submit",className:"btn btn-success",style:{width:"100%"},children:"Send"}),Object(n.jsx)("small",{style:{color:"#e51c23"},children:_}),Object(n.jsx)("br",{})]})})}),y&&Object(n.jsx)(ea,{isOpen:y,onRequestClose:function(){return N(!1)},editItem:g,editNumber:l,removeNumber:d}),S&&Object(n.jsx)(ta,{isOpen:S,onRequestClose:function(){return C(!1)},addNumber:i})]}):Object(n.jsx)(o.a,{to:"/"})})),na=a(235),ra=function(e){var t=e.openModal,a=e.user;return Object(n.jsxs)("div",{className:"RootContainer",style:{display:"flex",backgroundColor:"transparent"},children:[Object(n.jsx)("h1",{style:{margin:"1rem",right:"10rem",color:"black"},children:"User Management"}),!!a&&"admin"===a.role&&Object(n.jsx)("button",{className:"RegisterButton",style:{alignSelf:"center",color:"white",marginLeft:"auto",padding:"0.5rem 0.7rem 0.5rem 0.7rem",backgroundColor:"#033c73",borderRadius:"10px",border:"1px solid white"},onClick:function(){return t()},children:Object(n.jsx)(na.a,{size:25})})]})},ca=c.a.forwardRef((function(e,t){var a=e.indeterminate,r=Object(De.a)(e,["indeterminate"]),s=c.a.useRef(),i=t||s;return c.a.useEffect((function(){i.current.indeterminate=a}),[i,a]),Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("input",Object(ce.a)({type:"checkbox",ref:i},r))})})),sa=function(e){var t=e.canPreviousPage,a=e.canNextPage,r=e.pageIndex,c=e.pageOptions,s=e.gotoPage,i=e.pageSize,l=e.previousPage,o=e.nextPage,d=e.pageCount,u=e.setPageSize;return Object(n.jsxs)("div",{className:"pagination",children:[Object(n.jsx)("button",{className:"btn btn-info mx-1 p-1",onClick:function(){return s(0)},disabled:!t,children:Object(n.jsx)(Ee.h,{size:25})}),Object(n.jsx)("button",{className:"btn btn-info mx-1 p-1",onClick:function(){return l()},disabled:!t,children:Object(n.jsx)(Ee.f,{size:25})}),Object(n.jsx)("button",{className:"btn btn-info mx-1 p-1",onClick:function(){return o()},disabled:!a,children:Object(n.jsx)(Ee.g,{size:25})}),Object(n.jsx)("button",{className:"btn btn-info mx-1 p-1",onClick:function(){return s(d-1)},disabled:!a,children:Object(n.jsx)(Ee.i,{size:25})})," ",Object(n.jsxs)("span",{className:"mx-2",style:{alignSelf:"center"},children:["Page"," ",Object(n.jsxs)("strong",{children:[r+1," of ",c.length]})," "]}),Object(n.jsx)("span",{className:"mx-2",style:{alignSelf:"center"},children:"|"}),Object(n.jsxs)("span",{className:"mx-2",style:{alignSelf:"center"},children:["Go to page:"," ",Object(n.jsx)("input",{type:"number",className:"form-control",defaultValue:r+1,onChange:function(e){var t=e.target.value?Number(e.target.value)-1:0;s(t)},style:{width:"70px",display:"inline"}})]})," ",Object(n.jsx)("select",{value:i,className:"form-control",style:{width:"120px",display:"inline"},onChange:function(e){u(Number(e.target.value))},children:[10,20,30,40].map((function(e){return Object(n.jsxs)("option",{value:e,children:["Show ",e]},e)}))})]})},ia=function(e){var t=e.value,a=e.setValue,c=e.placeholder,s=Object(r.useState)(!0),i=Object(ze.a)(s,2),l=i[0],o=i[1];return Object(n.jsxs)("div",{className:"input-group",children:[Object(n.jsx)("input",{type:l?"password":"text",className:"form-control",value:t,onChange:function(e){return a(e.target.value)},placeholder:c}),Object(n.jsx)("div",{className:"input-group-append",onClick:function(){o(!l)},children:Object(n.jsx)("span",{className:"input-group-text",children:l?Object(n.jsx)(Ae.b,{}):Object(n.jsx)(Ae.c,{})})})]})},la=a(228),oa=a.n(la),da=a(76),ua=a.n(da),ba=(a(409),a(410),function(){var e=Object(xe.a)(fe.a.mark((function e(){var t;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ne.a.get("/api/timelog/report/locations");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()),ja=a(161),ma={overlay:{backgroundColor:"rgb(88 88 88 / 75%)"},content:{inset:0,width:"fit-content",minWidth:"980px",marginRight:"auto",marginLeft:"auto",marginTop:"50px",position:"relative",maxHeight:"90%"}},pa=[{label:"Investigation & Development",value:"Investigation & Development"},{label:"Inbound & Chat",value:"Inbound & Chat"},{label:"Push",value:"Push"},{label:"Repetition",value:"Repetition"},{label:"Overdue",value:"Overdue"},{label:"Operations",value:"Operations"},{label:"Information & Technology",value:"Information & Technology"},{label:"Analytics",value:"Analytics"},{label:"Quality Assurance",value:"Quality Assurance"}],ha=[{label:"Monday",value:"monday"},{label:"Tuesday",value:"tuesday"},{label:"Wednesday",value:"wednesday"},{label:"Thursday",value:"thursday"},{label:"Friday",value:"friday"}];mt.a.setAppElement("#root");var Oa=Object(b.b)(null,{editTimeManageUser:function(e,t){return function(){var a=Object(xe.a)(fe.a.mark((function a(n){var r,c;return fe.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r=JSON.stringify(t),c={method:"patch",url:"/api/users/info/".concat(e),headers:{"Content-Type":"application/json"},data:r},Ne()(c).then((function(e){n({type:Q,payload:e.data})})).catch((function(e){console.log(e),n({type:Y})}));case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},sendNoteBot:function(e,t,a,n){return function(){var r=Object(xe.a)(fe.a.mark((function r(c){var s,i;return fe.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:try{console.log("Execute timeSummary"),s=JSON.stringify({Id:e,Start:t,End:a,Reason:n}),i={method:"post",url:"/api/users/sendNoteLicenseOrVacationBot",headers:{"Content-Type":"application/json"},data:s},Ne()(i).then((function(e){console.log(JSON.stringify(e.data))})).catch((function(e){console.log(e)}))}catch(c){console.log(c)}case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}})((function(e){var t=e.user,a=e.open,c=e.closeModal,s=e.editTimeManageUser,i=e.sendNoteBot,l=Object(r.useState)((null===t||void 0===t?void 0:t.backofficeId)||""),o=Object(ze.a)(l,2),d=o[0],u=o[1],b=Object(r.useState)(1),j=Object(ze.a)(b,2),m=j[0],p=j[1],h=Object(r.useState)((null===t||void 0===t?void 0:t.department)?pa.find((function(e){return e.value===(null===t||void 0===t?void 0:t.department)})):""),O=Object(ze.a)(h,2),g=O[0],v=O[1],f=Object(r.useState)({label:Object(We.default)(new Date,"EEEE"),value:Object(We.default)(new Date,"EEEE").toLowerCase()}),x=Object(ze.a)(f,2),y=x[0],N=x[1],w=Object(r.useState)((null===t||void 0===t?void 0:t.schedule)||{monday:{scheduleStart:"9:00 am",breakTime:"12:00 pm",scheduleEnd:"6:00 pm"},tuesday:{scheduleStart:"10:00 am",breakTime:"12:00 pm",scheduleEnd:"7:00 pm"},wednesday:{scheduleStart:"9:00 am",breakTime:"12:00 pm",scheduleEnd:"6:00 pm"},thursday:{scheduleStart:"9:00 am",breakTime:"12:00 pm",scheduleEnd:"6:00 pm"},friday:{scheduleStart:"9:00 am",breakTime:"12:00 pm",scheduleEnd:"6:00 pm"}}),k=Object(ze.a)(w,2),S=k[0],C=k[1],D=Object(r.useState)(!1),T=Object(ze.a)(D,2),E=T[0],P=T[1],A=Object(r.useState)(!1),R=Object(ze.a)(A,2),I=R[0],L=R[1],M=Object(r.useState)(!1),H=Object(ze.a)(M,2),_=H[0],z=H[1],F=Object(r.useState)(!1),W=Object(ze.a)(F,2),B=W[0],G=W[1],U=Object(r.useState)(!1),V=Object(ze.a)(U,2),q=V[0],J=V[1],Q=Object(r.useState)({startDate:Object(at.default)((null===t||void 0===t?void 0:t.vacationStart)?new Date(null===t||void 0===t?void 0:t.vacationStart):new Date),endDate:Object(qt.default)((null===t||void 0===t?void 0:t.vacationEnd)?new Date(null===t||void 0===t?void 0:t.vacationEnd):new Date),key:"selection"}),Y=Object(ze.a)(Q,2),K=Y[0],X=Y[1],Z=Object(r.useState)({startDate:Object(at.default)((null===t||void 0===t?void 0:t.licenseStart)?new Date(null===t||void 0===t?void 0:t.licenseStart):new Date),endDate:Object(qt.default)((null===t||void 0===t?void 0:t.licenseEnd)?new Date(null===t||void 0===t?void 0:t.licenseEnd):new Date),key:"selection"}),$=Object(ze.a)(Z,2),ee=$[0],te=$[1],ae=Object(r.useState)((null===t||void 0===t?void 0:t.licenseReason)?t.licenseReason:null),ne=Object(ze.a)(ae,2),re=ne[0],se=ne[1],ie=Object(r.useState)(""),le=Object(ze.a)(ie,2),oe=le[0],de=le[1],ue=Object(r.useState)(!1),be=Object(ze.a)(ue,2),je=be[0],me=be[1],pe=function(){var e=Object(xe.a)(fe.a.mark((function e(a){var n;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),""!==d&&""!==g){e.next=5;break}de("Please complete all the fields!"),e.next=24;break;case 5:if(3!==m){e.next=9;break}de("Please fix incorrect inputs!"),e.next=24;break;case 9:if(me(!0),n={backofficeId:d,department:g.value,schedule:S,vacationStart:Object(at.default)(K.startDate),vacationEnd:Object(qt.default)(K.endDate)},0!=B||1!=q){e.next=14;break}return e.next=14,i(null===t||void 0===t?void 0:t.name,K.startDate,K.endDate);case 14:if(!B){e.next=20;break}return n.licenseStart=Object(at.default)(ee.startDate),n.licenseEnd=Object(qt.default)(ee.endDate),n.licenseReason=re,e.next=20,i(null===t||void 0===t?void 0:t.name,ee.startDate,ee.endDate,re);case 20:return e.next=22,s(t._id,n);case 22:me(!1),c();case 24:setTimeout((function(){de("")}),8e3);case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsxs)(mt.a,{isOpen:a,onRequestClose:function(){je||c()},style:ma,children:[Object(n.jsx)("span",{onClick:c,style:{cursor:"pointer"},children:Object(n.jsx)(Ee.z,{color:"red",style:{float:"right"},size:30})}),Object(n.jsx)("h1",{children:null===t||void 0===t?void 0:t.name}),Object(n.jsx)("hr",{}),Object(n.jsxs)("form",{onSubmit:pe,children:[Object(n.jsxs)("div",{className:"form-group ".concat(2===m?"has-success":""," ").concat(3===m?"has-danger":""),children:[Object(n.jsx)("label",{className:"col-form-label font-weight-bold",htmlFor:"inputLarge1",children:"Backoffice ID"}),Object(n.jsx)("input",{className:"form-control form-control-lg ".concat(2===m?"is-valid":""," ").concat(3===m?"is-invalid":""),type:"text",value:d,onChange:function(e){return u(e.target.value)},onBlur:function(){d&&11===d.length&"A-"===d.substring(0,2)?p(2):p(3)},id:"inputLarge1"}),3===m&&Object(n.jsx)("div",{className:"invalid-feedback",children:"Wrong format!"})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{className:"col-form-label font-weight-bold",htmlFor:"inputLarge2",children:"Department"}),Object(n.jsx)($e.a,{isClearable:!0,className:"select time-index",placeholder:"",value:g,onChange:function(e){return v(e)},options:pa})]}),Object(n.jsx)("div",{className:"row",children:Object(n.jsxs)("div",{className:"col-md-4",children:[Object(n.jsx)("label",{className:"col-form-label font-weight-bold",htmlFor:"inputLarge2",children:"Schedule"}),Object(n.jsx)($e.a,{isClearable:!0,className:"select time-index",placeholder:"",value:y,onChange:function(e){return N(e)},options:ha})]})}),Object(n.jsxs)("div",{className:"row",children:[Object(n.jsx)("div",{className:"col-md-4",children:Object(n.jsxs)("div",{className:"form-group",style:{display:"flex",flexDirection:"column"},children:[Object(n.jsx)("label",{className:"col-form-label font-weight-bold",children:"Start"}),E?Object(n.jsx)(ua.a,{time:S[y.value].scheduleStart,onChange:function(e){console.log(e),C(Object(ce.a)(Object(ce.a)({},S),{},Object(Ye.a)({},y.value,Object(ce.a)(Object(ce.a)({},S[y.value]),{},{scheduleStart:e.formatted12}))))},onDoneClick:function(){return P(!1)}}):Object(n.jsx)("h1",{onClick:function(){return P(!0)},style:{cursor:"pointer"},children:S[y.value].scheduleStart})]})}),Object(n.jsx)("div",{className:"col-md-4",children:Object(n.jsxs)("div",{className:"form-group",style:{display:"flex",flexDirection:"column"},children:[Object(n.jsx)("label",{className:"col-form-label font-weight-bold",children:"Break Time"}),I?Object(n.jsx)(ua.a,{time:S[y.value].breakTime,onChange:function(e){C(Object(ce.a)(Object(ce.a)({},S),{},Object(Ye.a)({},y.value,Object(ce.a)(Object(ce.a)({},S[y.value]),{},{breakTime:e.formatted12}))))},onDoneClick:function(){return L(!1)}}):Object(n.jsx)("h1",{onClick:function(){return L(!0)},style:{cursor:"pointer"},children:S[y.value].breakTime})]})}),Object(n.jsx)("div",{className:"col-md-4",children:Object(n.jsxs)("div",{className:"form-group",style:{display:"flex",flexDirection:"column"},children:[Object(n.jsx)("label",{className:"col-form-label font-weight-bold",children:"End"}),_?Object(n.jsx)(ua.a,{time:S[y.value].scheduleEnd,onChange:function(e){C(Object(ce.a)(Object(ce.a)({},S),{},Object(Ye.a)({},y.value,Object(ce.a)(Object(ce.a)({},S[y.value]),{},{scheduleEnd:e.formatted12}))))},onDoneClick:function(){return z(!1)}}):Object(n.jsx)("h1",{onClick:function(){return z(!0)},style:{cursor:"pointer"},children:S[y.value].scheduleEnd})]})})]}),Object(n.jsxs)("div",{className:"form-group",style:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[Object(n.jsxs)("div",{className:"VacationsDiv",style:{display:"flex",flexDirection:"column",alignSelf:"flex-start"},children:[Object(n.jsx)("label",{className:"col-form-label font-weight-bold",htmlFor:"inputLarge3",style:{textAlign:"center"},children:"Vacations"}),Object(n.jsx)(ja.DateRange,{ranges:[K],onChange:function(e){(null===e||void 0===e?void 0:e.selection)&&(X(e.selection),J(!0))},minDate:new Date,staticRanges:[]})]}),Object(n.jsxs)("div",{className:"LicenseDiv",style:{display:"flex",flexDirection:"column",alignContent:"flex-end"},children:[Object(n.jsxs)("label",{className:"col-form-label font-weight-bold",htmlFor:"inputLarge3",style:{textAlign:"center"},children:["License"," ",t.licenseStart||B?"":"(Default)"]}),Object(n.jsx)(ja.DateRange,{ranges:[ee],onChange:function(e){(null===e||void 0===e?void 0:e.selection)&&(te(e.selection),G(!0))},minDate:new Date,staticRanges:[]}),Object(n.jsx)("b",{style:{textAlign:"center"},children:"Reason for the license:"}),Object(n.jsx)("input",{className:"form-control form-control-lg",type:"text",value:re,required:B,onChange:function(e){se(e.target.value),G(!0)},id:"inputLarge1"})]})]}),Object(n.jsx)("br",{}),Object(n.jsx)("button",{type:"submit",className:"btn btn-success",style:{width:"100%"},children:"Update"}),Object(n.jsx)("small",{style:{color:"#e51c23"},children:oe}),Object(n.jsx)("br",{})]}),je&&Object(n.jsx)("div",{style:{background:"rgb(0 0 0 / 40%)",position:"absolute",top:"0",left:"0",width:"100%",height:"100%",zIndex:"1"},children:Object(n.jsx)("div",{style:{marginRight:"auto",marginLeft:"auto",width:"fit-content",height:"100%",display:"flex",alignItems:"center"},children:Object(n.jsx)(oa.a,{color:"white",size:150})})})]})})),ga=[{value:"statusChange",label:"Change Status"},{value:"timeManageChange",label:"Change Time Manage"},{value:"rolesChange",label:"Change Role"},{value:"passwordsChange",label:"Change Password"},{value:"deleteAccount",label:"Delete Account"}],va=Object(b.b)((function(e){return{user:e.auth.user}}),{modifyRole:function(e,t){return function(){var a=Object(xe.a)(fe.a.mark((function a(n){var r,c;return fe.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r=JSON.stringify({role:t}),c={method:"patch",url:"/api/users/".concat(e),headers:{"Content-Type":"application/json"},data:r},Ne()(c).then((function(e){n({type:_,payload:e.data})})).catch((function(e){console.log(e),n({type:D})}));case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},modifyStatus:function(e,t){return function(){var a=Object(xe.a)(fe.a.mark((function a(n){var r,c;return fe.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:"Active"===t?r=JSON.stringify({status:"Inactive"}):"Inactive"===t&&(r=JSON.stringify({status:"Active"})),c={method:"patch",url:"/api/users/".concat(e),headers:{"Content-Type":"application/json"},data:r},Ne()(c).then((function(e){n({type:z,payload:e.data})})).catch((function(e){console.log(e),n({type:D})}));case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},modifyTimeManage:function(e,t){return function(){var a=Object(xe.a)(fe.a.mark((function a(n){var r,c;return fe.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r={timeManage:!t},c={method:"patch",url:"/api/users/".concat(e),headers:{"Content-Type":"application/json"},data:r},Ne()(c).then((function(e){n({type:U,payload:e.data})})).catch((function(e){console.log(e),n({type:D})}));case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},modifyPassword:function(e,t){return function(){var a=Object(xe.a)(fe.a.mark((function a(n){var r,c;return fe.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r=JSON.stringify({password:t}),c={method:"patch",url:"/api/users/".concat(e),headers:{"Content-Type":"application/json"},data:r},Ne()(c).then((function(e){console.log(JSON.stringify(e.data)),n({type:"MODIFY_PASSWORD",payload:e.data})})).catch((function(e){console.log(e),n({type:D})}));case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},deleteUser:function(e){return function(){var t=Object(xe.a)(fe.a.mark((function t(a){var n;return fe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n={method:"delete",url:"/api/users/".concat(e),headers:{"Content-Type":"application/json"},data:[]},Ne()(n).then((function(t){console.log(JSON.stringify(t.data)),a({type:F,payload:e})})).catch((function(e){console.log(e),a({type:D})}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.data,a=e.modifyRole,s=e.modifyStatus,i=e.modifyTimeManage,l=e.modifyPassword,o=e.deleteUser,d=e.user,u=Object(r.useState)(""),b=Object(ze.a)(u,2),j=b[0],m=b[1],p=Object(r.useState)(""),O=Object(ze.a)(p,2),g=O[0],v=O[1],f=Object(r.useState)(""),x=Object(ze.a)(f,2),y=x[0],N=x[1],w=Object(r.useState)(""),k=Object(ze.a)(w,2),S=k[0],C=k[1],D=Object(r.useState)(!1),T=Object(ze.a)(D,2),E=T[0],P=T[1],A=Object(r.useState)(null),R=Object(ze.a)(A,2),I=R[0],L=R[1],M=c.a.useMemo((function(){return[{Header:"Username",accessor:"email"},{Header:"Name",accessor:"name"},{Header:"Role",accessor:"role"},{Header:"Status",accessor:"status",Cell:function(e){var t=e.value;return"Active"===t?Object(n.jsx)(Ee.e,{size:25,color:"rgb(25 205 25)"}):"Inactive"===t?Object(n.jsx)(Ee.A,{size:25,color:"#ff4f4f"}):Object(n.jsx)(Pt.b,{size:25,color:"gray"})}},{Header:"Time Manage",accessor:"timeManage",Cell:function(e){var t=e.value;return!0===t?Object(n.jsx)(Ee.e,{size:25,color:"rgb(25 205 25)"}):!1===t?Object(n.jsx)(Ee.A,{size:25,color:"#ff4f4f"}):Object(n.jsx)(Pt.b,{size:25,color:"gray"})}},{Header:"Department",accessor:"department"},{Header:"Schedule Start",accessor:"schedule.".concat(Object(We.default)(new Date,"EEEE").toLowerCase(),".scheduleStart")},{Header:"Break time",accessor:"schedule.".concat(Object(We.default)(new Date,"EEEE").toLowerCase(),".breakTime")},{Header:"Schedule End",accessor:"schedule.".concat(Object(We.default)(new Date,"EEEE").toLowerCase(),".scheduleEnd")},{Header:"Vacations",accessor:"vacationStart",Cell:function(e){var t=e.row.original,a=t.vacationStart,n=t.vacationEnd;return a&&n?"".concat(Object(We.default)(new Date(a),"MMM do y")," - ").concat(Object(We.default)(new Date(n),"MMM do y")):""}},{Header:"License",accessor:"licenseStatus",Cell:function(e){var t=e.row.original,a=Object(Ft.default)(Object(qt.default)(new Date(null===t||void 0===t?void 0:t.licenseEnd)),new Date)&&Object(Wt.default)(new Date(null===t||void 0===t?void 0:t.licenseStart),new Date);return!0===a?Object(n.jsx)(Ee.e,{size:25,color:"rgb(25 205 25)"}):!1===a?Object(n.jsx)(Ee.A,{size:25,color:"#ff4f4f"}):void 0}},{id:"edit",width:20,Cell:function(e){var t=e.row.original;return Object(n.jsx)(Ee.m,{onClick:function(){L(t),P(!0)},style:{cursor:"pointer"},size:20})}}]}),[]),H=Object(Le.useTable)({columns:M,data:t},Le.useSortBy,Le.usePagination,Le.useRowSelect,"admin"===d.role&&function(e){e.visibleColumns.push((function(e){return[{id:"selection",Header:function(e){var t=e.getToggleAllRowsSelectedProps;return Object(n.jsx)(ca,Object(ce.a)({},t()))},Cell:function(e){var t=e.row;return Object(n.jsx)(ca,Object(ce.a)({},t.getToggleRowSelectedProps()))}}].concat(Object(h.a)(e))}))}),_=H.getTableProps,z=H.getTableBodyProps,F=H.headerGroups,W=H.prepareRow,B=H.page,G=H.canPreviousPage,U=H.canNextPage,V=H.pageOptions,q=H.pageCount,J=H.gotoPage,Q=H.nextPage,Y=H.previousPage,K=H.setPageSize,X=H.selectedFlatRows,Z=H.state,$=Z.pageIndex,ee=Z.pageSize;return q>0?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("table",Object(ce.a)(Object(ce.a)({},_()),{},{className:"table table-hover",children:[Object(n.jsx)("thead",{className:"bg-dark text-white",children:F.map((function(e){return Object(n.jsx)("tr",Object(ce.a)(Object(ce.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(n.jsxs)("th",Object(ce.a)(Object(ce.a)({},e.getHeaderProps(e.getSortByToggleProps())),{},{children:[e.render("Header"),Object(n.jsx)("span",{children:e.isSorted?e.isSortedDesc?" \ud83d\udd3b":" \ud83d\udd3a":""})]}))}))}))}))}),Object(n.jsx)("tbody",Object(ce.a)(Object(ce.a)({},z()),{},{children:B.map((function(e){return W(e),Object(n.jsx)("tr",Object(ce.a)(Object(ce.a)({},e.getRowProps()),{},{children:e.cells.map((function(e){return Object(n.jsx)("td",Object(ce.a)(Object(ce.a)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))}))]})),q>1&&Object(n.jsx)("div",{className:"d-flex justify-content-center",children:Object(n.jsx)(sa,{canPreviousPage:G,canNextPage:U,pageIndex:$,pageOptions:V,gotoPage:J,pageSize:ee,previousPage:Y,nextPage:Q,pageCount:q,setPageSize:K})}),Object(n.jsx)("br",{}),X.length>0?Object(n.jsxs)("form",{style:{display:"flex"},children:[Object(n.jsx)("div",{className:"SelectContainer",style:{minWidth:"20rem",fontweight:"700",color:"#444",lineheight:"1.3",padding:"0em 1.4em .5em .8em",maxwidth:"100%"},children:Object(n.jsx)($e.a,{isClearable:!0,className:"select",style:{width:"300px"},placeholder:"Choose action...",value:j,onChange:function(e){return m(e)},options:ga})}),"statusChange"===(null===j||void 0===j?void 0:j.value)&&Object(n.jsxs)(r.Fragment,{children:[Object(n.jsx)("div",{className:"form-group mx-sm-3 mb-2",children:Object(n.jsx)("button",{type:"button",className:"btn btn-danger",onClick:function(){X.forEach(function(){var e=Object(xe.a)(fe.a.mark((function e(t){var a;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.original._id,s(a,t.original.status),m("");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:"Change Status"})}),Object(n.jsx)("div",{className:"form-group mx-sm-3 mb-2 text-secondary"})]}),"timeManageChange"===(null===j||void 0===j?void 0:j.value)&&Object(n.jsxs)(r.Fragment,{children:[Object(n.jsx)("div",{className:"form-group mx-sm-3 mb-2",children:Object(n.jsx)("button",{type:"button",className:"btn btn-danger",onClick:function(){X.forEach(function(){var e=Object(xe.a)(fe.a.mark((function e(t){var a,n;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.original._id,i(n,null===(a=t.original)||void 0===a?void 0:a.timeManage),m("");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:"Change time manage"})}),Object(n.jsx)("div",{className:"form-group mx-sm-3 mb-2 text-secondary"})]}),"rolesChange"===(null===j||void 0===j?void 0:j.value)&&Object(n.jsxs)(r.Fragment,{children:[Object(n.jsx)("div",{className:"form-group mx-sm-3 mb-2",children:Object(n.jsxs)("select",{className:"custom-select",value:y,onChange:function(e){return N(e.target.value)},children:[Object(n.jsx)("option",{value:"",style:{display:"none"},children:"Choose a role..."}),Object(n.jsx)("option",{value:"admin",children:"Admin"}),Object(n.jsx)("option",{value:"supervisor",children:"Supervisor"}),Object(n.jsx)("option",{value:"lead",children:"Lead"}),Object(n.jsx)("option",{value:"julia",children:"Julia"})]})}),Object(n.jsx)("div",{className:"form-group mx-sm-3 mb-2 text-secondary",children:"|"}),Object(n.jsx)("div",{className:"form-group mx-sm-3 mb-2",children:Object(n.jsx)("button",{type:"button",className:"btn btn-info",onClick:function(){""===y?(C("Please select a role"),setInterval((function(){C("")}),5e3)):X.forEach(function(){var e=Object(xe.a)(fe.a.mark((function e(t){var n;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.original._id,a(n,y),m(""),N("");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:"Change Role"})})]}),"passwordsChange"===(null===j||void 0===j?void 0:j.value)&&1===X.length&&Object(n.jsxs)(r.Fragment,{children:[Object(n.jsx)("div",{className:"form-group mx-sm-3 mb-2",children:Object(n.jsx)(ia,{value:g,setValue:v,placeholder:"New Password"})}),Object(n.jsx)("div",{className:"form-group mx-sm-3 mb-2 text-secondary",children:"|"}),Object(n.jsx)("div",{className:"form-group mx-sm-3 mb-2",children:Object(n.jsx)("button",{type:"button",className:"btn btn-info",onClick:function(){""===g?(C("Please complete all the fields"),setInterval((function(){C("")}),5e3)):X.forEach(function(){var e=Object(xe.a)(fe.a.mark((function e(t){var a;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.original._id,e.next=3,l(a,g);case 3:m(""),v("");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:"Change Password"})}),Object(n.jsx)("small",{className:"text-danger ml-2",children:S})]}),"deleteAccount"===(null===j||void 0===j?void 0:j.value)&&Object(n.jsxs)(r.Fragment,{children:[Object(n.jsx)("div",{className:"form-group mx-sm-3 mb-2",children:Object(n.jsx)("button",{type:"button",className:"btn btn-danger",onClick:function(){X.forEach(function(){var e=Object(xe.a)(fe.a.mark((function e(t){var a;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.original._id,o(a),m("");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:"Delete User Account"})}),Object(n.jsx)("div",{className:"form-group mx-sm-3 mb-2 text-secondary"})]})]}):null,E&&!!I&&Object(n.jsx)(Oa,{open:E,closeModal:function(){return P(!1)},user:I}),Object(n.jsx)("br",{})]}):Object(n.jsx)("div",{className:"text-center p-3",children:Object(n.jsx)("h3",{className:"text-secondary",children:"No content with this filters..."})})})),fa=function(e){var t=e.isOpen,a=e.onRequestClose,c=Object(r.useState)(""),s=Object(ze.a)(c,2),i=s[0],l=s[1],o=Object(r.useState)(""),d=Object(ze.a)(o,2),u=d[0],b=d[1],j=Object(r.useState)(""),m=Object(ze.a)(j,2),p=m[0],h=m[1],O=Object(r.useState)(""),g=Object(ze.a)(O,2),v=g[0],f=g[1],x=Object(r.useState)(""),y=Object(ze.a)(x,2),N=y[0],w=y[1],k=Object(r.useState)(""),S=Object(ze.a)(k,2),C=S[0],D=S[1],T=Object(r.useState)(""),E=Object(ze.a)(T,2),P=E[0],A=E[1],R=function(){var e=Object(xe.a)(fe.a.mark((function e(t){var n,r;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),""===i||""===p||""===v||""===N||""===u?D("Please Complete All Fields!"):p!==v?D("Passwords fields do not match! Check your passwords!"):(n=JSON.stringify({name:u.trim(),email:i.trim(),password:p.trim(),role:N}),r={method:"post",url:"/api/users",headers:{"Content-Type":"application/json"},data:n},Ne()(r).then((function(e){console.log(JSON.stringify(e.data)),A("User created"),b(""),w(""),l(""),h(""),f(""),a()})).catch((function(e){D(e.reason),setInterval((function(){D("")}),5e3),console.log(e)})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)(mt.a,Object(ce.a)(Object(ce.a)({isOpen:t},e),{},{style:{display:"block",content:{overflow:"visible",height:"70%",width:"40%",margin:"auto",backgroundColor:"#031e36",borderRadius:"20px",borderColor:"transparent"},overlay:{background:"rgb(105 105 105 / 75%)"}},ariaHideApp:!1,contentLabel:"Task Detail",children:Object(n.jsxs)("form",{onSubmit:R,className:"RootContainer",style:{display:"flex",marginTop:"1rem",justifyContent:"center",flexDirection:"column",backgroundColor:"transparent"},children:[Object(n.jsx)("div",{id:"legend",style:{backgroundColor:"transparent",borderRadius:"30px 30px 0px 0px",display:"flex",padding:"0rem"},children:Object(n.jsx)("div",{style:{color:"white",fontSize:"200%",backgroundColor:"white",borderRadius:"10px",margin:"auto",padding:"auto",alignSelf:"center"},children:Object(n.jsx)("h2",{style:{color:"black",padding:"0.5rem"},children:"User Register"})})}),Object(n.jsxs)("div",{className:"InputContainer",style:{backgroundColor:"white",display:"flex",padding:"1rem",margin:"0.5rem",borderRadius:"10px",flexDirection:"column"},children:[Object(n.jsx)("label",{htmlFor:"username",style:{textAlign:"center",borderRadius:"10px",backgroundColor:"#033c73",alignSelf:"center",color:"white",width:"12rem",padding:"0.5rem"},children:"Name"}),Object(n.jsx)("input",{type:"text",id:"username",name:"username",placeholder:"Insert name..",style:{alignSelf:"center",width:"45%",margin:"auto"},value:u,onChange:function(e){return b(e.target.value)}}),Object(n.jsx)("label",{className:"control-label",htmlFor:"email",style:{textAlign:"center",borderRadius:"10px",backgroundColor:"#033c73",alignSelf:"center",color:"white",padding:"0.5rem",width:"12rem",marginTop:"1rem"},children:"Role"}),Object(n.jsxs)("select",{name:"select",style:{alignSelf:"center",width:"45%",margin:"auto"},value:N,onChange:function(e){return w(e.target.value)},children:[Object(n.jsx)("option",{value:"",selected:!0,children:"Choose a role..."}),Object(n.jsx)("option",{value:"admin",children:"Admin"}),Object(n.jsx)("option",{value:"supervisor",children:" Supervisor"}),Object(n.jsx)("option",{value:"lead",children:"Lead"}),Object(n.jsx)("option",{value:"agent",children:"Agent"}),Object(n.jsx)("option",{value:"julia",children:"Julia"})]}),Object(n.jsx)("label",{className:"control-label",htmlFor:"email",style:{textAlign:"center",borderRadius:"10px",backgroundColor:"#033c73",alignSelf:"center",color:"white",padding:"0.5rem",width:"12rem",marginTop:"1rem"},children:"E-mail"}),Object(n.jsx)("input",{type:"text",id:"email",name:"email",placeholder:"Ex: boss@ualett.com",style:{alignSelf:"center",width:"45%",margin:"auto"},value:i,onChange:function(e){return l(e.target.value)}}),Object(n.jsx)("label",{className:"control-label",htmlFor:"password",style:{textAlign:"center",borderRadius:"10px",backgroundColor:"#033c73",alignSelf:"center",color:"white",padding:"0.5rem",width:"12rem",marginTop:"1rem"},children:"Password"}),Object(n.jsx)("input",{type:"password",id:"password",name:"password",placeholder:"Insert password..",style:{alignSelf:"center",width:"45%",margin:"auto"},value:p,onChange:function(e){return h(e.target.value)}}),Object(n.jsx)("label",{className:"control-label",htmlFor:"password_confirm",style:{textAlign:"center",borderRadius:"10px",backgroundColor:"#033c73",alignSelf:"center",color:"white",padding:"0.5rem",width:"12rem",margin:"1rem"},children:"Confirm Password"}),Object(n.jsx)("input",{type:"password",id:"cpassword",name:"cpassword",placeholder:"Confirm password..",style:{alignSelf:"center",width:"45%",margin:"auto"},value:v,onChange:function(e){return f(e.target.value)}}),Object(n.jsx)("button",{type:"submit",style:{fontSize:"1.5rem",alignSelf:"center",margin:"4rem auto auto auto",padding:"0.3rem",width:"30%",backgroundColor:"green",borderRadius:"10px",color:"white"},children:"Submit"}),Object(n.jsxs)("p",{children:[Object(n.jsx)("small",{className:"text-danger",children:C}),Object(n.jsx)("small",{className:"text-success",children:P})]})]})]})}))},xa=Object(b.b)((function(e){return{users:e.userManagement.logs,user:e.auth.user}}),{getAllUsers:function(){return function(){var e=Object(xe.a)(fe.a.mark((function e(t){var a;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:T}),e.next=4,Ne.a.get("/api/users");case 4:a=e.sent,t({type:H,payload:a.data}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),t({type:D});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.getAllUsers,a=e.users,c=e.user,s=Object(r.useState)(!1),i=Object(ze.a)(s,2),l=i[0],o=i[1];return Object(r.useEffect)((function(){t()}),[]),Object(n.jsxs)("div",{className:"container-fluid",children:[Object(n.jsx)(ra,{openModal:function(){return o(!0)},user:c}),!!l&&Object(n.jsx)(fa,{isOpen:l,onRequestClose:function(){o(!1)}}),Object(n.jsx)("br",{}),Object(n.jsx)(va,{data:a.sort((function(e,t){return e.date>t.date?1:e.date<t.date?-1:0}))})]})})),ya=a(162),Na=function(){var e=Object(r.useState)([]),t=Object(ze.a)(e,2),a=t[0],s=t[1],i=Object(r.useState)({width:"100%",height:1e3,latitude:18.46082902910442,longitude:-69.92538720117118,zoom:4}),l=Object(ze.a)(i,2),o=l[0],d=l[1],u=function(){var e=Object(xe.a)(fe.a.mark((function e(){var t;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ba();case 2:t=e.sent,s(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){a.length||u()}),[]);var b=function(e){var t=e.longitude,a=e.latitude,r=e.timestamp,c=e.activity,s=e.user;return Object(n.jsx)(ya.a,{latitude:a,longitude:t,offsetLeft:-70,offsetTop:-20,children:Object(n.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(n.jsx)("div",{style:{padding:"5px",background:"blue",borderRadius:"50%",width:"40px",marginBottom:"4px"},children:Object(n.jsx)(Ee.w,{style:{},size:30,color:"white"})}),Object(n.jsx)("span",{className:"badge bg-dark text-white",children:s}),Object(n.jsx)("span",{className:"badge bg-dark text-white",children:c}),Object(n.jsx)("span",{className:"badge bg-dark text-white",children:Object(We.default)(new Date(r),"HH:mm dd/MM")})]})})},j=c.a.useMemo((function(){return a.map((function(e){var t,a;return Object(n.jsx)(b,{longitude:parseFloat(null===(t=e.location)||void 0===t?void 0:t.longitude),latitude:parseFloat(null===(a=e.location)||void 0===a?void 0:a.latitude),timestamp:e.timestamp,activity:e.activity,user:e._id})}))}),[a]);return Object(n.jsx)(ya.b,Object(ce.a)(Object(ce.a)({},o),{},{mapboxApiAccessToken:"pk.eyJ1IjoiaXZhbmhlcmQiLCJhIjoiY2p6bjN6MXM4MDA2ODNicTViaWQ5ZXQyayJ9.bkP15xMXwr_U0iY0JGyBFQ",onViewportChange:function(e){return d(e)},mapStyle:"mapbox://sprites/mapbox/streets-v8",children:j}))},wa=a(230),ka=Object(b.b)((function(e){return{loading:e.timeSummary.timeReportLoading}}),{getTimeReport:function(e){var t=e.startDate,a=e.endDate;return function(){var e=Object(xe.a)(fe.a.mark((function e(n){var r;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n({type:Z}),e.next=4,Ne.a.get("/api/timelog/timeReport/".concat(t,"/").concat(a));case 4:r=e.sent,n({type:K,payload:r.data}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),n({type:X});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.loading,a=e.getTimeReport,c=Object(r.useState)(Object(wa.a)(new Date,1)),s=Object(ze.a)(c,2),i=s[0],l=s[1],o=Object(r.useState)(new Date),d=Object(ze.a)(o,2),u=d[0],b=d[1];return Object(r.useEffect)((function(){a({startDate:i,endDate:u})}),[a]),Object(n.jsxs)("div",{className:"row",style:{display:"flex",justifyContent:"flex-start"},children:[Object(n.jsxs)("div",{className:"DateFilterContainer",style:{display:"flex",flexwrap:"nowrap",minWidth:"auto",justifyContent:"space-between",marginLeft:"1rem",paddingRight:"1rem"},children:[Object(n.jsx)("span",{style:{margin:"10px 1rem 0rem 10px"},children:"From :"}),Object(n.jsx)(Ze.a,{selected:i,onChange:function(e){return l(e)},dateFormat:"MMMM d, yyyy",className:"form-control"}),Object(n.jsx)("span",{style:{margin:"10px 1rem 0rem 2rem"},children:"To :"}),Object(n.jsx)(Ze.a,{selected:u,style:{},onChange:function(e){return b(e)},dateFormat:"MMMM d, yyyy",className:"form-control"})]}),Object(n.jsx)("div",{className:"col-md-12 col-lg-2 col-xl-1",children:t?Object(n.jsx)("div",{style:{padding:"5px",marginRight:"25px",paddingBottom:"0"},children:Object(n.jsx)(tt.a,{size:25})}):Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("div",{className:"btn-container",style:{display:"flex",flexwrap:"nowrap",alignItems:"flex-start",width:"70%"},children:Object(n.jsx)("button",{style:{display:"inline",alignSelf:"flex-start",marginLeft:"0rem",marginRight:"1rem",padding:"0.3rem 0.5rem"},className:"btn btn-info",onClick:function(){return a({startDate:i,endDate:u})},children:Object(n.jsx)(Ee.g,{style:{},size:25})})})})})]})})),Sa=function(e){var t=e.canPreviousPage,a=e.canNextPage,r=e.pageIndex,c=e.pageOptions,s=e.gotoPage,i=e.pageSize,l=e.previousPage,o=e.nextPage,d=e.pageCount,u=e.setPageSize;return Object(n.jsxs)("div",{className:"pagination",children:[Object(n.jsx)("button",{className:"btn btn-info mx-1 p-1",onClick:function(){return s(0)},disabled:!t,children:Object(n.jsx)(Ee.h,{size:25})}),Object(n.jsx)("button",{className:"btn btn-info mx-1 p-1",onClick:function(){return l()},disabled:!t,children:Object(n.jsx)(Ee.f,{size:25})}),Object(n.jsx)("button",{className:"btn btn-info mx-1 p-1",onClick:function(){return o()},disabled:!a,children:Object(n.jsx)(Ee.g,{size:25})}),Object(n.jsx)("button",{className:"btn btn-info mx-1 p-1",onClick:function(){return s(d-1)},disabled:!a,children:Object(n.jsx)(Ee.i,{size:25})})," ",Object(n.jsxs)("span",{className:"mx-2",style:{alignSelf:"center"},children:["Page"," ",Object(n.jsxs)("strong",{children:[r+1," of ",c.length]})," "]}),Object(n.jsx)("span",{className:"mx-2",style:{alignSelf:"center"},children:"|"}),Object(n.jsxs)("span",{className:"mx-2",style:{alignSelf:"center"},children:["Go to page:"," ",Object(n.jsx)("input",{type:"number",className:"form-control",defaultValue:r+1,onChange:function(e){var t=e.target.value?Number(e.target.value)-1:0;s(t)},style:{width:"70px",display:"inline"}})]})," ",Object(n.jsx)("select",{value:i,className:"form-control",style:{width:"120px",display:"inline"},onChange:function(e){u(Number(e.target.value))},children:[10,20,30,40].map((function(e){return Object(n.jsxs)("option",{value:e,children:["Show ",e]},e)}))})]})},Ca=a(231),Da=Object(b.b)((function(e){return{logs:e.timeSummary.timeReport,error:e.timeSummary.timeReportError}}),{})((function(e){var t=e.logs,a=e.error,s=Object(r.useState)([]),i=Object(ze.a)(s,2),l=i[0],o=i[1],d=c.a.useMemo((function(){return[{Header:"Name",accessor:"name"},{Header:"Department",accessor:"department"},{Header:"Schedule Start",accessor:"scheduleStart"},{Header:"Break time",accessor:"breakTime"},{Header:"Schedule End",accessor:"scheduleEnd"},{Header:"Attendance",accessor:"attendance",Cell:function(e){var t=e.value,a=e.row.original.rangeOfDays;return t&&a?"".concat(t," / ").concat(a):""}},{Header:"Worked Hours",accessor:"workedHours",Cell:function(e){var t=e.value,a=e.row.original.idealScheduleWorkedHours;if(t&&a){var n=Math.floor(t/3600);return"".concat(n,":").concat(new Date(1e3*t).toISOString().substr(14,5)," --\x3e ").concat(Math.round(t/a*100),"%")}return""}},{Header:"Worked Schedule",accessor:"scheduleWorkedHours",Cell:function(e){var t=e.value,a=e.row.original.idealScheduleWorkedHours;if(t&&a){var n=Math.floor(t/3600),r=Math.floor(a/3600);return"".concat(n,":").concat(new Date(1e3*t).toISOString().substr(14,5)," / ").concat(r,":").concat(new Date(1e3*a).toISOString().substr(14,5)," --\x3e ").concat(Math.round(t/a*100),"%")}return""}},{Header:"Break Avg",accessor:"avgBreakMin",Cell:function(e){var t=e.value;return"".concat(Math.round(t/60)," min")}},{Header:"Away Avg",accessor:"avgAwayMin",Cell:function(e){var t=e.value;return"".concat(Math.round(t/60)," min")}},{Header:"Lateness",accessor:"lateness"},{Header:"Events",accessor:"eventsCount",Cell:function(e){var t=e.value,a=e.row.original,r=a.events,c=a.id,s=a.error;return t?Object(n.jsxs)("span",{className:"badge bg-info rounded-pill text-white",style:{fontSize:"14px"},"data-for":c,"data-tip":c,children:[t,Object(n.jsx)(Ca.a,{id:c,place:"left",type:s?"error":"info",children:r.map((function(e,t){return Object(n.jsx)("div",{style:{textAlign:"left"},children:e},t)}))})]}):Object(n.jsx)("span",{className:"badge bg-info rounded-pill text-white",style:{fontSize:"14px"},children:"0"})}}]}),[]);Object(r.useEffect)((function(){if(t&&t.length){var e=t.map((function(e){if("success"===(null===e||void 0===e?void 0:e.status)){var t=0,a=0,n=0,r=0,c=0,s=0,i=[];return e.daysArray.forEach((function(e){(null===e||void 0===e?void 0:e.clockInCounter)&&(t+=e.clockInCounter),(null===e||void 0===e?void 0:e.inScheduleClockInCounter)&&(r+=e.inScheduleClockInCounter),(null===e||void 0===e?void 0:e.idealScheduleTime)&&(c=c+e.idealScheduleTime-3600),(null===e||void 0===e?void 0:e.clockedInLate)&&(s+=1),(null===e||void 0===e?void 0:e.breakCounter)&&(a+=e.breakCounter),(null===e||void 0===e?void 0:e.awayCounter)&&(n+=e.awayCounter),e.clockedIn||i.push("".concat(Object(We.default)(new Date(e.startDate),"d/MM")," - Did not clockin this day")),e.clockedOut||i.push("".concat(Object(We.default)(new Date(e.startDate),"d/MM")," - Did not clockout this day")),e.clockIncompleteAlert&&i.push("".concat(Object(We.default)(new Date(e.startDate),"d/MM")," - ").concat(e.clockIncompleteAlert))})),{id:e._id,name:e.name,department:e.department,scheduleStart:e.scheduleStart,scheduleEnd:e.scheduleEnd,breakTime:e.breakTime,workedHours:t-a,scheduleWorkedHours:r-a,idealScheduleWorkedHours:c,attendance:e.daysWithActivities,lateness:s,breakHours:a,avgBreakMin:a/e.daysWithActivities,awayHours:n,avgAwayMin:n/e.daysWithActivities,rangeOfDays:e.rangeOfDays,events:i,eventsCount:i.length}}return{id:e._id,name:e.name,department:e.department,scheduleStart:e.scheduleStart,scheduleEnd:e.scheduleEnd,breakTime:e.breakTime,error:e.message,events:[e.message],eventsCount:1}}));o(e)}}),[t]);var u=Object(Le.useTable)({columns:d,data:l},Le.useSortBy,Le.usePagination,Le.useRowSelect),b=u.getTableProps,j=u.getTableBodyProps,m=u.headerGroups,p=u.prepareRow,h=u.page,O=u.canPreviousPage,g=u.canNextPage,v=u.pageOptions,f=u.pageCount,x=u.gotoPage,y=u.nextPage,N=u.previousPage,w=u.setPageSize,k=(u.selectedFlatRows,u.state),S=k.pageIndex,C=k.pageSize;return Object(n.jsxs)("div",{children:[Object(n.jsx)(ka,{}),Object(n.jsx)("br",{}),f>0&&!a?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("table",Object(ce.a)(Object(ce.a)({},b()),{},{className:"table table-hover",children:[Object(n.jsx)("thead",{className:"bg-dark text-white",children:m.map((function(e){return Object(n.jsx)("tr",Object(ce.a)(Object(ce.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(n.jsxs)("th",Object(ce.a)(Object(ce.a)({},e.getHeaderProps(e.getSortByToggleProps())),{},{children:[e.render("Header"),Object(n.jsx)("span",{children:e.isSorted?e.isSortedDesc?" \ud83d\udd3b":" \ud83d\udd3a":""})]}))}))}))}))}),Object(n.jsx)("tbody",Object(ce.a)(Object(ce.a)({},j()),{},{children:h.map((function(e){return p(e),Object(n.jsx)("tr",Object(ce.a)(Object(ce.a)({},e.getRowProps()),{},{children:e.cells.map((function(e){return Object(n.jsx)("td",Object(ce.a)(Object(ce.a)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))}))]})),f>1&&Object(n.jsx)("div",{className:"d-flex justify-content-center",children:Object(n.jsx)(Sa,{canPreviousPage:O,canNextPage:g,pageIndex:S,pageOptions:v,gotoPage:x,pageSize:C,previousPage:N,nextPage:y,pageCount:f,setPageSize:w})})]}):Object(n.jsx)("div",{className:"text-center p-3",children:Object(n.jsxs)("h3",{className:"text-secondary",children:[a||"No content..."," "]})})]})})),Ta=Object(b.b)((function(e){return{}}),{})((function(){return Object(n.jsx)("div",{children:Object(n.jsx)("h3",{children:"This is the timelive"})})})),Ea=Object(b.b)((function(e){return{user:e.auth.user}}),{})((function(e){var t=e.user;return Object(n.jsx)("div",{children:Object(n.jsx)("div",{className:"container-fluid",children:"admin"===(null===t||void 0===t?void 0:t.role)?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(Da,{}),Object(n.jsx)("hr",{}),Object(n.jsx)(Na,{}),Object(n.jsx)("br",{})]}):Object(n.jsx)(Ta,{})})})})),Pa=a(232),Aa=function(e){return Object(Pa.a)(e),Object(n.jsx)("div",{style:{backgroundColor:"red"}})},Ra=function(e,t,n){return function(){var r=Object(xe.a)(fe.a.mark((function r(c){var s,i;return fe.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:try{s=a(14),i=JSON.stringify({Email:e,message:t,hour:n}),s({method:"post",url:"/api/users/sendNoteBot",headers:{"Content-Type":"application/json"},data:i}).then((function(e){console.log(JSON.stringify(e.data))})).catch((function(e){console.log(e)}))}catch(c){console.log(c)}case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},Ia=function(e){var t=e.canPreviousPage,a=e.canNextPage,r=e.pageIndex,c=e.pageOptions,s=e.gotoPage,i=e.pageSize,l=e.previousPage,o=e.nextPage,d=e.pageCount,u=e.setPageSize;return Object(n.jsxs)("div",{className:"pagination",children:[Object(n.jsx)("button",{className:"btn btn-info mx-1 p-1",onClick:function(){return s(0)},disabled:!t,children:Object(n.jsx)(Ee.h,{size:25})}),Object(n.jsx)("button",{className:"btn btn-info mx-1 p-1",onClick:function(){return l()},disabled:!t,children:Object(n.jsx)(Ee.f,{size:25})}),Object(n.jsx)("button",{className:"btn btn-info mx-1 p-1",onClick:function(){return o()},disabled:!a,children:Object(n.jsx)(Ee.g,{size:25})}),Object(n.jsx)("button",{className:"btn btn-info mx-1 p-1",onClick:function(){return s(d-1)},disabled:!a,children:Object(n.jsx)(Ee.i,{size:25})})," ",Object(n.jsxs)("span",{className:"mx-2",style:{alignSelf:"center"},children:["Page"," ",Object(n.jsxs)("strong",{children:[r+1," of ",c.length]})," "]}),Object(n.jsx)("span",{className:"mx-2",style:{alignSelf:"center"},children:"|"}),Object(n.jsxs)("span",{className:"mx-2",style:{alignSelf:"center"},children:["Go to page:"," ",Object(n.jsx)("input",{type:"number",className:"form-control",defaultValue:r+1,onChange:function(e){var t=e.target.value?Number(e.target.value)-1:0;s(t)},style:{width:"70px",display:"inline"}})]})," ",Object(n.jsx)("select",{value:i,className:"form-control",style:{width:"120px",display:"inline"},onChange:function(e){u(Number(e.target.value))},children:[10,20,30,40].map((function(e){return Object(n.jsxs)("option",{value:e,children:["Show ",e]},e)}))})]})},La=function(e){var t=e.isOpen,c=(e.onRequestClose,e.user,Object(r.useState)(Object(at.default)(new Date))),s=Object(ze.a)(c,2),i=s[0],l=s[1],o=Object(r.useState)(Object(qt.default)(new Date)),d=Object(ze.a)(o,2),u=d[0],b=d[1],j=Object(r.useState)([]),m=Object(ze.a)(j,2),p=m[0],h=m[1],O=function(){var e=Object(xe.a)(fe.a.mark((function e(t){var n,r;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a(14),r=JSON.stringify({StartDate:i,EndDate:u}),n({method:"post",url:"http://localhost:5000/api/users/GetAllNotes",headers:{"Content-Type":"application/json"},data:r}).then((function(e){h(e.data)})).catch((function(e){console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){O()}),[]),Object(n.jsx)(mt.a,Object(ce.a)(Object(ce.a)({isOpen:t},e),{},{style:{display:"block",content:{overflow:"visible",height:"87%",width:"76%",margin:"auto",backgroundColor:"white",borderRadius:"20px",borderColor:"transparent"},overlay:{background:"rgb(105 105 105 / 75%)"}},ariaHideApp:!1,contentLabel:"Task Detail",children:Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("fieldset",{style:{borderColor:"red",borderWidth:"4px",borderRadius:"10px"},children:Object(n.jsxs)("div",{style:{margin:"0 auto",marginLeft:"39px"},children:[Object(n.jsx)("div",{style:{marginTop:"20px",marginRight:"40px"},children:Object(n.jsx)(Ee.d,{size:25})}),Object(n.jsxs)("div",{style:{marginLeft:"35px",marginTop:"-22px"},children:[Object(n.jsx)("span",{children:"From:"}),Object(n.jsx)("div",{style:{marginLeft:"48px",marginTop:"-24px"},children:Object(n.jsx)(Ze.a,{selected:i,onChange:function(e){return l(e)},selectsStart:!0,startDate:i,endDate:u})}),Object(n.jsxs)("div",{style:{marginLeft:"235px",marginTop:"-29px"},children:[Object(n.jsx)("span",{children:"To:"}),Object(n.jsx)("div",{style:{marginLeft:"30px",marginTop:"-25px"},children:Object(n.jsx)(Ze.a,{selected:u,onChange:function(e){return b(e)},selectsEnd:!0,startDate:i,endDate:u})}),Object(n.jsx)("div",{style:{marginLeft:"208px",marginTop:"-32px"},children:Object(n.jsx)("button",{className:"btn btn-info mx-1 p-1",onClick:function(){return O()},children:Object(n.jsx)(Ee.g,{})})})]})]})]})}),Object(n.jsx)("br",{}),Object(n.jsx)("body",{style:{width:"1000px",overflow:"scroll",height:"801px"},children:Object(n.jsx)("div",{className:"container",children:Object(n.jsx)("div",{children:Object(n.jsx)("div",{className:"d-flex flex-lg-wrap ",children:null===p||void 0===p?void 0:p.map((function(e){return Object(n.jsxs)(n.Fragment,{children:[null!=e.DateNote.map((function(e){return e.formatDateSis}))?Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{class:"card border-secondary mb-3 col-4 mr-4",style:{maxWidth:"18rem"},children:[Object(n.jsx)("div",{class:"card-header",style:{width:"286px",marginLeft:"-15px"},children:"Today Notes"}),Object(n.jsxs)("div",{class:"card-body",children:[Object(n.jsxs)("div",{style:{fontWeight:"bold"},children:[" ",e._id._id]}),Object(n.jsxs)("div",{style:{display:"flex",fontWeight:"bold",justifyContent:"space-between",borderBottom:"1px solid rgb(128 128 128 / 48%)"},children:[Object(n.jsx)("div",{children:"Note"}),Object(n.jsx)("div",{children:"Time"})]}),null===e||void 0===e?void 0:e.DateNote.filter((function(e){return!e.formatDateSis})).map((function(e){return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",borderBottom:"1px solid #8080802e"},children:[Object(n.jsx)("div",{children:e.note}),Object(n.jsx)("br",{}),Object(n.jsx)("div",{children:(null===e||void 0===e?void 0:e.timestamp)&&Object(We.default)(new Date(null===e||void 0===e?void 0:e.timestamp),"hh:mm aaaa")})]})})})),null!=e.DateNote.map((function(e){return e.formatDateSis}))?Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("p",{class:"card-text",children:Object(n.jsxs)("span",{style:{fontWeight:"bold"},children:["Date:",e._id.timestamp]})})}):""]})]},e._id._id)}):"",null!=e.DateNote.map((function(e){return e.FormatDate}))?Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{class:"card border-secondary mb-3 col-4 mr-4",style:{maxWidth:"18rem"},children:[Object(n.jsx)("div",{class:"card-header",style:{width:"286px",marginLeft:"-15px"},children:"Today Issue Notes"}),Object(n.jsxs)("div",{class:"card-body",children:[Object(n.jsxs)("div",{style:{fontWeight:"bold"},children:[" ",e._id._id]}),Object(n.jsxs)("div",{style:{display:"flex",fontWeight:"bold",justifyContent:"space-between",borderBottom:"1px solid rgb(128 128 128 / 48%)"},children:[Object(n.jsx)("div",{children:"Note"}),Object(n.jsx)("br",{}),Object(n.jsx)("div",{children:"IssueStart"}),Object(n.jsx)("br",{}),Object(n.jsx)("div",{children:" IssueEnd"}),Object(n.jsx)("br",{})]}),null===e||void 0===e?void 0:e.DateNote.filter((function(e){return!e.FormatDate})).map((function(e){return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",borderBottom:"1px solid #8080802e"},children:[Object(n.jsx)("div",{children:e.SisNotes}),Object(n.jsx)("div",{children:e.SisStar}),Object(n.jsx)("br",{}),Object(n.jsx)("div",{children:e.SisEnd})]})})})),Object(n.jsx)("p",{class:"card-text",children:Object(n.jsxs)("span",{style:{fontWeight:"bold"},children:["Date:",e._id.timestamp]})})]})]},e._id._id)}):""]})}))})})})})]})}))},Ma=a(97),Ha=Object(b.b)(null,{saveNoteSis:function(e,t,a,n){return function(){var r=Object(xe.a)(fe.a.mark((function r(c){var s,i;return fe.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,s=JSON.stringify({Id:e,NoteSis:t,HourStar:a,HourdEnd:n}),i={method:"put",url:"/api/users/savedNoteSis",headers:{"Content-Type":"application/json"},data:s},r.next=5,Ne()(i);case 5:r.sent&&c({type:ne,payload:{id:e,note:t,timestamp:new Date}}),r.next=13;break;case 9:r.prev=9,r.t0=r.catch(0),console.log(r.t0),c({type:te});case 13:case"end":return r.stop()}}),r,null,[[0,9]])})));return function(e){return r.apply(this,arguments)}}()},GetLastNoteSis:function(e){return function(){var t=Object(xe.a)(fe.a.mark((function t(a){var n,r,c;return fe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=JSON.stringify({email:e}),r={method:"post",url:"/api/users/GetLastNoteSis",headers:{"Content-Type":"application/json"},data:n},t.next=5,Ne()(r);case 5:return c=t.sent,t.abrupt("return",c.data);case 9:t.prev=9,t.t0=t.catch(0),console.log("please call support",t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},SendNoteBot:Ra})((function(e){var t=e.isOpen,a=e.saveNoteSis,c=e.onRequestClose,s=e.user,i=e.GetLastNoteSis,l=e.SendNoteBot,o=Object(r.useState)([]),d=Object(ze.a)(o,2),u=d[0],b=d[1],j=Object(r.useState)(Object(We.default)(new Date,"hh:mm aaa")),m=Object(ze.a)(j,2),p=m[0],h=m[1],O=Object(r.useState)(!1),g=Object(ze.a)(O,2),v=g[0],f=g[1],x=Object(r.useState)(Object(We.default)(Object(Ma.default)(new Date,10),"hh:mm aaa")),y=Object(ze.a)(x,2),N=y[0],w=y[1],k=Object(r.useState)(!1),S=Object(ze.a)(k,2),C=S[0],D=S[1],T=function(){var e=Object(xe.a)(fe.a.mark((function e(t){var n;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==(n=document.getElementById("dailyNote").value.trim())&&n&&!/^\s*$/.test(n)){e.next=5;break}return alert("La nota esta vacia, No se puede enviar campos vacios "),e.abrupt("return");case 5:a(s._id.email,document.getElementById("dailyNote").value,p,N),l(s.workerLive.name,n),console.log("Modal cerrado"),c();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){(function(){var e=Object(xe.a)(fe.a.mark((function e(){var t;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(s._id.email);case 2:t=e.sent,b(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(n.jsx)(mt.a,Object(ce.a)(Object(ce.a)({isOpen:t},e),{},{style:{display:"block",content:{overflow:"visible",width:"41%",margin:"auto",backgroundColor:"white",borderRadius:"20px",borderColor:"transparent",position:"relative",top:"60px"},overlay:{background:"rgb(105 105 105 / 75%)"}},ariaHideApp:!1,contentLabel:"Task Detail",children:Object(n.jsxs)("form",{onSubmit:T,className:"RootContainer",style:{display:"flex",justifyContent:"center",flexDirection:"column",backgroundColor:"transparent"},children:[Object(n.jsx)("div",{id:"legend",style:{backgroundColor:"transparent",borderRadius:"30px 30px 0px 0px",display:"flex",padding:"0rem"},children:Object(n.jsx)("div",{style:{color:"white",fontSize:"200%",backgroundColor:"#033c73",borderRadius:"10px",margin:"auto",padding:"auto",alignSelf:"center"}})}),(null===u||void 0===u?void 0:u.length)>0?null===u||void 0===u?void 0:u.map((function(e){return Object(n.jsxs)("div",{class:"card border-secondary",children:[Object(n.jsx)("div",{class:"card-header",children:"Today Issue "}),Object(n.jsxs)("div",{class:"card-body",children:[Object(n.jsxs)("div",{style:{fontWeight:"bold"},children:[" ",s._id.email]}),Object(n.jsxs)("div",{style:{display:"flex",fontWeight:"bold",justifyContent:"space-between",borderBottom:"1px solid rgb(128 128 128 / 48%)"},children:[Object(n.jsx)("div",{children:"Note"}),Object(n.jsx)("div",{children:"Time"}),Object(n.jsx)("div",{children:"Issue Start"}),Object(n.jsx)("div",{children:" Issue End"})]}),null===e||void 0===e?void 0:e.lastNote.map((function(e){return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",borderBottom:"1px solid #8080802e"},children:[Object(n.jsx)("div",{children:e.note}),Object(n.jsx)("div",{children:(null===e||void 0===e?void 0:e.timestamp)&&Object(We.default)(new Date(null===e||void 0===e?void 0:e.timestamp),"hh:mm aaaa")}),Object(n.jsx)("div",{children:e.start}),Object(n.jsx)("div",{children:e.end})]})})}))]})]},e._id)})):"",Object(n.jsxs)("div",{className:"InputContainer",style:{backgroundColor:"white",display:"flex",padding:"1rem",margin:"0.5rem",borderRadius:"10px",flexDirection:"column"},children:[Object(n.jsx)("label",{htmlFor:"dailyNote",style:{textAlign:"center",borderBottom:"solid",alignSelf:"center",fontSize:"1.5rem",padding:"0.5rem"},children:"Issue Note"}),Object(n.jsx)("textarea",{type:"text",id:"dailyNote",name:"dailyNote",placeholder:"Insert note..",style:{alignSelf:"center",width:"100.5%",height:"100px",margin:"auto",borderColor:"rgb(206 204 204 / 48%)"}}),Object(n.jsxs)("div",{className:"row",children:[Object(n.jsx)("div",{className:"col-md-4",children:Object(n.jsxs)("div",{className:"form-group",style:{display:"flex",flexDirection:"column",marginLeft:"-22px"},children:[Object(n.jsx)("label",{className:"col-form-label font-weight-bold",children:"Start"}),v?Object(n.jsx)("div",{style:{marginTop:"56px"},children:Object(n.jsx)(ua.a,{time:p,onChange:function(e){return h(e.formatted12)},onDoneClick:function(){return f(!1)}})}):Object(n.jsx)("h1",{onClick:function(){return f(!0)},style:{cursor:"pointer"},children:null!=p?p:Object(We.default)(new Date,"hh:mm aaaa")})]})}),Object(n.jsx)("div",{className:"col-md-4",children:Object(n.jsxs)("div",{className:"form-group",style:{display:"flex",flexDirection:"column",marginLeft:"141px"},children:[Object(n.jsx)("label",{className:"col-form-label font-weight-bold",children:"End"}),C?Object(n.jsx)("div",{style:{marginTop:"56px"},children:Object(n.jsx)(ua.a,{time:N,onChange:function(e){return w(e.formatted12)},onDoneClick:function(){return D(!1)}})}):Object(n.jsx)("h1",{onClick:function(){return D(!0)},style:{cursor:"pointer"},children:null!=N?N:Object(We.default)(new Date,"hh:mm aaaa")})]})})]}),Object(n.jsx)("button",{type:"submit",className:"btn btn-success",style:{fontSize:"1.2rem",alignSelf:"center",margin:"2rem auto auto auto",padding:"0.3rem",width:"100%",color:"white"},children:"Submit"})]})]})}))})),_a=Object(b.b)(null,{saveNote:function(e,t){return function(){var a=Object(xe.a)(fe.a.mark((function a(n){var r,c;return fe.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r=JSON.stringify({Id:e,dailyNotes:t}),c={method:"put",url:"/api/users/savedNote",headers:{"Content-Type":"application/json"},data:r},a.next=5,Ne()(c);case 5:a.sent&&n({type:ae,payload:{id:e,note:t,timestamp:new Date}}),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0),n({type:te});case 13:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e){return a.apply(this,arguments)}}()},GetLastNote:function(e){return function(){var t=Object(xe.a)(fe.a.mark((function t(a){var n,r,c;return fe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=JSON.stringify({email:e}),r={method:"post",url:"/api/users/GetLastNote",headers:{"Content-Type":"application/json"},data:n},t.next=5,Ne()(r);case 5:return c=t.sent,t.abrupt("return",c.data);case 9:t.prev=9,t.t0=t.catch(0),console.log("please call support",t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},SendNoteBot:Ra})((function(e){var t=e.isOpen,a=e.saveNote,c=e.onRequestClose,s=e.user,i=e.GetLastNote,l=e.SendNoteBot,o=Object(r.useState)([]),d=Object(ze.a)(o,2),u=d[0],b=d[1],j=function(){var e=Object(xe.a)(fe.a.mark((function e(t){var n;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==(n=document.getElementById("dailyNote").value.trim())&&n&&!/^\s*$/.test(n)){e.next=5;break}return alert("La nota esta vacia, No se puede enviar campos vacios "),e.abrupt("return");case 5:a(s._id.email,document.getElementById("dailyNote").value),l(s.workerLive.name,n,Object(We.default)(new Date,"hh:mm aaaa")),console.log("Modal cerrado"),c();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){(function(){var e=Object(xe.a)(fe.a.mark((function e(){var t;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(s._id.email);case 2:t=e.sent,b(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(n.jsx)(mt.a,Object(ce.a)(Object(ce.a)({isOpen:t},e),{},{style:{display:"block",content:{overflow:"visible",width:"41%",margin:"auto",backgroundColor:"white",borderRadius:"20px",borderColor:"transparent",position:"relative",top:"60px"},overlay:{background:"rgb(105 105 105 / 75%)"}},ariaHideApp:!1,contentLabel:"Task Detail",children:Object(n.jsxs)("form",{onSubmit:j,className:"RootContainer",style:{display:"flex",justifyContent:"center",flexDirection:"column",backgroundColor:"transparent"},children:[Object(n.jsx)("div",{id:"legend",style:{backgroundColor:"transparent",borderRadius:"30px 30px 0px 0px",display:"flex",padding:"0rem"},children:Object(n.jsx)("div",{style:{color:"white",fontSize:"200%",backgroundColor:"#033c73",borderRadius:"10px",margin:"auto",padding:"auto",alignSelf:"center"}})}),(null===u||void 0===u?void 0:u.length)>0?null===u||void 0===u?void 0:u.map((function(e){return Object(n.jsxs)("div",{class:"card border-secondary",children:[Object(n.jsx)("div",{class:"card-header",children:"Today Notes"}),Object(n.jsxs)("div",{class:"card-body",children:[Object(n.jsxs)("div",{style:{fontWeight:"bold"},children:[" ",s._id.email]}),Object(n.jsxs)("div",{style:{display:"flex",fontWeight:"bold",justifyContent:"space-between",borderBottom:"1px solid rgb(128 128 128 / 48%)"},children:[Object(n.jsx)("div",{children:"Note"}),Object(n.jsx)("div",{children:"Time"})]}),null===e||void 0===e?void 0:e.lastNote.map((function(e){return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",borderBottom:"1px solid #8080802e"},children:[Object(n.jsx)("div",{children:e.note}),Object(n.jsx)("div",{children:(null===e||void 0===e?void 0:e.timestamp)&&Object(We.default)(new Date(null===e||void 0===e?void 0:e.timestamp),"hh:mm aaaa")})]})})}))]})]},e._id)})):"",Object(n.jsxs)("div",{className:"InputContainer",style:{backgroundColor:"white",display:"flex",padding:"1rem",margin:"0.5rem",borderRadius:"10px",flexDirection:"column"},children:[Object(n.jsx)("label",{htmlFor:"dailyNote",style:{textAlign:"center",borderBottom:"solid",alignSelf:"center",fontSize:"1.5rem",padding:"0.5rem"},children:"Daily Note"}),Object(n.jsx)("textarea",{type:"text",id:"dailyNote",name:"dailyNote",placeholder:"Insert note..",style:{alignSelf:"center",width:"100.5%",height:"120px",margin:"auto",borderColor:"rgb(206 204 204 / 48%)"}}),Object(n.jsx)("button",{type:"submit",className:"btn btn-success",style:{fontSize:"1.2rem",alignSelf:"center",margin:"2rem auto auto auto",padding:"0.3rem",width:"100%",color:"white"},children:"Submit"})]})]})}))})),za=a(65),Fa=function(e){var t=e.workersLive,a=Object(r.useState)(!1),s=Object(ze.a)(a,2),i=s[0],l=s[1],o=Object(r.useState)(!1),d=Object(ze.a)(o,2),u=d[0],b=d[1],j=Object(r.useState)(null),m=Object(ze.a)(j,2),p=m[0],h=m[1],O=Object(r.useState)(!1),g=Object(ze.a)(O,2),v=g[0],f=g[1],x=Object(r.useState)(null),y=Object(ze.a)(x,2),N=y[0],w=y[1],k=Object(r.useState)({value:"All",label:"All"}),S=Object(ze.a)(k,2),C=S[0],D=S[1],T=Object(r.useState)([]),E=Object(ze.a)(T,2),P=E[0],A=E[1],R=c.a.useMemo((function(){return t.filter((function(e){return"clockin"!=C.value?"clockout"==C.value?0==Object(za.a)(new Date(e.workerLive.timestamp))?"clockout"===e.workerLive.activity||"clockin"===e.workerLive.activity:"clockout"===e.workerLive.activity:"awayIn"==C.value?"awayIn"===e.workerLive.activity:"breakIn"==C.value?"breakIn"===e.workerLive.activity:e:0!=Object(za.a)(new Date(e.workerLive.timestamp))?"clockin"===e.workerLive.activity||"awayOut"===e.workerLive.activity||"breakOut"===e.workerLive.activity:void 0}))}),[C,t]);Object(r.useEffect)((function(){var e=[{value:"clockin",label:" Working : ".concat(t.filter((function(e){return"clockin"===e.workerLive.activity||"awayOut"===e.workerLive.activity||"breakOut"===e.workerLive.activity})).filter((function(e){return 0!=Object(za.a)(new Date(e.workerLive.timestamp))})).length)},{value:"clockout",label:"Out : ".concat(t.filter((function(e){return"clockout"==e.workerLive.activity||0==Object(za.a)(new Date(e.workerLive.timestamp))})).length)},{value:"awayIn",label:"Away : ".concat(t.filter((function(e){return"awayIn"===e.workerLive.activity})).length)},{value:"breakIn",label:"Break : ".concat(t.filter((function(e){return"breakIn"===e.workerLive.activity})).length)},{value:"All",label:"All : ".concat(t.length)}];A(e),D(e.find((function(e){return e.value===C.value})))}),[t]);var I=c.a.useMemo((function(){return[{Header:"Name",accessor:"workerLive.name"},{Header:"Schedule Start",accessor:"workerLive.schedule",Cell:function(e){var t,a=e.value;return a&&a[Object(We.default)(new Date,"EEEE").toLowerCase()]?null===(t=a[Object(We.default)(new Date,"EEEE").toLowerCase()])||void 0===t?void 0:t.scheduleStart:"N/A"}},{Header:"Schedule End",id:2,accessor:"workerLive.schedule",Cell:function(e){var t,a=e.value;return a&&a[Object(We.default)(new Date,"EEEE").toLowerCase()]?null===(t=a[Object(We.default)(new Date,"EEEE").toLowerCase()])||void 0===t?void 0:t.scheduleEnd:"N/A"}},{Header:"Status",accessor:"workerLive.activity",Cell:function(e){var t=e.row.original.workerLive;return 0==Object(za.a)(new Date(t.timestamp))?Object(n.jsx)("div",{className:"badge badge-danger",style:{fontSize:"15px",backgroundColor:"Red"},children:"Out"}):"clockin"===t.activity||"awayOut"===t.activity||"breakOut"===t.activity?Object(n.jsx)("div",{className:"badge badge-success",style:{fontSize:"15px",backgroundColor:"green"},children:"Working"}):"breakIn"===t.activity?Object(n.jsx)("div",{className:"badge badge-warning",style:{fontSize:"15px",backgroundColor:"orange"},children:"Break"}):"awayIn"===t.activity?Object(n.jsx)("div",{className:"badge badge-warning",style:{fontSize:"15px",backgroundColor:"goldenrod"},children:"Away"}):"clockout"===t.activity?Object(n.jsx)("div",{className:"badge badge-danger",style:{fontSize:"15px",backgroundColor:"Red"},children:"Out"}):null===t||void 0===t?void 0:t.activity}},{Header:"Last Updated",accessor:"workerLive.timestamp",Cell:function(e){var t=e.row.original.workerLive;return"".concat(Object(We.default)(new Date(t.timestamp),"MMM do y - HH:mm a"))}},{Header:"Notas",accessor:"workerLive.dailyNotes",Cell:function(e){var t=e.row.original.workerLive;return!!((null===t||void 0===t?void 0:t.dailyNotes)&&t.dailyNotes.length>0&&void 0!=t.dailyNotes[t.dailyNotes.length-1].note&&1==Object(za.a)(new Date(t.dailyNotes[t.dailyNotes.length-1].timestamp)))&&t.dailyNotes[t.dailyNotes.length-1].note}},{Header:"Notas System isue",accessor:"workerLive.sisNotes",Cell:function(e){var t=e.row.original.workerLive;return!!((null===t||void 0===t?void 0:t.sisNotes)&&t.sisNotes.length>0&&void 0!=t.sisNotes[t.sisNotes.length-1].note&&1==Object(za.a)(new Date(t.sisNotes[t.sisNotes.length-1].timestamp)))&&t.sisNotes[t.sisNotes.length-1].note}},{id:"edit",width:20,Cell:function(e){var t=e.row.original;return Object(n.jsx)(Ee.m,{onClick:function(){w(t),l(!0)},style:{cursor:"pointer"},size:20})}},{id:"edit2",width:20,Cell:function(e){var t=e.row.original;return Object(n.jsx)(Ee.b,{onClick:function(){h(t),f(!0)},style:{cursor:"pointer"},size:20})}}]}),[]),L=Object(Le.useTable)({columns:I,data:R,initialState:{pageSize:20}},Le.useSortBy,Le.usePagination),M=L.getTableProps,H=L.getTableBodyProps,_=L.headerGroups,z=L.prepareRow,F=L.page,W=L.canPreviousPage,B=L.canNextPage,G=L.pageOptions,U=L.pageCount,V=L.gotoPage,q=L.nextPage,J=L.previousPage,Q=L.setPageSize,Y=L.state,K=Y.pageIndex,X=Y.pageSize;return Object(n.jsxs)("div",{children:[Object(n.jsxs)("button",{className:"btn btn-info mx-1 p-1",onClick:function(){return b(!0)},children:["All Notes ",Object(n.jsx)(Ee.n,{})]}),Object(n.jsx)("div",{style:{width:"184px",marginLeft:"117px",marginTop:"-36px"},children:Object(n.jsx)($e.a,{className:"select",placeholder:"Show...",value:C,onChange:function(e){return D(e)},options:P,style:{}})}),Object(n.jsx)("br",{}),Object(n.jsxs)("table",Object(ce.a)(Object(ce.a)({},M()),{},{className:"table table-hover",children:[Object(n.jsx)("thead",{className:"bg-dark text-white",children:_.map((function(e){return Object(n.jsx)("tr",Object(ce.a)(Object(ce.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(n.jsxs)("th",Object(ce.a)(Object(ce.a)({},e.getHeaderProps(e.getSortByToggleProps())),{},{children:[e.render("Header"),Object(n.jsx)("span",{children:e.isSorted?e.isSortedDesc?" \ud83d\udd3b":" \ud83d\udd3a":""})]}))}))}))}))}),Object(n.jsx)("tbody",Object(ce.a)(Object(ce.a)({},H()),{},{children:F.map((function(e,t){return z(e),Object(n.jsx)("tr",Object(ce.a)(Object(ce.a)({},e.getRowProps()),{},{children:e.cells.map((function(e){return Object(n.jsx)("td",Object(ce.a)(Object(ce.a)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))}))]})),U>1&&Object(n.jsx)("div",{className:"d-flex justify-content-center",children:Object(n.jsx)(Ia,{canPreviousPage:W,canNextPage:B,pageIndex:K,pageOptions:G,gotoPage:V,pageSize:X,previousPage:J,nextPage:q,pageCount:U,setPageSize:Q})}),i&&Object(n.jsx)(_a,{isOpen:i,onRequestClose:function(){return l(!1)},user:N}),v&&Object(n.jsx)(Ha,{isOpen:v,onRequestClose:function(){return f(!1)},user:p}),u&&Object(n.jsx)(La,{isOpen:u,onRequestClose:function(){return b(!1)}})]})},Wa=Object(b.b)((function(e){return{workersLive:e.workersLive.logs}}),{getWorkersLive:function(){return function(){var e=Object(xe.a)(fe.a.mark((function e(t){var a;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:T}),e.next=4,Ne.a.get("/api/timelog/workersLive");case 4:a=e.sent,t({type:$,payload:a.data}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),t({type:te});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},modifyStatus:function(e,t){return function(){var a=Object(xe.a)(fe.a.mark((function a(n){return fe.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:try{n({type:ee,payload:{user:e,activity:t}})}catch(r){console.log(r)}case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}})((function(e){var t=e.workersLive,a=e.getWorkersLive,c=e.modifyStatus,s=(Object(r.useRef)(!0),Object(r.useState)(!1)),i=Object(ze.a)(s,2),l=(i[0],i[1],Object(r.useState)(null)),o=Object(ze.a)(l,2),d=o[0],b=o[1];return u.on("statusActivity",(function(e){b(e)})),Object(r.useEffect)((function(){null!=d&&c(d.user,d.activity)}),[d]),Object(r.useEffect)((function(){a()}),[]),Object(n.jsxs)("div",{className:"container-fluid",children:[Object(n.jsx)(Aa,{}),Object(n.jsx)(Fa,{workersLive:t})]})})),Ba=[{value:"Adelanto de pago",label:"01-ADELANTO DE PAGO"},{value:"Solicitud de informaci\xf3n",label:"02-SOLICITUD DE INFORMACION"},{value:"Reagendo para despues",label:"03-REAGENDO PARA DESPUES"},{value:"Cambio de cuenta bancaria",label:"04-CAMBIO DE CUENTA BANCARIA CON AVANCE ACTIVO"},{value:"Declinaciones con los pagos",label:"05-DECLINACIONES CON LOS PAGOS"},{value:"Repetici\xf3n",label:"06-REPETICION"},{value:"Escalaci\xf3n",label:"07-ESCALACION"},{value:"Reevaluacion",label:"08-REEVALUACION"},{value:"Completar cuenta",label:"09-COMPLETAR CUENTA"},{value:"Inconvenientes con la creaci\xf3n de cuenta",label:"10-INCONVENIENTES CON CREACION DE CUENTA"},{value:"Invitacion",label:"11-INVITACION"},{value:"Inconvenientes vinculando el banco",label:"12-INCONVENIENTES VINCULADO DEL BANCO"},{value:"Solicitud de avance",label:"13-SOLICITUD DE AVANCE"},{value:"Cliente que no calific\xf3",label:"14-CLIENTE NO CALIFICO (INFORMACION)"},{value:"Voicemail",label:"15-VOICEMAIL"},{value:"Auditoria de licencia",label:"16-AUDITORIA"},{value:"Cambio de contrase\xf1a",label:"17-CAMBIO DE CONTRASE\xd1A UALETT"},{value:"Callback",label:"18-CALLBACK"},{value:"Deposito directo",label:"19-DEPOSITO DIRECTO"},{value:"Eliminacion de cuenta Ualett",label:"20-ELIMINACION DE CUENTA UALETT"},{value:"Actualizacion de Datos personales",label:"21-ACTUALIZACION DE DATOS PERSONALES"},{value:"Declinaciones que no son R1",label:"23-DECLINACIONES QUE NO SON R1"}],Ga="/api/users/emails",Ua={content:{overflow:"visible",margin:"auto",width:"35%",height:"45%",border:"5px solid navy",padding:"20px"}},Va=[{value:"english",label:"English"},{value:"spanish",label:"Spanish"}];mt.a.setAppElement("#root");var qa=function(e){var t=e.id,a=e.text,c=e.phone,s=e.name,i=e.setCallBacks,l=e.setIsOpen,o=e.modalIsOpen,d=Object(r.useState)(""),u=Object(ze.a)(d,2),b=u[0],j=u[1],m=Object(r.useState)(""),p=Object(ze.a)(m,2),h=p[0],O=p[1],g=Object(r.useState)([]),v=Object(ze.a)(g,2),f=v[0],x=v[1],y=Object(r.useState)([]),N=Object(ze.a)(y,2),w=N[0],k=N[1],S=Object(r.useState)(!0),C=Object(ze.a)(S,2),D=C[0],T=C[1],E=Object(r.useState)(!1),P=Object(ze.a)(E,2),A=P[0],R=P[1],I=function(){var e=Object(xe.a)(fe.a.mark((function e(){var a,n;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f&&h&&0!==f.length){e.next=4;break}return R(!0),setTimeout((function(){R(!1)}),3e3),e.abrupt("return");case 4:a=JSON.stringify({assignedTo:f.label,tag:h.label,assignationTime:new Date}),n={method:"put",url:"/api/twilio/callback/".concat(t),headers:{"Content-Type":"application/json"},data:a},Ne()(n).then((function(){L()})).catch((function(e){console.log(e)}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e={method:"post",url:"/api/twilio/callback",headers:{"Content-Type":"application/json"},data:JSON.stringify({name:s,text:a,phone:c,email:f.label,tag:h.label,language:b.label})};Ne()(e).then((function(){H(),i((function(e){return e.filter((function(e){return e._id!==t}))})),x(""),O("")})).catch((function(e){console.log(e)}))},M=w.map((function(e){return e.label=e.email,e}));function H(){x([]),O(""),l(!1)}return Object(r.useEffect)((function(){function e(){return(e=Object(xe.a)(fe.a.mark((function e(){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne.a.get(Ga).then((function(e){k(e.data),T(!1)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}D&&function(){e.apply(this,arguments)}()}),[]),Object(n.jsx)(mt.a,{isOpen:o,onRequestClose:H,style:Ua,children:Object(n.jsxs)("div",{children:[Object(n.jsxs)("form",{children:[Object(n.jsx)("h3",{className:"mt-2 text-center",style:{color:"navy"},children:"Select Member"}),Object(n.jsx)($e.a,{className:"mt-2",value:f,onChange:function(e){return x(e)},options:M}),Object(n.jsx)("h3",{className:"text-center mt-4",style:{color:"navy"},children:"Select Tag"}),Object(n.jsx)($e.a,{className:"mt-2",value:h,onChange:function(e){return O(e)},options:Ba}),Object(n.jsx)("h3",{className:"text-center mt-4",style:{color:"navy"},children:"Select Language"}),Object(n.jsx)($e.a,{className:"mt-2",value:b,onChange:function(e){return j(e)},options:Va})]}),!0===A&&Object(n.jsx)("div",{style:{height:"0px"},children:Object(n.jsx)("p",{className:"text-danger text-center",style:{color:"navy"},children:"Debe completar ambos campos"})}),Object(n.jsxs)("div",{style:{display:"flex",marginTop:"30px"},children:[Object(n.jsx)("button",{type:"button",style:{margin:"auto",width:"35%",height:"35%",padding:"10px"},className:"btn btn-info",onClick:I,children:"Assign"}),Object(n.jsx)("button",{type:"submit",style:{margin:"auto",width:"35%",height:"35%",padding:"10px"},className:"btn btn-danger",onClick:H,children:"Close"})]})]})})},Ja=a(153),Qa=a(233),Ya=function(e){var t=e.callBacks,a=e.setCallBacks,c=Object(r.useState)(!1),s=Object(ze.a)(c,2),i=s[0],l=s[1],o=Object(r.useState)([]),d=Object(ze.a)(o,2),u=d[0],b=d[1],j=Object(r.useMemo)((function(){return t.filter((function(e){if(!e.assignedTo)return e}))||[]}),[t]),m=function(){var e=Object(xe.a)(fe.a.mark((function e(t){var n,r;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=JSON.stringify({assignedTo:"INVALID",tag:"INVALID",assignationTime:new Date}),r={method:"put",url:"/api/twilio/callback/".concat(t),headers:{"Content-Type":"application/json"},data:n},Ne()(r).then((function(e){a((function(e){return e.filter((function(e){return e._id!==t}))}))})).catch((function(e){console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=[{width:"10%",Header:"NAME",accessor:"name"},{width:"10%",Header:"PHONE",accessor:"phone",Cell:function(e){return e.value}},{width:"30%",Header:"REASON",accessor:"text"},{width:"10%",Header:"CALLER ID",accessor:"callerID",Cell:function(e){return e.value}},{width:"10%",Header:"REQUEST TIME",accessor:"requestTime",Cell:function(e){var t=e.value;return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("span",{children:Object(We.default)(new Date(t),"dd/MM/yyyy hh:mm:ss aaaa")})})}},{width:"10%",Header:"ACTIONS",accessor:"actions",Cell:function(e){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("button",{type:"button",className:"btn btn-info",onClick:function(){l(!0),b(e.row.original)},children:Object(n.jsx)(Ja.a,{size:20})}),Object(n.jsx)("button",{type:"button",className:"btn btn-danger ml-2",onClick:function(t){Tt.a.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes,invalid!"}).then((function(t){t.isConfirmed&&(m(e.row.original._id),Tt.a.fire("Deleted!","Your file has been deleted.","success"))}))},children:Object(n.jsx)(Qa.a,{size:20})})]})}}],h=Object(r.useMemo)((function(){return p}),[]),O=Object(Le.useTable)({columns:h,data:j},Le.useGlobalFilter,Le.usePagination),g=O.getTableProps,v=O.getTableBodyProps,f=O.headerGroups,x=O.page,y=O.state,N=O.prepareRow,w=O.pageOptions,k=O.gotoPage,S=O.canPreviousPage,C=O.previousPage,D=O.nextPage,T=O.canNextPage,E=O.pageCount,P=y.pageIndex;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{className:"mb-2",style:{width:"280px"}}),0===j.length?Object(n.jsx)("center",{children:Object(n.jsx)("h1",{style:{color:"navy"},children:"No content to display..."})}):Object(n.jsxs)("table",Object(ce.a)(Object(ce.a)({},g()),{},{className:"table table-hover",children:[Object(n.jsx)("thead",{children:f.map((function(e){return Object(n.jsx)("tr",Object(ce.a)(Object(ce.a)({},e.getHeaderGroupProps()),{},{style:{color:"white"},className:"bg-dark",children:e.headers.map((function(e){return Object(n.jsx)("th",Object(ce.a)(Object(ce.a)({},e.getHeaderProps()),{},{children:e.render("Header")}))}))}))}))}),Object(n.jsx)("tbody",Object(ce.a)(Object(ce.a)({},v()),{},{children:x.map((function(e){return N(e),Object(n.jsx)("tr",Object(ce.a)(Object(ce.a)({},e.getRowProps()),{},{children:e.cells.map((function(e){return Object(n.jsx)("td",Object(ce.a)(Object(ce.a)({style:{width:e.column.width}},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))}))]})),0!==j.length&&Object(n.jsxs)("div",{className:"d-flex justify-content-end mt-2",children:[Object(n.jsxs)("span",{className:"mr-3 mt-1",children:["Page"," ",Object(n.jsxs)("strong",{children:[P+1," of ",w.length]}),"  "]}),Object(n.jsx)("button",{className:"mr-2",style:{border:"0",overflow:"visible",background:"none",height:"30px",width:"30px"},onClick:function(){return k(0)},disabled:!S,children:"<<"}),Object(n.jsx)("button",{className:"mr-2",style:{border:"0",overflow:"visible",background:"none",height:"30px",width:"30px"},onClick:function(){return C()},disabled:!S,children:"<"}),Object(n.jsx)("button",{className:"mr-2",style:{border:"0",overflow:"visible",background:"none",height:"30px",width:"30px"},onClick:function(){return D()},disabled:!T,children:">"}),Object(n.jsx)("button",{className:"mr-2",style:{border:"0",overflow:"visible",background:"none",height:"30px",width:"30px"},onClick:function(){return k(E-1)},disabled:!T,children:">>"})]}),!0===i&&Object(n.jsx)(qa,{setIsOpen:l,modalIsOpen:i,setCallBacks:a,name:u.name,text:u.text,phone:u.phone,id:u._id})]})},Ka=a(234),Xa=function(e){var t=e.callBacks,a=e.setCallBacks,c=Object(r.useMemo)((function(){return t.filter((function(e){if(e.assignedTo)return e}))||[]}),[t]),s=function(){var e=Object(xe.a)(fe.a.mark((function e(){var t,a,n;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=c.map((function(e){return{Name:e.name,Phone:e.phone,Reason:e.text,CallerID:e.callerID,RequestTime:Object(We.default)(new Date(e.requestTime),"dd/MM/yyyy hh:mm:ss aaaa"),AssignationTime:Object(We.default)(new Date(e.assignationTime),"dd/MM/yyyy hh:mm:ss aaaa"),Tag:e.tag,AssignedTo:e.assignedTo}})),a=rt.a.utils.json_to_sheet(t),n=rt.a.utils.book_new(),rt.a.utils.book_append_sheet(n,a,"Lista"),rt.a.writeFile(n,"Data importada.xlsx");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=Object(r.useState)(Object(at.default)(new Date)),l=Object(ze.a)(i,2),o=l[0],d=l[1],u=Object(r.useState)(Object(qt.default)(new Date)),b=Object(ze.a)(u,2),j=b[0],m=b[1];return Object(n.jsx)("div",{className:"row",style:{display:"flex",justifyContent:"flex-start"},children:Object(n.jsxs)("div",{className:"DateFilterContainer",style:{display:"flex",width:"50%",flexwrap:"nowrap",minWidth:"auto",justifyContent:"space-between",marginLeft:"1rem",paddingRight:"1rem"},children:[Object(n.jsx)("span",{style:{margin:"10px 1rem 0rem 10px"},children:"From:"}),Object(n.jsx)(Ze.a,{selected:o,onChange:function(e){return d(e)},dateFormat:"MMMM d, yyyy",className:"form-control"}),Object(n.jsx)("span",{style:{margin:"10px 1rem 0rem 1rem"},children:"To:"}),Object(n.jsx)(Ze.a,{selected:j,style:{},onChange:function(e){return m(e)},dateFormat:"MMMM d, yyyy",className:"form-control"}),Object(n.jsxs)("div",{className:"btn-container",style:{display:"flex",flexwrap:"nowrap",alignItems:"flex-start",width:"50%"},children:[Object(n.jsx)("button",{style:{display:"inline",alignSelf:"flex-start",marginLeft:"0rem",marginRight:"1rem",padding:"0.3rem 1.5rem"},className:"btn btn-info ml-2",onClick:function(){return function(){var e={method:"get",url:"/api/twilio/callback/".concat(o,"/").concat(j)};Ne()(e).then((function(e){a(e.data.callback)})).catch((function(e){console.log(e)}))}()},children:Object(n.jsx)(Ee.g,{style:{},size:25})}),Object(n.jsx)("button",{style:{display:"inline",alignSelf:"flex-start",marginLeft:"0rem",marginRight:"1rem",padding:"0.3rem 1.5rem",backgroundColor:"#00820E"},className:"btn",onClick:function(){return s()},children:Object(n.jsx)(Ka.a,{style:{color:"white"},size:22})})]})]})})},Za=function(){var e=Object(r.useState)(Object(at.default)(new Date)),t=Object(ze.a)(e,2),a=t[0],c=(t[1],Object(r.useState)(new Date)),s=Object(ze.a)(c,2),i=s[0],l=(s[1],"/api/twilio/callback/".concat(a,"/").concat(i)),o=Object(r.useState)(!0),d=Object(ze.a)(o,2),u=d[0],b=d[1],j=Object(r.useState)([]),m=Object(ze.a)(j,2),p=m[0],h=m[1];Object(r.useEffect)((function(){function e(){return(e=Object(xe.a)(fe.a.mark((function e(){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne.a.get(l).then((function(e){h(e.data.callback),b(!1)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}u&&function(){e.apply(this,arguments)}()}),[]);var O=Object(r.useMemo)((function(){return p.filter((function(e){if(e.assignedTo)return e}))||[]}),[p]),g=[{width:"10%",Header:"NAME",accessor:"name"},{width:"10%",Header:"PHONE",accessor:"phone",Cell:function(e){return e.value}},{width:"30%",Header:"REASON",accessor:"text"},{width:"10%",Header:"CALLER ID",accessor:"callerID",Cell:function(e){return e.value}},{width:"11%",Header:"REQUEST TIME",accessor:"requestTime",Cell:function(e){var t=e.value;return Object(n.jsx)("span",{children:Object(We.default)(new Date(t),"dd/MM/yyyy hh:mm:ss aaaa")})}},{width:"10%",Header:"ASSIGNATION TIME",accessor:"assignationTime",Cell:function(e){var t=e.value;return Object(n.jsx)("span",{children:Object(We.default)(new Date(t),"dd/MM/yyyy hh:mm:ss aaaa")})}},{width:"10%",Header:"TAG",accessor:"tag"},{width:"10%",Header:"ASSIGNED TO",accessor:"assignedTo"}],v=Object(r.useMemo)((function(){return g}),[]),f=Object(Le.useTable)({columns:v,data:O},Le.useGlobalFilter,Le.usePagination),x=f.getTableProps,y=f.getTableBodyProps,N=f.headerGroups,w=f.page,k=f.state,S=f.prepareRow,C=f.pageOptions,D=f.gotoPage,T=f.canPreviousPage,E=f.previousPage,P=f.nextPage,A=f.canNextPage,R=f.pageCount,I=k.pageIndex;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(Xa,{callBacks:p,setCallBacks:h}),Object(n.jsx)("div",{className:"mb-2",style:{width:"280px"}}),Object(n.jsxs)("table",Object(ce.a)(Object(ce.a)({},x()),{},{className:"table table-hover",children:[Object(n.jsx)("thead",{children:N.map((function(e){return Object(n.jsx)("tr",Object(ce.a)(Object(ce.a)({},e.getHeaderGroupProps()),{},{style:{color:"white"},className:"bg-dark",children:e.headers.map((function(e){return Object(n.jsx)("th",Object(ce.a)(Object(ce.a)({},e.getHeaderProps()),{},{children:e.render("Header")}))}))}))}))}),Object(n.jsx)("tbody",Object(ce.a)(Object(ce.a)({},y()),{},{children:w.map((function(e){return S(e),Object(n.jsx)("tr",Object(ce.a)(Object(ce.a)({},e.getRowProps()),{},{children:e.cells.map((function(e){return Object(n.jsx)("td",Object(ce.a)(Object(ce.a)({style:{width:e.column.width}},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))}))]})),0===O.length?Object(n.jsx)("center",{children:Object(n.jsx)("h1",{style:{color:"navy"},children:"No content to display..."})}):Object(n.jsxs)("div",{className:"d-flex justify-content-end mt-2",children:[Object(n.jsxs)("span",{className:"mr-3 mt-1",children:["Page"," ",Object(n.jsxs)("strong",{children:[I+1," Of ",C.length]}),"  "]}),Object(n.jsx)("button",{className:"mr-2",style:{border:"0",overflow:"visible",background:"none",height:"30px",width:"30px"},onClick:function(){return D(0)},disabled:!T,children:"<<"}),Object(n.jsx)("button",{className:"mr-2",style:{border:"0",overflow:"visible",background:"none",height:"30px",width:"30px"},onClick:function(){return E()},disabled:!T,children:"<"}),Object(n.jsx)("button",{className:"mr-2",style:{border:"0",overflow:"visible",background:"none",height:"30px",width:"30px"},onClick:function(){return P()},disabled:!A,children:">"}),Object(n.jsx)("button",{className:"mr-2",style:{border:"0",overflow:"visible",background:"none",height:"30px",width:"30px"},onClick:function(){return D(R-1)},disabled:!A,children:">>"})]})]})},$a=a(78),en=(a(420),"/api/twilio/callback"),tn=function(){var e=Object(r.useState)(!0),t=Object(ze.a)(e,2),a=t[0],c=t[1],s=Object(r.useState)([]),i=Object(ze.a)(s,2),l=i[0],o=i[1],d=Object(r.useMemo)((function(){return l.filter((function(e){if(!e.assignedTo)return e}))||[]}),[l]);return Object(r.useEffect)((function(){u.on("call",(function(e){o((function(t){return[].concat(Object(h.a)(t),[e])}))}))}),[]),Object(r.useEffect)((function(){function e(){return(e=Object(xe.a)(fe.a.mark((function e(){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne.a.get(en).then((function(e){o(e.data.callback),c(!1)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}a&&function(){e.apply(this,arguments)}()}),[]),Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("div",{className:"container-fluid",children:Object(n.jsxs)($a.d,{children:[Object(n.jsxs)($a.b,{style:{fontWeight:"bold"},children:[Object(n.jsxs)($a.a,{children:["Dashboard (",d.length,")"]}),Object(n.jsx)($a.a,{children:"Costumer Attendant"})]}),Object(n.jsx)($a.c,{children:Object(n.jsx)(Ya,{callBacks:l,setCallBacks:o})}),Object(n.jsx)($a.c,{children:Object(n.jsx)(Za,{})})]})})})};localStorage.token&&Se(localStorage.token),u.on("connection",(function(){console.log("I'm connected with the back-end")}));var an=function(){return Object(r.useEffect)((function(){ge.dispatch(Ce())}),[]),Object(n.jsx)(b.a,{store:ge,children:Object(n.jsxs)(l.a,{children:[Object(n.jsx)(Re,{}),Object(n.jsx)(Ie,{}),Object(n.jsx)("br",{}),Object(n.jsxs)(o.d,{children:[Object(n.jsx)(Te,{exact:!0,roles:["admin","supervisor"],path:"/",component:function(){return Object(n.jsx)(_e,{})}}),Object(n.jsx)(Te,{exact:!0,roles:["admin","supervisor","lead"],path:"/tasks",component:function(){return Object(n.jsx)(yt,{})}}),Object(n.jsx)(Te,{exact:!0,roles:["admin","supervisor","lead"],path:"/workers",component:function(){return Object(n.jsx)(Gt,{})}}),Object(n.jsx)(Te,{exact:!0,roles:["admin","supervisor"],path:"/userManagement",component:function(){return Object(n.jsx)(xa,{})}}),Object(n.jsx)(Te,{exact:!0,path:"/numbersPool",roles:["admin"],component:function(){return Object(n.jsx)(aa,{})}}),Object(n.jsx)(Te,{exact:!0,path:"/workSummary",roles:["admin","supervisor"],component:function(){return Object(n.jsx)(Yt,{})}}),Object(n.jsx)(Te,{exact:!0,path:"/timeSummary",roles:["admin","supervisor"],component:function(){return Object(n.jsx)(Ea,{})}}),Object(n.jsx)(Te,{exact:!0,path:"/workersLive",roles:["admin","supervisor"],component:function(){return Object(n.jsx)(Wa,{})}}),Object(n.jsx)(Te,{exact:!0,path:"/juliaHome",roles:["admin","julia","supervisor"],component:function(){return Object(n.jsx)(tn,{})}}),Object(n.jsx)(o.b,{exact:!0,path:"/login",component:Fe})]})]})})};i.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(an,{})}),document.getElementById("root"))}},[[421,1,2]]]);
//# sourceMappingURL=main.0340a819.chunk.js.map